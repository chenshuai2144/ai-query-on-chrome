# 🧐[问题 | question] V5版本 菜单从后端请求 如何实现不同用户 能看到不同菜单

### 🧐 问题描述 | Problem description

<!--
详细地描述问题，让大家都能理解
Describe the problem in detail so that everyone can understand it
-->

### 💻 示例代码 | Sample code

<!--
一个最小可重现的代码，让开发者可以快速的定位问题
A minimal reproducible code that allows developers to quickly locate problems
-->

### 🚑 其他信息 | Other information

<!--
如截图等其他信息可以贴在这里
Other information such as screenshots can be posted here
-->

OS:

Node：

浏览器 | browser：

## tKlint

可以在 app.tsx内 请求meun菜单,并添加到initState上, 然后再layout内添加menuDataRender属性
![image](https://user-images.githubusercontent.com/49471670/180949402-0a2bf083-11c1-4037-9f90-cfc135adfaae.png)
![image](https://user-images.githubusercontent.com/49471670/180949493-81259ea9-42fd-434c-bbbe-b23e4a62a140.png)

## github-lzxlee

> 可以在app.tsx里面请求meun菜单，然后添加到initState上，然后再layout里面的menuDataRender属性 ![图片](https://user-images.githubusercontent.com/49471670/180949402-0a2bf083-11c1-4037-9f90-cfc135adfaae.png) ![图片](https://user-images.githubusercontent.com/49471670/180949493-81259ea9-42fd-434c-bbbe-b23e4a62a140.png)

现在已经实现动态加载菜单 现在是想知道如何在动态菜单的基础上 对不同用户做路由的访问限制 现在虽然菜单不同 但是用户还是能够通过地址栏输入地址实现访问 有什么办法能让用户没有权限访问的路由直接跳转内置的403页面

## xiahller

可以在跳转时查询后端权限接口，没权限就不跳转或者跳转到缺省页么

## github-lzxlee

> 可以在跳转时查询后端权限接口，没权限就不跳转或者跳转到缺省页么

是指重定向到403页面吗

## xiahller

> > 可以在跳转时查询后端权限接口，没权限就不跳转或者跳转到缺省页么
>
> 是指重定向到403页面吗

是的，我也要做类似需求，但我没有考虑到你说的情况，

## github-lzxlee

> > > 可以在跳转时查询后端权限接口，没权限就不跳转或者跳转到缺省页么
> >
> > 是指重定向到403页面吗
>
> 是的，我也要做类似需求，但我没有考虑到你说的情况，

假设用户知道url地址 但是用户没有访问该页面的权限 你是怎么处理的呢 还有你后端返回的菜单是所有菜单还是用户有权限的菜单

## xiahller

>

我还没开始写这块功能，后端返回所有菜单或者有权限的菜单都一样吧，反正咱们在展示上面要处理呀

## lcc908

哥们找到解决方案了吗

## lcc908

> > 可以在app.tsx里面请求meun菜单，然后添加到initState上，然后再layout里面的menuDataRender属性 ![图片](https://user-images.githubusercontent.com/49471670/180949402-0a2bf083-11c1-4037-9f90-cfc135adfaae.png) ![图片](https://user-images.githubusercontent.com/49471670/180949493-81259ea9-42fd-434c-bbbe-b23e4a62a140.png)
>
> 现在已经实现动态加载菜单 现在是想知道如何在动态菜单的基础上 对不同用户做路由的访问限制 现在虽然菜单不同 但是用户还是能够通过地址栏输入地址实现访问 有什么办法能让用户没有权限访问的路由直接跳转内置的403页面

哥们，遇到和你一样的问题，你解决了吗

## KYX1234

我的想法是在页面跳转的时候拿pathname和menu比较，如果menu里不存在，说明没有这个权限，给他反403
