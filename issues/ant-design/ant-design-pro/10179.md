在antd pro v5中，如果在routes.ts中申明了路由和组件关系，并且在components代码中也定义了对应的组件，但是Layout会失效，可能的原因有以下几点：

1. 部分组件可能没有正确地被引入。请检查你的components代码，确保所有需要的组件都被正确地引入。
2. 路由和组件关系的声明可能存在问题。请检查你的routes.ts文件，确保所有的路由和组件关系都被正确地声明。
3. Layout组件可能没有正确地被使用。请检查你的Layout组件的使用方式，确保它被正确地使用。
4. 你的项目可能没有正确地配置。请检查你的项目配置，确保它被正确地配置。

如果以上的方法都无法解决问题，建议你提供更多的代码和详细的问题描述，以便我们更好地帮助你解决问题。
