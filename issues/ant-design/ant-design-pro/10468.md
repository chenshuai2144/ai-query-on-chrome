# ğŸ› [BUG]åœ¨renderFormItemä¸­ä½¿ç”¨getFieldName è·å¾—çš„å€¼ä¸ºundefied

`AI Reply`

### ğŸ› bug æè¿°

<!--
åœ¨å®˜æ–¹ç»™çš„åˆå§‹åŸæ–‡ä»¶ä¸­ï¼Œant-design-pro\src\pages\TableList\index.tsx ä¸­çš„colums çš„å˜é‡é‡Œï¼Œåœ¨renderFormItem: (item, { defaultRender, ...rest }, form) ä¸­ const status = form.getFieldValue('status');
status ä¸€ç›´æ˜¯undefied
-->

### ğŸ“· å¤ç°æ­¥éª¤ | Recurrence steps

renderFormItem: (item, { defaultRender, ...rest }, form)
const status = form.getFieldValue('status');

### ğŸ æœŸæœ›ç»“æœ | Expected results

ä¸ç­‰äºundefined

### ğŸ’» å¤ç°ä»£ç  | Recurrence code

{
title: (
<FormattedMessage
          id="pages.searchTable.titleUpdatedAt"
          defaultMessage="Last scheduled time"
        />
),
sorter: true,
dataIndex: 'updatedAt',
valueType: 'dateTime',
renderFormItem: (item, { defaultRender, ...rest }, form) => {
const status = form.getFieldValue('status');
console.log(status)
if (`${status}` === '0') {
return false;
}
if (`${status}` === '3') {
return (
<Input
{...rest}
placeholder=
{intl.formatMessage({
id: 'pages.searchTable.exception',
defaultMessage: 'Please enter the reason for the exception!',
})}
/>
);
}
return defaultRender(item);
},
},

### Â© ç‰ˆæœ¬ä¿¡æ¯

- Ant Design Pro ç‰ˆæœ¬: æœ€æ–°ç‰ˆæœ¬
- umi ç‰ˆæœ¬ 4
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ-->

<img width="107" alt="1672409836179" src="https://user-images.githubusercontent.com/22851482/210080073-1a1c02c8-1365-4d8e-b8c7-824235d9c203.png">

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

ä½ å¥½ï¼Œæ ¹æ®ä½ æä¾›çš„é—®é¢˜ï¼Œæ˜¯åœ¨ antd-pro ä¸­ä½¿ç”¨ renderFormItem æ–¹æ³•æ—¶ï¼ŒgetFieldValue æ–¹æ³•è·å–çš„å€¼ä¸º undefinedã€‚å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦æ­£ç¡®åœ°ä¼ é€’äº† form å±æ€§ç»™ renderFormItemï¼Œæˆ–è€…æ˜¯å¦åœ¨ renderFormItem ä¸­æ­£ç¡®è·å–äº† form å±æ€§ã€‚
åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æ£€æŸ¥ä»¥ä¸‹åŸå› ï¼š

1. æ£€æŸ¥ä½¿ç”¨ getFieldProps æˆ–å…¶ä»–ç›¸å…³çš„å±æ€§æ¥è·å–åˆ° getFieldProps æˆ– getFieldValue çš„å€¼
2. æ£€æŸ¥æ•°æ®æ˜¯å¦åœ¨çŠ¶æ€ç®¡ç†å™¨ä¸­ä¼ é€’ï¼Œæ˜¯å¦éœ€è¦åŒæ­¥æ›´æ–°çŠ¶æ€
3. æ£€æŸ¥ antd ç‰ˆæœ¬æ˜¯å¦æœ‰æ›´æ–°ï¼Œå¦‚æœæœ‰æ–°ç‰ˆæœ¬ï¼Œå»ºè®®å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

ä½ å¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ç¤ºä¾‹æ¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```jsx
// å…¶ä¸­ columns éƒ¨åˆ†çœç•¥
<Form form={form}>
  {columns.map((column) => (
    <Form.Item {...column.formItemProps} key={column.key}>
      {getFieldDecorator(
        column.key,
        column.options,
      )(
        <span>
          {column.title}{" "}
          {column.renderFormItem
            ? column.renderFormItem(
                {
                  field: {
                    ...column.options,
                    name: column.key,
                    onChange: (value) => {
                      // æ¯ä¸€æ¬¡çš„è¡¨å•å€¼å˜åŒ–æ—¶ï¼ŒåŒæ—¶æ›´æ–°çŠ¶æ€
                      form.setFieldsValue({ [column.key]: value });
                      dispatch({
                        type: "lister/changeValue",
                        payload: { [column.key]: value },
                      });
                    },
                    onValuesChange: (props, values) => {
                      // onValuesChange ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œjsonæ ¼å¼
                      console.log(column.key, values[column.key]);
                      dispatch({
                        type: "lister/changeValue",
                        payload: { [column.key]: values[column.key] },
                      });
                    },
                  },
                  input: <Input />,
                  form,
                },
                {},
                form,
              )
            : null}
        </span>,
      )}
    </Form.Item>
  ))}
</Form>
```

åœ¨ä¸Šè¿°ä»£ç ç¤ºä¾‹ä¸­ï¼ŒgetFieldValue å®é™…æ˜¯ä½¿ç”¨äº† getFieldDecorator æ–¹æ³•æ¥å¤„ç†çš„ï¼ŒåŒæ—¶åœ¨ form ä¼ é€’è¿›æ¥ä¹‹åï¼Œé€šè¿‡ setState æˆ–è€… dispatch ç­‰æ–¹å¼æ›´æ–°äº†çŠ¶æ€ï¼Œè¾¾åˆ°æ›´æ–°è¡¨å•å€¼çš„ç›®çš„ã€‚

ä½ ä¹Ÿå¯ä»¥æŸ¥æ‰¾ antd å®˜ç½‘ä¸­å“åº”æ–‡æ¡£ï¼Œä»¥ä¾¿å¿«é€Ÿè§£å†³é—®é¢˜ï¼šhttps://ant.design/docs/react/getting-started-cn
