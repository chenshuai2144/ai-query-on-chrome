# 6.x 版本，子目录开发与发布🧐[问题 | question]

### 🧐 问题描述 | Problem description

<!--
详细地描述问题，让大家都能理解
Describe the problem in detail so that everyone can understand it
-->

开发环境 无法使用子目录么？
6.0 版本 子目录发布要改哪些啊？

我从 5.x 搬过来的配置不管用了

### 💻 示例代码 | Sample code

```ts
import { defineConfig } from "@umijs/max";
const publicPathPrefix = "/sea";
export default defineConfig({
  define: {
    // API地址
    API_BASE_URL: "http://localhost:2919/SalesPortal",
    CLIENT_ROOT: "http://localhost:1688",
    // OpenId 客户端名称
    CLIENT_ID: "SalesPortal",
    SKIP_LOGIN_PAGE: false,
    LOGIN_PAGE: "/user/login",
    //启用语言切换
    DISABLE_LANGSELECT: false,
    PUBLIC_PATH: publicPathPrefix + "/",
  },
  base: publicPathPrefix + "/",
  outputPath: "dist" + publicPathPrefix,
  publicPath: publicPathPrefix + "/",
  manifest: {
    basePath: publicPathPrefix,
  },
  headScripts: [
    // 解决首次加载时白屏的问题
    //@ts-ignore
    { src: publicPathPrefix + "/scripts/loading.js", async: true },
  ],
});
```

<!--
一个最小可重现的代码，让开发者可以快速的定位问题
A minimal reproducible code that allows developers to quickly locate problems
-->

### 🚑 其他信息 | Other information

<!--
如截图等其他信息可以贴在这里
Other information such as screenshots can be posted here
-->

OS:

Node：

浏览器 | browser：

## hyzx86

如issue https://github.com/umijs/umi/issues/10189
提到的 主要问题在于 history.location 的更新

## 1. 需要自己封装函数处理`history.location.pathname`路径前缀

如： history.location.pathname.slice(自定义前缀.length)

## 2. 开发环境不支持虚拟目录，必须发布后通过 url重写才可以测试验证
