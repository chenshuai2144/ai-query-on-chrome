# 🧐[问题 | question] layout mix模式和umi多Tab模式下 ，切换tab问题

### 🧐 问题描述 | Problem description

我在antd pro +umi4的项目中，开启了layout mix模式和多Tab模式，举个栗子，我有两条一级路由下面都有三级路由，一级路由path配置了重定向，然后我点击顶部的一级路由切换，就会导致tab标签页出现问题（第一次点击出现两个Tab），接着点击tab也不会切换路由了。如果一级路由path不配置重定向，那就会打开一个空白的tab页面。

### 💻 示例代码 | Sample code

```js
routes: [
  {
    path: "/testManages",
    name: "testManages",
    icon: "crown",
    access: "canAdmin",
    routes: [
      {
        path: "/testManages",
        redirect: "/testManages/workspace",
      },
      {
        path: "/testManages/workspace",
        name: "workspace",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/testManages/testProject",
        name: "testProject",
        icon: "smile",
        access: "canAdmin",
        routes: [
          {
            path: "/testManages/testProject",
            redirect: "/testManages/testProject/projectClass",
          },
          {
            path: "/testManages/testProject/projectClass",
            name: "projectClass",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/testProject/projectManage",
            name: "projectManage",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/testProject/testManage",
            name: "testManage",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/testProject/testReport",
            name: "testReport",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
        ],
      },
      {
        path: "/testManages/companyCandidate",
        name: "companyCandidate",
        icon: "smile",
        access: "canAdmin",
        routes: [
          {
            path: "/testManages/companyCandidate",
            redirect: "/testManages/companyCandidate/groupManage",
          },
          {
            path: "/testManages/companyCandidate/groupManage",
            name: "groupManage",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/companyCandidate/candidateManage",
            name: "candidateManage",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/companyCandidate/testResult",
            name: "testResult",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
        ],
      },
      {
        path: "/testManages/companyEmployee",
        name: "companyEmployee",
        icon: "smile",
        access: "canAdmin",
        routes: [
          {
            path: "/testManages/companyEmployee",
            redirect: "/testManages/companyEmployee/departResult",
          },
          {
            path: "/testManages/companyEmployee/departResult",
            name: "departResult",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/companyEmployee/employeeResult",
            name: "employeeResult",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
          {
            path: "/testManages/companyEmployee/companyTestResult",
            name: "companyTestResult",
            icon: "smile",
            access: "canAdmin",
            component: "./Welcome",
          },
        ],
      },
      {
        path: "/testManages/recoverManage",
        name: "recoverManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
    ],
  },
  {
    path: "/systemManage",
    name: "systemManage",
    icon: "table",
    access: "canAdmin",
    // redirect: '/systemManage/roleManage',
    routes: [
      {
        path: "/systemManage",
        redirect: "/systemManage/roleManage",
      },
      {
        path: "/systemManage/roleManage",
        name: "roleManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/systemManage/userManage",
        name: "userManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/systemManage/accountManage",
        name: "accountManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/systemManage/messageManage",
        name: "messageManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/systemManage/reportManage",
        name: "reportManage",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
      {
        path: "/systemManage/dataDictionary",
        name: "dataDictionary",
        icon: "smile",
        access: "canAdmin",
        component: "./Welcome",
      },
    ],
  },
  {
    path: "/",
    redirect: "/testManages/workspace",
  },
  {
    path: "*",
    layout: false,
    component: "./404",
  },
];
```

```js
// umi配置
 {
 keepalive: [/./],
  tabsLayout: {
    hasDropdown: true,
  }
}
```

```js
//layout配置
{
  layout: 'mix',
  splitMenus: true, // 切割菜单
}
```

### 🚑 其他信息 | Other information

<img width="777" alt="image" src="https://user-images.githubusercontent.com/87792134/219960012-12d1fcb9-9602-4d82-a442-29d5d5e2a962.png">

OS: mac os

Node：16

浏览器 | browser：chrome
