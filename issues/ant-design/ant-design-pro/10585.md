# ğŸ§[é—®é¢˜ | question] å¦‚ä½•é€šè¿‡ switch button åŠ¨æ€åˆ‡æ¢ light \ realDark

`AI Reply`

### ğŸ§ é—®é¢˜æè¿° | Problem description

æƒ³åšä¸€ä¸ªé€šè¿‡ Switch å¼€å…³ç„¶åä¸€é”®åŠ¨æ€åˆ‡æ¢ä¸»é¢˜ ï¼ˆ light \ realDarkï¼‰

è¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿ

**ç±»ä¼¼å®˜æ–¹æ–‡æ¡£ headerçš„è¿™ä¸ªåŠŸèƒ½ï¼š**
<img width="1424" alt="image" src="https://user-images.githubusercontent.com/83916371/222974556-cf5d0756-736d-4bac-84b9-0e135c061a5f.png">

é™„ä¸Šé“¾æ¥ï¼šhttps://pro.ant.design/zh-CN/docs/dynamic-theme#pro-%E8%87%AA%E5%B8%A6%E7%9A%84%E7%BB%84%E4%BB%B6

**ç‰ˆæœ¬ï¼šAnt-design Pro V5 (5.2.0)**

è°¢è°¢

## iodeal

// ä»¥ä¸‹ä¸ºpro 6.0çš„è§£å†³æ–¹æ¡ˆã€‚ pro5å¯ä»¥å‚è€ƒä¸€ä¸‹
// è·¯å¾„ï¼š$$projectPath$$/src/components/RightContent/DarkSwitch.tsx
// åœ¨$$projectPath$$/src/components/RightContent/index.tsxï¼Œå¼•ç”¨å³å¯ï¼š
/\*
import DarkSwitch from './DarkSwitch';

...
return (
...
<DarkSwitch />
...);
\*/

import { Switch } from 'antd';
import React from 'react';
import { useModel } from '@umijs/max';
import { useEmotionCss } from '@ant-design/use-emotion-css';
import defaultSettings from '../../../config/defaultSettings';
const DarkSwitch: React.FC = () => {
const darkSwitchClassName = useEmotionCss(({ token }) => {
return {
display: 'flex',
top: '50%',
transform: 'translate(0, -50%)',
};
});
const {refresh, setInitialState } = useModel('@@initialState');
return (
<Switch
className={darkSwitchClassName}
checkedChildren="â˜€ï¸"
unCheckedChildren="ğŸŒ™"
defaultChecked={defaultSettings.navTheme != "realDark"}
onClick={(checked: boolean) => {
if (checked) {
defaultSettings.navTheme = "light"
} else {
defaultSettings.navTheme = "realDark"
}
setInitialState((s) => ({ ...s, settings: defaultSettings }));
refresh()
}}
/>
);
};

export default DarkSwitch;

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

é’ˆå¯¹ä½ çš„é—®é¢˜ï¼Œæˆ‘è¿™é‡Œæä¾›ä¸€ç§å®ç°æ–¹æ³•ã€‚ä½ å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ª Switch ç»„ä»¶ï¼Œç„¶åé€šè¿‡ç›‘å¬ç‚¹å‡»äº‹ä»¶æ¥åŠ¨æ€ä¿®æ”¹ä¸»é¢˜ã€‚å…·ä½“å®ç°å¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ï¼š

```jsx
import { Switch } from 'antd';
import React from 'react';
import { useModel } from 'umi';
import defaultSettings from '../../config/defaultSettings';

const ThemeSwitch: React.FC = () => {
  const { refresh, setInitialState } = useModel('@@initialState');

  const handleSwitchChange = (checked: boolean) => {
    const settings = { ...defaultSettings, navTheme: checked ? 'realDark' : 'light' };
    setInitialState((s) => ({ ...s, settings }));
    refresh();
  };

  const isRealDark = defaultSettings.navTheme === 'realDark';

  return (
    <Switch
      checkedChildren="ğŸŒœ"
      unCheckedChildren="â˜€ï¸"
      defaultChecked={!isRealDark}
      onClick={handleSwitchChange}
    />
  );
};

export default ThemeSwitch;
```

è¿™é‡Œçš„é»˜è®¤é…ç½®æ˜¯é€šè¿‡ defaultSettings.navTheme æ¥æ§åˆ¶ä¸»é¢˜æ ·å¼ã€‚ä½ éœ€è¦åœ¨ config/defaultSettings.ts ä¸­è¿›è¡Œé…ç½®ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† umi çš„ useModel é’©å­æ¥æ›´æ–°ä¸»é¢˜é…ç½®ï¼Œåˆ·æ–°é¡µé¢ä»¥åŠ è½½æ–°çš„ä¸»é¢˜ã€‚

ä½¿ç”¨è¯¥ Switch ç»„ä»¶æ—¶ï¼Œåªéœ€è¦åœ¨éœ€è¦çš„é¡µé¢å¼•å…¥å³å¯ã€‚ä¾‹å¦‚ï¼š

```jsx
import React from "react";
import ThemeSwitch from "@/components/ThemeSwitch";

const HomePage = () => {
  return (
    <div>
      <h1>Welcome to My Homepage</h1>
      <ThemeSwitch />
    </div>
  );
};
```

å¸Œæœ›è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸ä»…å¯¹ä½ çš„é—®é¢˜æœ‰å¸®åŠ©ï¼Œä¹Ÿå¯¹ React å’Œ Antd çš„ä½¿ç”¨æœ‰æ‰€å¯ç¤ºã€‚

## GuolongCyber

è§£å†³äº†é—®é¢˜ æ„Ÿè°¢å¸®åŠ©ï¼ @chenshuai2144 @iodeal ğŸ™

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

ä¸å®¢æ°”ï¼Œå¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨!å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶æ¬¢è¿æé—®ã€‚

## haobarry

> ä»£ç ä¸å¯¹
> åœ¨umi4ä¸­ refresh()ä¸èµ·ä½œç”¨

## iodeal

> @haobarry
> å°±æ˜¯åœ¨umi4ä¸­ä½¿ç”¨çš„ã€‚çœ‹çœ‹ä½ çš„umiçš„æ’ä»¶æœ‰æ²¡æœ‰åŒ…å«ï¼šinitialState

## haobarry

> >
>
> @haobarry å°±æ˜¯åœ¨umi4ä¸­ä½¿ç”¨çš„ã€‚çœ‹çœ‹ä½ çš„umiçš„æ’ä»¶æœ‰æ²¡æœ‰åŒ…å«ï¼šinitialState

è‚¯å®šæœ‰å•Šï¼Œæ²¡æœ‰å°±æ²¡åŠæ³•è®¾ç½®æ›´æ¢initialStateçš„å€¼äº†ï¼Œæˆ‘å…¶å®ä¹‹å‰æˆ‘å°±åšå¥½åˆ‡æ¢ä¸»é¢˜çš„ä»£ç ï¼Œä¸è¿‡æœ‰æ—¶å€™åˆ‡æ¢å®Œä¸»é¢˜åï¼Œpageä¸Šcssæ ·å¼æœ‰å¤±æ•ˆï¼Œæˆ‘çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸Šæœ‰refresh()è¿™ä¸ªæ–¹æ³•ç”¨æ¥åˆ·æ–°ï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨åï¼Œåˆ‡æ¢ä¸»é¢˜çš„åŠŸèƒ½ä¹Ÿå¤±æ•ˆäº†ï¼ŒæŸ¥äº†ä¸‹æ˜¯umi3é‡Œçš„api
