åœ¨umi4ä¸­ï¼Œ`refresh()`æ–¹æ³•å·²ç»è¢«å¼ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨`useEffect()`æˆ–`useLayoutEffect()`æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨`useEffect()`çš„ç¤ºä¾‹ï¼š

```jsx
import React, { useEffect } from 'react';
import { useModel } from '@umijs/max';
import { useEmotionCss } from '@ant-design/use-emotion-css';
import defaultSettings from '../../../config/defaultSettings';
const DarkSwitch: React.FC = () => {
  const darkSwitchClassName = useEmotionCss(({ token }) => {
    return {
      display: 'flex',
      top: '50%',
      transform: 'translate(0, -50%)',
    };
  });
  const { refresh, setInitialState } = useModel('@@initialState');
  const [isDarkTheme, setIsDarkTheme] = React.useState(defaultSettings.navTheme === 'realDark');

  useEffect(() => {
    const settings = { ...defaultSettings, navTheme: isDarkTheme ? 'light' : 'realDark' };
    setInitialState((s) => ({ ...s, settings }));
    refresh();
  }, [isDarkTheme]);

  return (
    <Switch
      checkedChildren="â˜€ï¸"
      unCheckedChildren="ğŸŒ™"
      defaultChecked={isDarkTheme}
      onClick={() => setIsDarkTheme(!isDarkTheme)}
      className={darkSwitchClassName}
    />
  );
};

export default DarkSwitch;
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`useEffect()`æ¥åœ¨ç»„ä»¶æŒ‚è½½åç«‹å³æ›´æ–°ä¸»é¢˜è®¾ç½®ï¼Œå¹¶ä½¿ç”¨`refresh()`æ¥åˆ·æ–°é¡µé¢ä»¥åŠ è½½æ–°çš„ä¸»é¢˜ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨äº†`useState()`æ¥å­˜å‚¨å½“å‰çš„ä¸»é¢˜è®¾ç½®ï¼Œå¹¶ä½¿ç”¨`onClick()`æ¥åˆ‡æ¢ä¸»é¢˜ã€‚
