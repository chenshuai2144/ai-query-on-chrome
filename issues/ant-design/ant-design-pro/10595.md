# 🐛 [BUG]菜单颜色不会随主题色改变

`AI Reply`

### 🐛 bug 描述

<!--
详细地描述 bug，让大家都能理解
Describe the bug in detail so that everyone can understand it
-->

菜单默认是灰色，使用SettingDrawer修改主题色，或者defaultSettings.ts设置colorPrimary都不会改变颜色

### 📷 复现步骤 | Recurrence steps

<!--
清晰描述复现步骤，让别人也能看到问题
Clearly describe the recurrence steps so that others can see the problem
-->

https://procomponents.ant.design/components/layout
https://preview.pro.ant.design/dashboard/analysis
[preview](https://preview.pro.ant.design/dashboard/analysis)的菜单颜色会改变，[高级布局](https://procomponents.ant.design/components/layout)的菜单颜色不会改变

### 🏞 期望结果 | Expected results

<!--
描述你原本期望看到的结果
Describe what you expected to see
-->

菜单颜色随主题色改变

### 💻 复现代码 | Recurrence code

<!--
提供可复现的代码，仓库，或线上示例
Provide reproducible code, warehouse, or online examples
-->

无

### © 版本信息

- Ant Design Pro 版本:6.0.0
- umi 版本 @umijs/max": "^4.0.52"
- 浏览器环境
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

你好，根据你提供的信息，可以通过修改 `pro-layout` 的主题配置来实现菜单颜色随主题色改变的效果。

具体步骤如下：

1. 在 `config/config.ts` 中添加自定义的 `theme` 配置，如下所示（假设你要修改主题的主色调为红色）：

   ```typescript
   export default {
     theme: {
       "primary-color": "red",
     },
     // 其他配置...
   };
   ```

2. 在页面中引入 `pro-layout` 组件，并在其中添加 `theme={theme}` 属性，如下所示：

   ```typescript
   import { DefaultFooter, getMenuData, ProLayout } from "@ant-design/pro-layout";
   import { useIntl } from "umi";
   import { theme } from "@/config/config"; // 引入自定义主题配置

   const BasicLayout: React.FC<BasicLayoutProps> = (props) => {
     const { children, location = { pathname: "/" } } = props;
     const menuDataRef = React.useRef<MenuDataItem[]>([]);
     const { formatMessage } = useIntl();

     // 获取菜单数据
     const fetchMenuData = async () => {
       menuDataRef.current = await getMenuData();
     };

     React.useEffect(() => {
       fetchMenuData();
     }, []);

     return (
       <ProLayout
         title={formatMessage({ id: "app.title" })}
         logo={<Logo />}
         menuHeaderRender={false}
         menuItemRender={(menuItemProps, defaultDom) => {
           if (menuItemProps.isUrl || menuItemProps.children) {
             return defaultDom;
           }
           return <Link to={menuItemProps.path}>{defaultDom}</Link>;
         }}
         menuDataRender={() => menuDataRef.current}
         rightContentRender={() => <RightContent />}
         layout="mix"
         navTheme="dark"
         // 添加自定义主题配置
         theme={theme}
         // 其他属性...
       >
         {children}
         <DefaultFooter />
       </ProLayout>
     );
   };

   export default BasicLayout;
   ```

这样就能实现菜单颜色随主题色改变的效果了。

参考文档：

- https://github.com/ant-design/ant-design/blob/master/docs/react/customize-theme-cn.md
- https://ant.design/components/layout-cn/#API
