# ğŸ› [BUG]èœå•é¢œè‰²ä¸ä¼šéšä¸»é¢˜è‰²æ”¹å˜

`AI Reply`

### ğŸ› bug æè¿°

èœå•é»˜è®¤æ˜¯ç°è‰²ï¼Œä½¿ç”¨SettingDrawerä¿®æ”¹ä¸»é¢˜è‰²ï¼Œæˆ–è€…defaultSettings.tsè®¾ç½®colorPrimaryéƒ½ä¸ä¼šæ”¹å˜é¢œè‰²

éº»çƒ¦çœ‹æ¸…æ¥šé—®é¢˜çš„æè¿°ï¼Œä¸æ˜¯é‡å†™ProLayoutï¼Œæ˜¯ç”¨layoutç”Ÿæˆçš„èœå•æœ‰bugã€‚
`export const layout: RunTimeLayoutConfig = ({ initialState, setInitialState }) => {}`
ä¸‹é¢æ˜¯èœå•çš„å®é™…æ ·å¼ï¼Œè¿™ä¸ªæ ·å¼ä¸ä¼šéšthemeæ”¹å˜å€¼ã€‚

```
:where(.css-dev-only-do-not-override-1p8ii27).ant-pro-layout .ant-pro-base-menu .ant-menu-submenu-selected {
    color: rgba(0, 0, 0, 0.95);
}
```

![ä¼ä¸šå¾®ä¿¡æˆªå›¾_16782401984242](https://user-images.githubusercontent.com/9922792/223599061-ac4310a5-dae6-4781-a19d-f63e92f3f153.png)

<!--
è¯¦ç»†åœ°æè¿° bugï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
Describe the bug in detail so that everyone can understand it
-->

### ğŸ“· å¤ç°æ­¥éª¤ | Recurrence steps

https://procomponents.ant.design/components/layout
https://preview.pro.ant.design/dashboard/analysis
[preview](https://preview.pro.ant.design/dashboard/analysis)çš„èœå•é¢œè‰²ä¼šæ”¹å˜ï¼Œ[é«˜çº§å¸ƒå±€](https://procomponents.ant.design/components/layout)çš„èœå•é¢œè‰²ä¸ä¼šæ”¹å˜

<!--

æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜
Clearly describe the recurrence steps so that others can see the problem
-->

### ğŸ æœŸæœ›ç»“æœ | Expected results

èœå•é¢œè‰²éšä¸»é¢˜è‰²æ”¹å˜

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
Describe what you expected to see
-->

### ğŸ’» å¤ç°ä»£ç  | Recurrence code

`export const layout: RunTimeLayoutConfig = ({ initialState, setInitialState }) => {}`

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
Provide reproducible code, warehouse, or online examples
-->

### Â© ç‰ˆæœ¬ä¿¡æ¯

- Ant Design Pro ç‰ˆæœ¬: :6.0.0
- umi ç‰ˆæœ¬ @umijs/max": "^4.0.52"
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## baihech

> ### ä»¥ä¸‹çš„ Issues å¯èƒ½ä¼šå¸®åŠ©åˆ°ä½  / The following issues may help you
>
> - [[ğŸ› [BUG]èœå•é¢œè‰²ä¸ä¼šéšä¸»é¢˜è‰²æ”¹å˜Â #10595](https://github.com/ant-design/ant-design-pro/issues/10595)][100%]

æ²¡æœ‰ä»»ä½•å¸®åŠ©ï¼Œè¿™ä¸ªé—®é¢˜è¢«aiç›´æ¥closeäº†

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

éå¸¸æŠ±æ­‰å¯¹æ­¤é€ æˆäº†å›°æ‰°ã€‚å¦‚æœä»¥ä¸Šç»™å‡ºçš„é“¾æ¥æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„ä¿¡æ¯æ‰èƒ½æ‰¾åˆ°ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½æœ‰åŠ©äºè§£å†³é—®é¢˜çš„è¿›ä¸€æ­¥å»ºè®®ï¼š

1. ç¡®è®¤æ˜¯å¦æ­£ç¡®åœ°é›†æˆäº†antdçš„ä¸»é¢˜é…ç½®ï¼Œä¾‹å¦‚åœ¨webpackæˆ–lessç­‰æ„å»ºå·¥å…·ä¸­ã€‚å¯ä»¥æŸ¥çœ‹[è¿™é‡Œ](https://ant.design/docs/react/use-with-create-react-app-cn#%E5%85%B6%E4%BB%96-react-%E8%84%9A%E6%9C%AC)æ‰¾åˆ°ä¸æ‚¨çš„å¼€å‘ç¯å¢ƒç›¸é€‚åº”çš„é€‚å½“é…ç½®ã€‚
2. ç¡®è®¤æ˜¯å¦æ­£ç¡®å¯¼å…¥äº†ProLayoutå’ŒMenuç»„ä»¶ï¼Œä»¥åŠæ˜¯å¦æ­£ç¡®ä¼ é€’äº†ä¸»é¢˜ä¿¡æ¯åˆ°ç»„ä»¶ä¸­ã€‚
3. æ£€æŸ¥åº”ç”¨çš„æ ·å¼è¡¨ä¸­æ˜¯å¦å­˜åœ¨å¯èƒ½ä¸èœå•é¢œè‰²ç›¸å…³çš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å¯ä»¥è¦†ç›–antdæˆ–ProLayoutçš„é»˜è®¤æ ·å¼è¡¨ï¼Œä»è€Œå¯¼è‡´é—®é¢˜ã€‚

å¦‚æœè¿™äº›å»ºè®®ä»æ— æ³•è§£å†³é—®é¢˜ï¼Œå»ºè®®å‘å¸–è¯¦ç»†æè¿°é—®é¢˜ï¼ŒåŒ…æ‹¬ setup.js, app.tsxï¼ŒdefaultSettings.ts ç­‰ç›¸å…³æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶ä¸”æä¾›å®Œæ•´çš„å¤ç°ä»£ç å’Œæˆªå›¾ï¼Œè¿™æ ·å…¶ä»–äººæ‰èƒ½æ›´å¥½åœ°ç†è§£é—®é¢˜å¹¶æä¾›å¸®åŠ©ã€‚

## chenshuai2144

å› ä¸ºè¿™ä¸ªtokenæ²¡æœ‰è¢«è®¾ç½®ï¼Œæ˜¯æ•…æ„è¿™ä¹ˆåšçš„ã€‚å¯ä»¥çœ‹è¿™ä¸¤ä¸ªæ–‡æ¡£æ¥æ‰‹åŠ¨é…ç½®

https://ant.design/docs/react/customize-theme-cn
https://procomponents.ant.design/components/layout#token

## baihech

> å› ä¸ºè¿™ä¸ªtokenæ²¡æœ‰è¢«è®¾ç½®ï¼Œæ˜¯æ•…æ„è¿™ä¹ˆåšçš„ã€‚å¯ä»¥çœ‹è¿™ä¸¤ä¸ªæ–‡æ¡£æ¥æ‰‹åŠ¨é…ç½®
>
> https://ant.design/docs/react/customize-theme-cn https://procomponents.ant.design/components/layout#token

@chenshuai2144 å¤§ä½¬ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œä¹‹å‰å¯ä»¥ç”¨lesså˜é‡è·å–é¢œè‰²ï¼Œ
ä½†æ˜¯ç°åœ¨ç”¨cssinjsï¼Œåœ¨app.tsxçš„RunTimeLayoutConfigé‡Œé…ç½®tokenï¼Œä¸èƒ½åŠ¨æ€æ”¹å˜å€¼ï¼Œä¸‹é¢ä¸€æ®µä»£ç å°±æ˜¯æœ‰bugçš„ï¼Œtokençš„å€¼ä¸ä¼šå’Œä¸»é¢˜ä¸€èµ·æ”¹å˜ã€‚

```
export const layout: RunTimeLayoutConfig = ({ initialState, setInitialState }) => {
  const { token } = theme.useToken();

  return {
    token: {
      sider: {
        colorMenuBackground: token.colorBgContainer,
        colorBgMenuItemSelected: token.colorPrimaryBg,
        colorTextMenuSelected: token.colorPrimary,
        colorTextCollapsedButton: token.colorPrimary,
        colorTextCollapsedButtonHover: token.colorPrimaryBgHover,
      },
    },
    rightContentRender: () => <RightContent />,
    waterMarkProps: {
      content: initialState?.currentUser?.name,
    },
ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
```

## chenshuai2144

æˆ‘æ¥çœ‹çœ‹

## gtt011029

åŒï¼Œ æ‰€ä»¥æœ‰æ–¹æ¡ˆäº†å—
