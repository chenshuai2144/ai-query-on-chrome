# ğŸ§[é—®é¢˜ | question] å¦‚ä½•æ–°å»ºè‡ªå®šä¹‰çš„ä¸»é¢˜åŠä¿®æ”¹å†…ç½®çš„ä¸»é¢˜

`AI Reply`

### ğŸ§ é—®é¢˜æè¿° | Problem description

ä½ å¥½ï¼Œæˆ‘ä¸»è¦æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š

1. æˆ‘æƒ³å…¨æ–°åˆ›å»ºä¸€ä¸ªä¸»é¢˜ï¼Œæ¯”å¦‚åå­—å«åš`myCustomLight`ï¼Œæˆ‘åº”è¯¥æ€ä¹ˆå»åˆ›å»ºè¿™ä¸ªä¸»é¢˜ï¼Ÿæˆ‘çœ‹äº†å®˜ç½‘ä¸Šçš„[å®šåˆ¶ä¸»é¢˜](https://ant.design/docs/react/customize-theme-cn)åªçœ‹åˆ°ä¿®æ”¹æŒ‡å®šç»„ä»¶å†…éƒ¨çš„æ ·å¼ï¼Œæ²¡çœ‹åˆ°åˆ›å»ºè‡ªå·±çš„ä¸»é¢˜è¦æ€ä¹ˆå¼„ã€‚è¿˜æœ‰æˆ‘æƒ³å¾€ä¸»é¢˜é‡Œé¢æ·»åŠ è‡ªå®šä¹‰çš„å˜é‡è¦æ€ä¹ˆåŠ ï¼Ÿæ¯”å¦‚è‡ªå¸¦äº†ä¸€ä¸ª`colorPrimary`ï¼Œç°åœ¨æˆ‘æƒ³åŠ ä¸€ä¸ªå˜é‡`colorMyBg`ã€‚è‡ªå·±çš„ä¸»é¢˜åˆ›å»ºå¥½ä¹‹åè¦å¯ä»¥é€šè¿‡è®¾ç½®`{navTheme: 'myCustomLight'}`æ¥è¿›è¡ŒåŠ¨æ€åˆ‡æ¢ã€‚
2. æˆ‘æƒ³ä¿®æ”¹å†…ç½®çš„`light`ä¸»é¢˜çš„ä¸»é¢˜è‰²ä¸ºç»¿è‰²ï¼Œä½†æ˜¯å½“æˆ‘åŠ¨æ€åˆ‡æ¢ä¸»é¢˜ä¸º`realDark`æ—¶ä¸»é¢˜è‰²è¦ä»ç„¶æ˜¯é»˜è®¤çš„è“è‰²ï¼Œè¿™ä¸ªåº”è¯¥æ€ä¹ˆåšï¼Ÿæˆ‘å°è¯•åœ¨`config.ts`æ–‡ä»¶ä¸­æŒ‰å¦‚ä¸‹è®¾ç½®ï¼Œä¸ç®¡æˆ‘é€‰æ‹©ä»€ä¹ˆä¸»é¢˜ï¼Œä»–çš„ä¸»é¢˜è‰²éƒ½å›ºå®šæˆçº¢è‰²äº†

```ts
    antd: {
        theme: {
            token: {
                colorPrimary: '#00b96b',
            },
            components: {
                Button: {
                    colorPrimary: 'red',
                },
            },
        },
    },
```

Ant Design Proç‰ˆæœ¬ï¼š6.0.0
umiç‰ˆæœ¬ï¼š4
åˆšä½¿ç”¨å‘½ä»¤`pro create myapp`åˆ›å»ºçš„é¡¹ç›®

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

### ğŸ¤” è§£å†³æ–¹æ¡ˆ | Solution

#### 1. æ–°å»ºè‡ªå®šä¹‰ä¸»é¢˜

é¦–å…ˆè¦å®ç°æ–°å»ºè‡ªå®šä¹‰ä¸»é¢˜çš„åŠŸèƒ½ï¼Œéœ€è¦åšä»¥ä¸‹ä¸‰æ­¥ï¼š

##### ç¬¬ä¸€æ­¥ï¼šæ–°å»ºæ–‡ä»¶

åœ¨`styles`æ–‡ä»¶å¤¹ä¸­æ–°å»º`myTheme.less`æ–‡ä»¶ï¼Œç¼–å†™è‡ªå®šä¹‰æ ·å¼

```less
@import "~antd/dist/antd.less"; // å¼•å…¥ antd æ ·å¼
@import "~antd/lib/style/themes/default.less"; // å¼•å…¥ antd ä¸»é¢˜é»˜è®¤æ ·å¼

// è‡ªå®šä¹‰ä¸»é¢˜å˜é‡
@colorPrimary: #1890ff;
@colorMyBg: #f0f0f0;

// è¦†ç›–ä¸»é¢˜å˜é‡
@primary-color: @colorPrimary;
@link-color: @colorPrimary;

// æ‰©å±• antd ä¸»é¢˜
@import "~antd/lib/style/color/colors.less";
@import "~antd/lib/style/core/typography.less";
@import "~antd/lib/style/layout/layout.less";

// åœ¨æ­¤å¤„æ·»åŠ è‡ªå®šä¹‰æ ·å¼
```

##### ç¬¬äºŒæ­¥ï¼šä½¿ç”¨`less-loader`å¤„ç†è‡ªå®šä¹‰æ–‡ä»¶

æ‰¾åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`.umirc.ts`æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­åŠ ä¸Šä¸€äº›é…ç½®

```ts
// .umirc.ts
export default {
  // ...
  // ä¿®æ”¹ less-loader é…ç½®
  lessLoader: {
    lessOptions: {
      javascriptEnabled: true,
      modifyVars: {
        hack: `true; @import '${path.join(
          __dirname,
          "src/styles/myTheme.less",
        )}';`, // css hack
      },
    },
  },
};
```

##### ç¬¬ä¸‰æ­¥ï¼šå¼•ç”¨è‡ªå®šä¹‰ä¸»é¢˜

æ‰¾åˆ°`config.ts`æ–‡ä»¶ï¼Œä¿®æ”¹`theme`ä¸­ä¼ å…¥çš„ä¸»é¢˜é…ç½®ï¼Œå°†è‡ªå®šä¹‰ä¸»é¢˜çš„åå­—å’Œè·¯å¾„åŠ å…¥ï¼š

```ts
// config.ts
import { defineConfig } from "umi";

export default defineConfig({
  // ...
  theme: {
    // æ–°åŠ å…¥è‡ªå®šä¹‰ä¸»é¢˜
    myCustomLight: {
      // è‡ªå®šä¹‰ä¸»é¢˜å
      "primary-color": "#1890ff", // è‡ªå®šä¹‰ä¸»é¢˜å˜é‡
    },
    // ... å…¶å®ƒä¸»é¢˜é…ç½®
  },
});
```

è¿™æ ·é…ç½®å®Œæˆåå°±å¯ä»¥åœ¨åº”ç”¨ä¸­åŠ¨æ€åˆ‡æ¢è‡ªå®šä¹‰çš„ä¸»é¢˜ï¼Œæ¯”å¦‚åœ¨ç»„ä»¶ä¸­è®¾ç½®ï¼š

```tsx
import React from "react";
import { Button } from "antd";
import "antd/dist/antd.css"; // å¼•å…¥ antd æ ·å¼

export default () => {
  const [theme, setTheme] = React.useState("myCustomLight"); // æŒ‡å®šè‡ªå®šä¹‰ä¸»é¢˜å

  return (
    <div>
      <Button
        onClick={() =>
          theme === "myCustomLight"
            ? setTheme("dark")
            : setTheme("myCustomLight")
        }
      >
        åˆ‡æ¢ä¸»é¢˜
      </Button>
    </div>
  );
};
```

#### 2. ä¿®æ”¹å†…ç½®ä¸»é¢˜

è¦ä¿®æ”¹å†…ç½®çš„`light`ä¸»é¢˜çš„ä¸»é¢˜è‰²ä¸ºç»¿è‰²ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤è¿›è¡Œæ“ä½œï¼š

##### ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰ä¸»é¢˜

æŒ‰ç…§ä¸Šè¿°æ–¹æ³•è‡ªå®šä¹‰ä¸€ä¸ª`myCustomLight`çš„ä¸»é¢˜ã€‚

##### ç¬¬äºŒæ­¥ï¼šä¿®æ”¹å†…ç½®ä¸»é¢˜

åœ¨`config.ts`ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š

```ts
// config.ts
import { defineConfig } from "umi";

export default defineConfig({
  // ...
  theme: {
    myCustomLight: {
      // è‡ªå®šä¹‰ä¸»é¢˜å
      "primary-color": "#00b96b", // è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²
      "@btn-primary-bg": "@primary-color",
      "@btn-default-next-color": "@primary-color",
    },
    realDark: {
      "primary-color": "#4c87d4",
    },
    light: {
      "primary-color": "#00b96b", // ä¿®æ”¹ä¸»é¢˜è‰²ä¸ºç»¿è‰²
    },
  },
  // ...
});
```

è¿™é‡Œé’ˆå¯¹`light`ä¸»é¢˜å°†`primary-color`ä¿®æ”¹ä¸ºç»¿è‰²ã€‚

##### ç¬¬ä¸‰æ­¥ï¼šå¤„ç†ç»„ä»¶æ ·å¼

å› ä¸ºè¿™é‡Œä¼šå°†`light`ä¸»é¢˜çš„ä¸»é¢˜è‰²ä¿®æ”¹ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå½±å“åˆ°ä¸€äº›ç»„ä»¶æ ·å¼ï¼Œéœ€è¦åœ¨ç»„ä»¶ä¸­è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚ï¼š

```tsx
import React from "react";
import { Layout, Menu } from "antd";
import "antd/dist/antd.css"; // å¼•å…¥ antd æ ·å¼

const { Header, Content, Sider } = Layout;

export default () => {
  const [theme, setTheme] = React.useState("light"); // åˆå§‹é€‰æ‹© light ä¸»é¢˜

  const handleClick = React.useCallback((payload) => {
    setTheme(payload.key); // åˆ‡æ¢ä¸»é¢˜
  }, []);

  return (
    <Layout>
      <Header className="header">Header</Header>
      <Content>
        <Layout>
          <Sider width={200} className="site-layout-background">
            <Menu
              mode="inline"
              defaultSelectedKeys={["1"]}
              onClick={handleClick}
            >
              {/* éœ€è¦æ‰‹åŠ¨è®¾ç½® antd ç»„ä»¶çš„æ ·å¼ */}
              <Menu.Item
                key="light"
                style={theme === "light" ? { background: "#fff" } : {}}
              >
                light
              </Menu.Item>
              <Menu.Item
                key="myCustomLight"
                style={theme === "myCustomLight" ? { background: "#fff" } : {}}
              >
                myCustomLight
              </Menu.Item>
              <Menu.Item
                key="realDark"
                style={theme === "realDark" ? { background: "#fff" } : {}}
              >
                realDark
              </Menu.Item>
            </Menu>
          </Sider>
          <Content style={{ padding: "0 24px", minHeight: 280 }}>
            Content
          </Content>
        </Layout>
      </Content>
    </Layout>
  );
};
```

è¿™é‡Œæ‰‹åŠ¨è®¾ç½®äº†`Menu.Item`ç»„ä»¶çš„èƒŒæ™¯é¢œè‰²ï¼Œå› ä¸ºåœ¨é€‰æ‹©`light`ä¸»é¢˜æ—¶ï¼Œå®ƒä»¬çš„èƒŒæ™¯å°†ä¸ä¸»ä½“é»˜è®¤é¢œè‰²ç›¸åŒï¼Œè¿™å¯èƒ½å¯¼è‡´å®ƒä»¬åœ¨å¸ƒå±€ä¸­çœ‹èµ·æ¥ä¸åè°ƒã€‚

#### å‚è€ƒæ–‡çŒ®

- [Ant Design è‡ªå®šä¹‰ä¸»é¢˜](https://ant.design/docs/react/customize-theme-cn)
- [umi é…ç½®](https://umijs.org/config/)

## chenshuai2144

https://umijs.org/docs/max/antd#theme

çœ‹è¿™é‡Œï¼Œåœ¨è¿™è¾¹é…ç½®å°±å¯ä»¥

## DreamParadise

> https://umijs.org/docs/max/antd#theme
>
> çœ‹è¿™é‡Œï¼Œåœ¨è¿™è¾¹é…ç½®å°±å¯ä»¥

æˆ‘æƒ³æ–°å»ºå¤šä¸ªè‡ªå®šä¹‰çš„ä¸»é¢˜ï¼Œç„¶åå¯ä»¥åœ¨æ–°å»ºçš„ä¸»é¢˜é‡Œé¢éšæ„åˆ‡æ¢ï¼Œä¸æ˜¯åœ¨å†…ç½®çš„realDarkå’Œlightä¹‹é—´åˆ‡æ¢

## DreamParadise

è¿˜æœ‰ä¸€ç‚¹é—®é¢˜ï¼š

1. ä½¿ç”¨design tokençš„è¯æ˜¯ä¸æ˜¯å°±ä¸éœ€è¦ç”¨åˆ°`less`äº†ï¼Œæ ·å¼å…¨éƒ½å†™åœ¨`tsx`æ–‡ä»¶ä¸­äº†ï¼Ÿ
2. æ˜¯çš„è¯é‚£æˆ‘æƒ³è¦ç»™ä¸€ä¸ªå…ƒç´ é…ç½®ä¼ªç±»çš„æ ·å¼æˆ–è€…ç»™ä»–çš„å­å…ƒç´ é…ç½®æ ·å¼çš„è¯è¦æ€ä¹ˆå†™å‘¢ï¼Ÿåƒä¸‹é¢çš„å®˜æ–¹ç¤ºä¾‹éƒ½æ˜¯ç›´æ¥åœ¨`style`é‡Œé¢è®¾ç½®çš„ï¼Œé‚£è®¾ç½®ä¸åˆ°ä¼ªç±»æˆ–è€…å­å…ƒç´ ä¸Šï¼Ÿ
3. æˆ‘èƒ½ä¸èƒ½å¾€`const { token } = useToken();`è¿™ä¸ª`token`é‡Œæ·»åŠ è‡ªå®šä¹‰çš„å˜é‡ï¼Ÿ

```ts
import { Button, theme } from 'antd';
import React from 'react';

const { useToken } = theme;

const App: React.FC = () => {
  const { token } = useToken();

  return <Button style={{ backgroundColor: token.colorPrimary }}>Button</Button>;
};

export default App;
```
