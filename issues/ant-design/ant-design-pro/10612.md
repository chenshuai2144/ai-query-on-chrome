# ğŸ§[é—®é¢˜ | question] ä¼ åˆ°ProTableé¡µé¢çš„å‚æ•°ï¼Œèµ‹å€¼åˆ°requestä¸­çš„paramsï¼Œæ€ä¹ˆåŠ¨æ€çš„åœ¨requesté‡Œé¢è¯·æ±‚åˆ†é¡µæ¥å£

### ğŸ§ é—®é¢˜æè¿° | Problem description

<!--
è¯¦ç»†åœ°æè¿°é—®é¢˜ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
Describe the problem in detail so that everyone can understand it
-->

ä¼ åˆ°ProTableé¡µé¢çš„å‚æ•°ï¼Œèµ‹å€¼åˆ°requestä¸­çš„paramsï¼Œæ€ä¹ˆåŠ¨æ€çš„åœ¨requesté‡Œé¢è¯·æ±‚åˆ†é¡µæ¥å£

### ğŸ’» ç¤ºä¾‹ä»£ç  | Sample code

import { getByPage } from '@/api/user';
import { Status } from '@/constants/common';
import { Locked, Sex, Type } from '@/constants/user';
import { DateCompareNow } from '@/utils/user';
import type { ActionType, ProColumns } from '@ant-design/pro-components';
import { ProTable } from '@ant-design/pro-components';
import { Space, Tag } from 'antd';
import React, {useRef} from 'react';
// import {CountContext} from '../index'

const OrgPage: React.FC<Org.OrgTable> = (props) => {
console.log('ä¸Šé¢', props)
const actionRef = useRef<ActionType>();
// const a = useContext(CountContext);
// console.log('ä¸Šé¢a', a)
const columns: ProColumns<User.User>[] = [
{
title: 'ID',
dataIndex: 'id',
hideInSearch: true,
hideInTable: true,
width: 48,
},
{
title: 'ç”¨æˆ·å¤´åƒ',
dataIndex: 'avatar',
ellipsis: true,
hideInSearch: true,
// render: (\_, record) => {
// const uri = `/api/download?file=${record.avatar}`
// console.log(uri)
// return (
// <Space>
// <Avatar src={<img src={uri} alt="å¤´åƒ" />} />
// </Space>)
// },
},
// {
// title: 'æ‰€å±ç»„ç»‡',
// dataIndex: "org.name",
// ellipsis: true,
// hideInSearch: true,
//
// },
{
title: 'ç”¨æˆ·å',
dataIndex: 'username',
copyable: true,
ellipsis: true,
},
{
title: 'ç”¨æˆ·å§“å',
dataIndex: 'name',
ellipsis: true,
},

    {
      disable: true,
      title: 'ç”¨æˆ·æ€§åˆ«',
      dataIndex: 'sex',
      // filters: true,
      onFilter: true,
      ellipsis: true,
      // hideInSearch: true,
      valueType: 'select',
      valueEnum: Sex,
      width: 100,
      render: (_, record) => (
        <Space>
          {record.sex === 1 && (
            <Tag color="volcano" key={record.sex}>
              ç”·
            </Tag>
          )}
          {record.sex === 2 && (
            <Tag color="orange" key={record.sex}>
              å¥³
            </Tag>
          )}
        </Space>
      ),
    },
    {
      disable: true,
      title: 'ç”¨æˆ·ç±»å‹',
      dataIndex: 'type',
      // filters: true,
      onFilter: true,
      ellipsis: true,
      // hideInSearch: true,
      valueType: 'select',
      valueEnum: Type,
      width: 100,
      render: (_, record) => (
        <Space>
          {record.type === 1 && (
            <Tag color="blue" key={record.type}>
              ç«™ç‚¹ç®¡ç†å‘˜
            </Tag>
          )}
          {record.type === 2 && (
            <Tag color="green" key={record.type}>
              æ™®é€šç”¨æˆ·
            </Tag>
          )}
        </Space>
      ),
    },
    {
      disable: true,
      title: 'æ˜¯å¦é”å®š',
      dataIndex: 'isLocked',
      // filters: true,
      onFilter: true,
      ellipsis: true,
      // hideInSearch: true,
      valueType: 'select',
      valueEnum: Locked,
      render: (_, record) => (
        <Space>
          {record.isLocked === 1 && (
            <Tag color="green" key={record.isLocked}>
              æ­£å¸¸
            </Tag>
          )}
          {record.isLocked === 2 && (
            <Tag color="red" key={record.isLocked}>
              é”å®š
            </Tag>
          )}
        </Space>
      ),
    },

    {
      title: 'æ˜¯å¦è¿‡æœŸ',
      dataIndex: 'expired',
      ellipsis: true,
      hideInSearch: true,
      render: (_, record) => <Space>{DateCompareNow(record.expired)}</Space>,
    },
    {
      disable: true,
      title: 'ç”¨æˆ·çŠ¶æ€',
      dataIndex: 'status',
      // filters: true,
      onFilter: true,
      ellipsis: true,
      // hideInSearch: true,
      valueType: 'select',
      valueEnum: Status,
      render: (_, record) => (
        <Space>
          {record.status === 0 && (
            <Tag color="green" key={record.status}>
              å¯ç”¨
            </Tag>
          )}
          {record.status === 1 && (
            <Tag color="red" key={record.status}>
              ç¦ç”¨
            </Tag>
          )}
        </Space>
      ),
    },
    {
      title: 'åˆ›å»ºæ—¶é—´',
      key: 'createAt',
      dataIndex: 'createAt',
      valueType: 'date',
      sorter: true,
      width: 110,
      hideInSearch: true,
    },
    {
      title: 'ä¿®æ”¹æ—¶é—´',
      dataIndex: 'modifyAt',
      valueType: 'date',
      sorter: true,
      hideInSearch: true,
      width: 110,

      // search: {
      //   transform: (value) => {
      //     return {
      //       startTime: value[0],
      //       endTime: value[1],
      //     };
      //   },
      // },
    },

];
return (
<>
<ProTable<User.User>
columns={columns}
actionRef={actionRef}
cardBordered
// @ts-ignore
request={async (params = {}, sort, filter) => {
console.log('props', props);
const data = { ...params, orgId: props.orgId };
const r = await getByPage(data, { ...sort, ...filter });
return {
...r.data,
};
}}

        // columnsState={{
        //   persistenceKey: 'pro-table-singe-demos',
        //   persistenceType: 'localStorage',
        //   onChange(value) {
        //     console.log('valuex: ', value);
        //   },
        // }}
        rowKey="id"
        search={{
          labelWidth: 'auto',
        }}
        options={{
          setting: {
            listsHeight: 400,
          },
        }}
        pagination={{
          pageSize: 10,
          // onChange: (page) => console.log(page),
        }}
        dateFormatter="string"
      />
    </>

);
};

export default OrgPage;

<!--
ä¸€ä¸ªæœ€å°å¯é‡ç°çš„ä»£ç ï¼Œè®©å¼€å‘è€…å¯ä»¥å¿«é€Ÿçš„å®šä½é—®é¢˜
A minimal reproducible code that allows developers to quickly locate problems
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯ | Other information

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
Other information such as screenshots can be posted here
-->

OS:

Nodeï¼š

æµè§ˆå™¨ | browserï¼š

## Mikey1502

éšç€ä¼ å…¥çš„propså‚æ•°çš„æ”¹å˜ï¼ŒåŠ¨æ€è¯·æ±‚åˆ†é¡µæ¥å£

## echoyl

protable é‡Œé¢æœ‰ä¸€ä¸ªparams å‚æ•° å¯ä»¥æŠŠpropsçš„å‚æ•°å†™åˆ°è¿™é‡Œé¢ requestå°±ä¼šé‡æ–°è¯·æ±‚äº†
![image](https://user-images.githubusercontent.com/21699984/224885627-3284bd00-e768-4db2-9b9f-e00c9ea04ff7.png)

## Mikey1502

è°¢è°¢ï¼Œå·²è§£å†³
