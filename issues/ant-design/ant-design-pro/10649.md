# 🧐[问题 | question] 我想在antd里做大量文本的展示，这个用什么来实现比较好。文本里的换行及Tab怎么解决

`AI Reply`

### 🧐 问题描述 | Problem description

我想在antd里做大量文本的展示，这个用什么来实现比较好。有用过proTable放一行一列，但文本里的换行及Tab又不支持

### 💻 示例代码 | Sample code

### 🚑 其他信息 | Other information

OS:

Node：

浏览器 | browser：

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

### 📝 解决方案 | Solution

在Antd中有一个组件可以用来展示大量文本，那就是`Typography`组件，其中的`Paragraph`组件是用来展示段落文本的，可以很容易解决换行问题，同时通过CSS样式可以解决Tab所带来的问题。

代码样例：

```jsx
import { Typography } from "antd";

const { Paragraph } = Typography;

const myText = "这是一段段落文本，\n可以解决换行问题，\t同时还可以处理Tab";

const MyComponent = () => {
  return <Paragraph>{myText}</Paragraph>;
};

export default MyComponent;
```

在上述代码中，我们使用`Typography`组件声明了一个变量`Paragraph`，通过`myText`变量来设置要展示的文本内容。在组件的渲染中，将`myText`变量传递给`Paragraph`组件，Antd会自动处理换行，并且会在代码中保留Tab的缩进。

如果需要对Tab进行处理，我们可以设置一个自定义的CSS样式，将`\t`替换成相应的空格大小缩进，示例如下：

```jsx
import { Typography, StyleSheet } from "antd";

const { Paragraph } = Typography;

const myText = "这是一段段落文本，\n可以解决换行问题，\t同时还可以处理Tab";

const styles = StyleSheet.create({
  codeStyle: {
    whiteSpace: "pre-wrap",
    fontFamily: "monospace",
    fontSize: "14px",
    lineHeight: "1.6",
    tabSize: 2,
    MozTabSize: 2,
    WebkitTabSize: 2,
  },
});

const MyComponent = () => {
  return (
    <Typography>
      <Paragraph style={styles.codeStyle}>{myText}</Paragraph>
    </Typography>
  );
};

export default MyComponent;
```

上述代码中，我们为`Paragraph`组件添加了一个样式`codeStyle`，其中`whiteSpace: "pre-wrap"`用来展示Tab和空格，`fontFamily: "monospace"`指定在紧凑字体中使用固定宽度字符，`tabSize: 2`指定Tab缩进大小，MozTabSize和WebkitTabSize是用来支持旧版浏览器的。

需要注意的是，在使用自定义样式时，也需要将文本内容传递给`Typography`组件中进行展示，同时在渲染`Paragraph`组件时将样式作为属性传入。

### 🔗 参考文档 | Reference Documentation

- [Antd Typography组件](https://ant.design/components/typography-cn/#components-typography-demo-basic)
- [CSS 白空间处理](https://developer.mozilla.org/zh-CN/docs/Web/CSS/white-space)

## staryzhou

按你的代码是有报错的。参考https://ant.design/components/typography-cn#components-typography-demo-basic可以。
如果typography,paragraph中的内容是通过后端请求获取的，这样的代码要怎么写。

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

非常抱歉我之前回复的代码有问题，确实没有通过JavaScript的语法检测。文章中的代码也有误，请特别注意!

下面是修正后的代码范例：

```jsx
import { Typography } from "antd";

const { Paragraph } = Typography;

const myText = "这是一段段落文本，\n可以解决换行问题，\t同时还可以处理Tab";

const MyComponent = () => {
  return (
    <Typography>
      <Paragraph>{myText}</Paragraph>
    </Typography>
  );
};

export default MyComponent;
```

这样的代码只是一个简单的范例，通常情况下，如果内容是从后端接口获取的，我们需要使用`useState`或`useEffect`等React Hook来处理状态和异步请求。例如，下面的代码使用了React Hook的`useState`函数对从后端获取的文本内容进行状态管理。

```jsx
import { Typography, Spin } from "antd";
import axios from "axios";
import { useEffect, useState } from "react";

const { Paragraph } = Typography;

const MyComponent = () => {
  const [loading, setLoading] = useState(false);
  const [text, setText] = useState("<Loading...>");

  useEffect(() => {
    setLoading(true);
    axios
      .get("/api/text")
      .then((res) => setText(res.data))
      .catch(console.log)
      .finally(() => setLoading(false));
  }, []);

  return (
    <Spin spinning={loading}>
      <Typography>
        <Paragraph>{text}</Paragraph>
      </Typography>
    </Spin>
  );
};

export default MyComponent;
```

在上述代码中，我们使用了`useState`方法来声明两个变量`loading`和`text`，分别用于控制是否正在加载和存储文本内容。同时，使用了`useEffect`方法来在组件挂载时向后端发起请求，获取文本内容后调用`setText`方法进行更新，最后使用`Spin`组件来展示加载中的旋转图标（可选）。

需要注意的是，这里的代码使用了axios来向后端发起请求，我们需要自行安装并配置axios，如果后端服务没有提供api接口，也需要自行设置代理或跨域处理。

参考文档：

- [React Hooks - useState](https://reactjs.org/docs/hooks-state.html)
- [React Hooks - useEffect](https://reactjs.org/docs/hooks-effect.html)
- [Axios](https://github.com/axios/axios)
- [Ant Design - Spin](https://ant.design/components/spin-cn/)
