# ğŸ› [BUG]åŠ¨æ€æ¸²æŸ“Menuèœå•æ€»æ˜¯é»˜è®¤é€‰ä¸­æœ€åä¸€é¡¹ä¸”æ— æ³•é€‰æ‹©å…¶ä»–é¡¹

## ğŸ“· å¤ç°æ­¥éª¤

åœ¨app.tsxä¸­layoutå¯¹è±¡é‡Œä½¿ç”¨requestè·å–åˆ°æ•°æ®å¹¶æ¸²æŸ“çš„èœå•æ€»æ˜¯ä¼šé»˜è®¤é€‰ä¸­èœå•çš„æœ€åä¸€é¡¹ï¼Œå¹¶è§¦å‘ä¸¤æ¬¡onSelectäº‹ä»¶ã€‚å¹¶ä¸”åç»­çš„onClickå’ŒonSelectäº‹ä»¶éƒ½å¤±æ•ˆäº†ã€‚ä¹Ÿæ— æ³•å†é€‰ä¸­å…¶ä»–é¡¹èœå•ã€‚

## ğŸ æœŸæœ›ç»“æœ

æœŸæœ›æ¯æ¬¡è¯·æ±‚èœå•æ•°æ®åï¼Œèœå•èƒ½å¤Ÿæ­£å¸¸æ¸²æŸ“ï¼Œä¸”èƒ½å¤Ÿæ­£å¸¸ç‚¹å‡»å’Œé€‰ä¸­å…¶ä»–é¡¹èœå•ã€‚

## ğŸ’» å¤ç°ä»£ç 

```jsx
// ä»æœåŠ¡å™¨è·å–èœå•æ•°æ®
menu: {
  // æ¯å½“ initialState?.currentUser?.userid å‘ç”Ÿä¿®æ”¹æ—¶é‡æ–°æ‰§è¡Œ request
  params: {
    // userId: initialState
  },
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  request: async (params: void, defaultMenuData: any) => {
    const menus = await getMenuList().then((res: any) => {
      return res.data.map((item: any) => {
        subMenuArr.push(item.id)
        return {
          path: '/',
          name: item.meta.title,
          icon: React.createElement(allIcons['SettingOutlined']),
          key: item.name + item.meta.title,
          routes: item.children.map((element: any) => {
            return {
              // path: '/?path=' + element.fullUrl,
              // path: 'https://procomponents.ant.design/components/layout',
              path: '/',
              name: element.meta.title,
              key: element.name + element.meta.title,
            };
          }),
        };
      });
    });
    // initialState.currentUser ä¸­åŒ…å«äº†æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯
    setInitialState({ ...initialState, rootSubmenuKeys: subMenuArr })
    return menus;
  },
  onClick: ({ item }: { item: any }) => {
    console.log(item, 'item,é€‰ä¸­èœå•');
  },
},
```

## Â© ç‰ˆæœ¬ä¿¡æ¯

- Ant Design Pro ç‰ˆæœ¬: 6.0.0
- umi ç‰ˆæœ¬:4
- æµè§ˆå™¨ç¯å¢ƒ:edge
- å¼€å‘ç¯å¢ƒ [e.g. windows 11]

## ğŸš‘ å…¶ä»–ä¿¡æ¯

è§å›¾ã€‚
