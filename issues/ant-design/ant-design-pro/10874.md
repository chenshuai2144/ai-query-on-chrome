# 🐛 [BUG]动态渲染Menu菜单总是默认选中最后一项且无法选择其他项

## 📷 复现步骤

在app.tsx中layout对象里使用request获取到数据并渲染的菜单总是会默认选中菜单的最后一项，并触发两次onSelect事件。并且后续的onClick和onSelect事件都失效了。也无法再选中其他项菜单。

## 🏞 期望结果

期望每次请求菜单数据后，菜单能够正常渲染，且能够正常点击和选中其他项菜单。

## 💻 复现代码

```jsx
// 从服务器获取菜单数据
menu: {
  // 每当 initialState?.currentUser?.userid 发生修改时重新执行 request
  params: {
    // userId: initialState
  },
  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  request: async (params: void, defaultMenuData: any) => {
    const menus = await getMenuList().then((res: any) => {
      return res.data.map((item: any) => {
        subMenuArr.push(item.id)
        return {
          path: '/',
          name: item.meta.title,
          icon: React.createElement(allIcons['SettingOutlined']),
          key: item.name + item.meta.title,
          routes: item.children.map((element: any) => {
            return {
              // path: '/?path=' + element.fullUrl,
              // path: 'https://procomponents.ant.design/components/layout',
              path: '/',
              name: element.meta.title,
              key: element.name + element.meta.title,
            };
          }),
        };
      });
    });
    // initialState.currentUser 中包含了所有用户信息
    setInitialState({ ...initialState, rootSubmenuKeys: subMenuArr })
    return menus;
  },
  onClick: ({ item }: { item: any }) => {
    console.log(item, 'item,选中菜单');
  },
},
```

## © 版本信息

- Ant Design Pro 版本: 6.0.0
- umi 版本:4
- 浏览器环境:edge
- 开发环境 [e.g. windows 11]

## 🚑 其他信息

见图。
