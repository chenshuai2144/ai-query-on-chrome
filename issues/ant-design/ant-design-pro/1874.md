# antd pro é¡¹ç›®å†…åµŒåˆ° electronçš„ç®€å•å®è·µ

`ğŸ¤©Discussion`

æœ€è¿‘å‡†å¤‡å°†antd proçš„é¡¹ç›®è¿ç§»åˆ° electronï¼Œæ‰¾äº†ä¸¤å¤©èµ„æ–™ç»ˆäºæœ‰ç‚¹å¤´ç»ªã€‚
ä¸€ã€é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªå®Œæ•´çš„antd proçš„é¡¹ç›®ï¼Œç„¶åè¿›å…¥é¡¹ç›®ç›®å½•å®‰è£…ä¾èµ–

```python
# å®‰è£…ä¾èµ–åŒ…å¹¶è¿è¡Œ
npm install -save electron
```

äºŒã€é…ç½® main.js
é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢æ–°å»º main.js æ–‡ä»¶

```python
// å¼•å…¥electronå¹¶åˆ›å»ºä¸€ä¸ªBrowserwindow
const { app, BrowserWindow } = require('electron');
const path = require('path');
const url = require('url');

// ä¿æŒwindowå¯¹è±¡çš„å…¨å±€å¼•ç”¨,é¿å…JavaScriptå¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶,çª—å£è¢«è‡ªåŠ¨å…³é—­.
let mainWindow;

function createWindow() {
  // åˆ›å»ºæµè§ˆå™¨çª—å£,å®½é«˜è‡ªå®šä¹‰å…·ä½“å¤§å°ä½ å¼€å¿ƒå°±å¥½
  mainWindow = new BrowserWindow({ width: 800, height: 600 });

  // åŠ è½½åº”ç”¨ electron-quick-startä¸­é»˜è®¤çš„åŠ è½½å…¥å£
  // mainWindow.loadURL(
  //   url.format({
  //     pathname: path.join(__dirname, 'index.html'),
  //     protocol: 'file:',
  //     slashes: true,
  //   })
  // );

  // åŠ è½½åº”ç”¨ é€‚ç”¨äº react é¡¹ç›®
  mainWindow.loadURL('http://localhost:8000/');

  // æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé»˜è®¤ä¸æ‰“å¼€
  // mainWindow.webContents.openDevTools();

  // å…³é—­windowæ—¶è§¦å‘ä¸‹åˆ—äº‹ä»¶.
  mainWindow.on('closed', () => {
    mainWindow = null;
  });
}

// å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è°ƒç”¨æ­¤æ–¹æ³•
app.on('ready', createWindow);

// æ‰€æœ‰çª—å£å…³é—­æ—¶é€€å‡ºåº”ç”¨.
app.on('window-all-closed', () => {
  // macOSä¸­é™¤éç”¨æˆ·æŒ‰ä¸‹ `Cmd + Q` æ˜¾å¼é€€å‡º,å¦åˆ™åº”ç”¨ä¸èœå•æ å§‹ç»ˆå¤„äºæ´»åŠ¨çŠ¶æ€.
  if (process.platform !== 'darwin') {
    app.quit();
  }
});

app.on('activate', () => {
  // macOSä¸­ç‚¹å‡»Dockå›¾æ ‡æ—¶æ²¡æœ‰å·²æ‰“å¼€çš„å…¶ä½™åº”ç”¨çª—å£æ—¶,åˆ™é€šå¸¸åœ¨åº”ç”¨ä¸­é‡å»ºä¸€ä¸ªçª—å£
  if (mainWindow === null) {
    createWindow();
  }
});

// ä½ å¯ä»¥åœ¨è¿™ä¸ªè„šæœ¬ä¸­ç»­å†™æˆ–è€…ä½¿ç”¨requireå¼•å…¥ç‹¬ç«‹çš„jsæ–‡ä»¶.

```

è¦æ³¨æ„â€œåŠ è½½åº”ç”¨â€è¿™é‡Œä½ çš„ç«¯å£å·è¦ä¸€è‡´ã€‚

ä¸‰ã€é…ç½®ä½ çš„ package.json ï¼Œæ·»åŠ ä»¥ä¸‹é¡¹

```python
{
  "main": "main.js", // é…ç½®å¯åŠ¨æ–‡ä»¶
  "dependencies": {
    "electron": "^2.0.5"
  },
  "scripts": {
    "electron-start": "electron ." // é…ç½®electronçš„startï¼ŒåŒºåˆ«äºwebç«¯çš„start
  }
}
```

æ³¨æ„æ ¹æ®ä½ è‡ªå·±åŸæœ¬çš„é¡¹ç›®çš„åŸºç¡€ä¸Šæ¥é…ç½®ã€‚

å››ã€è¿˜æœ‰é‡è¦çš„ä¸€ç‚¹éœ€è¦ä¿®æ”¹webpack
åœ¨antd proæˆ‘ä¿®æ”¹çš„æ˜¯ .babelrc.jsï¼Œæ·»åŠ  target: 'electron-renderer'ã€‚

ä»¥ä¸‹æ˜¯æˆ‘çš„ .babelrc.js é…ç½®

```python
module.exports = {
  target: 'electron-renderer',
  plugins: [
    [
      'babel-plugin-module-resolver',
      {
        alias: {
          components: './src/components',
        },
      },
    ],
  ],
};
```

æ³¨æ„æ ¹æ®ä½ è‡ªå·±åŸæœ¬çš„é¡¹ç›®çš„åŸºç¡€ä¸Šæ¥é…ç½®ã€‚

äº”ã€å¯åŠ¨

```python
# å¯åŠ¨reacté¡¹ç›®
npm start

# å¯åŠ¨electron
npm run electron-start
```

ä»¥ä¸Šå†…å®¹å‚è€ƒè‡ª [https://juejin.im/post/5a6a91276fb9a01cbd58ce32](https://juejin.im/post/5a6a91276fb9a01cbd58ce32)

æ¬¢è¿å…³æ³¨æˆ‘è¿™ä¸ªå‰ç«¯å°èœçš„åšå®¢[ä¸€å¶æ€€æ²™](http://yyhuaisha.github.io/)

åç»­è¿˜ä¼šæ›´æ–°å…³äºæ‰“åŒ…çš„éƒ¨åˆ†ã€‚

## mengdu

å…¶å®å¯ä»¥ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼Œå°è£…ä¸€ä¸ªelectronæ¶å­ï¼Œç„¶åç›´æ¥è¯»httpçš„é¡µé¢å°±è¡Œï¼Œè¿™æ–¹ä¾¿æ›´æ–°
æ‰“ä¸ªå¹¿å‘Šï¼Œè¿™ä¸ªæ˜¯æˆ‘ä¹‹å‰åšçš„electronæ¶å­ [vue-electron-chrome](https://github.com/mengdu/vue-electron-chrome)
![](https://github.com/mengdu/vue-electron-chrome/raw/master/20171218164524.png)

## chenshuai2144

å¯ä»¥åœ¨ site å†™ä¸ªæ–‡ç« ï¼Œæ¶¦è‰²ä¹‹åå¯ä»¥å‘åˆ°ä¸»ç«™çš„

## pkaq

çœ‹æ¥å¤§å®¶éƒ½æœ‰è¿™ç§æƒ…ç»“å•Š doge
[http://pkaq.org/2018/02/09/electronbs/](http://pkaq.org/2018/02/09/electronbs/)

## yyhuaisha

[ä»antd-pro è¿ç§»åˆ° electronï¼ˆ2.æ‰“åŒ…ç¯‡ï¼‰](https://zhuanlan.zhihu.com/p/41103887)

## zhfish

markä¸€ä¸‹ï¼ŒæŒç»­å…³æ³¨

## heytheww

mark

## ShawLyon

> æœ€è¿‘å‡†å¤‡å°†antd proçš„é¡¹ç›®è¿ç§»åˆ° electronï¼Œæ‰¾äº†ä¸¤å¤©èµ„æ–™ç»ˆäºæœ‰ç‚¹å¤´ç»ªã€‚
> ä¸€ã€é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªå®Œæ•´çš„antd proçš„é¡¹ç›®ï¼Œç„¶åè¿›å…¥é¡¹ç›®ç›®å½•å®‰è£…ä¾èµ–
>
> ```python
> # å®‰è£…ä¾èµ–åŒ…å¹¶è¿è¡Œ
> npm install -save electron
> ```
>
> äºŒã€é…ç½® main.js
> é¡¹ç›®æ ¹ç›®å½•ä¸‹é¢æ–°å»º main.js æ–‡ä»¶
>
> ```python
> // å¼•å…¥electronå¹¶åˆ›å»ºä¸€ä¸ªBrowserwindow
> const { app, BrowserWindow } = require('electron');
> const path = require('path');
> const url = require('url');
>
> // ä¿æŒwindowå¯¹è±¡çš„å…¨å±€å¼•ç”¨,é¿å…JavaScriptå¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶,çª—å£è¢«è‡ªåŠ¨å…³é—­.
> let mainWindow;
>
> function createWindow() {
>   // åˆ›å»ºæµè§ˆå™¨çª—å£,å®½é«˜è‡ªå®šä¹‰å…·ä½“å¤§å°ä½ å¼€å¿ƒå°±å¥½
>   mainWindow = new BrowserWindow({ width: 800, height: 600 });
>
>   // åŠ è½½åº”ç”¨ electron-quick-startä¸­é»˜è®¤çš„åŠ è½½å…¥å£
>   // mainWindow.loadURL(
>   //   url.format({
>   //     pathname: path.join(__dirname, 'index.html'),
>   //     protocol: 'file:',
>   //     slashes: true,
>   //   })
>   // );
>
>   // åŠ è½½åº”ç”¨ é€‚ç”¨äº react é¡¹ç›®
>   mainWindow.loadURL('http://localhost:8000/');
>
>   // æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé»˜è®¤ä¸æ‰“å¼€
>   // mainWindow.webContents.openDevTools();
>
>   // å…³é—­windowæ—¶è§¦å‘ä¸‹åˆ—äº‹ä»¶.
>   mainWindow.on('closed', () => {
>     mainWindow = null;
>   });
> }
>
> // å½“ Electron å®Œæˆåˆå§‹åŒ–å¹¶å‡†å¤‡åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶è°ƒç”¨æ­¤æ–¹æ³•
> app.on('ready', createWindow);
>
> // æ‰€æœ‰çª—å£å…³é—­æ—¶é€€å‡ºåº”ç”¨.
> app.on('window-all-closed', () => {
>   // macOSä¸­é™¤éç”¨æˆ·æŒ‰ä¸‹ `Cmd + Q` æ˜¾å¼é€€å‡º,å¦åˆ™åº”ç”¨ä¸èœå•æ å§‹ç»ˆå¤„äºæ´»åŠ¨çŠ¶æ€.
>   if (process.platform !== 'darwin') {
>     app.quit();
>   }
> });
>
> app.on('activate', () => {
>   // macOSä¸­ç‚¹å‡»Dockå›¾æ ‡æ—¶æ²¡æœ‰å·²æ‰“å¼€çš„å…¶ä½™åº”ç”¨çª—å£æ—¶,åˆ™é€šå¸¸åœ¨åº”ç”¨ä¸­é‡å»ºä¸€ä¸ªçª—å£
>   if (mainWindow === null) {
>     createWindow();
>   }
> });
>
> // ä½ å¯ä»¥åœ¨è¿™ä¸ªè„šæœ¬ä¸­ç»­å†™æˆ–è€…ä½¿ç”¨requireå¼•å…¥ç‹¬ç«‹çš„jsæ–‡ä»¶.
> ```
>
> è¦æ³¨æ„â€œåŠ è½½åº”ç”¨â€è¿™é‡Œä½ çš„ç«¯å£å·è¦ä¸€è‡´ã€‚
>
> ä¸‰ã€é…ç½®ä½ çš„ package.json ï¼Œæ·»åŠ ä»¥ä¸‹é¡¹
>
> ```python
> {
>   "main": "main.js", // é…ç½®å¯åŠ¨æ–‡ä»¶
>   "dependencies": {
>     "electron": "^2.0.5"
>   },
>   "scripts": {
>     "electron-start": "electron ." // é…ç½®electronçš„startï¼ŒåŒºåˆ«äºwebç«¯çš„start
>   }
> }
> ```
>
> æ³¨æ„æ ¹æ®ä½ è‡ªå·±åŸæœ¬çš„é¡¹ç›®çš„åŸºç¡€ä¸Šæ¥é…ç½®ã€‚
>
> å››ã€è¿˜æœ‰é‡è¦çš„ä¸€ç‚¹éœ€è¦ä¿®æ”¹webpack
> åœ¨antd proæˆ‘ä¿®æ”¹çš„æ˜¯ .babelrc.jsï¼Œæ·»åŠ  target: 'electron-renderer'ã€‚
>
> ä»¥ä¸‹æ˜¯æˆ‘çš„ .babelrc.js é…ç½®
>
> ```python
> module.exports = {
>   target: 'electron-renderer',
>   plugins: [
>     [
>       'babel-plugin-module-resolver',
>       {
>         alias: {
>           components: './src/components',
>         },
>       },
>     ],
>   ],
> };
> ```
>
> æ³¨æ„æ ¹æ®ä½ è‡ªå·±åŸæœ¬çš„é¡¹ç›®çš„åŸºç¡€ä¸Šæ¥é…ç½®ã€‚
>
> äº”ã€å¯åŠ¨
>
> ```python
> # å¯åŠ¨reacté¡¹ç›®
> npm start
>
> # å¯åŠ¨electron
> npm run electron-start
> ```
>
> ä»¥ä¸Šå†…å®¹å‚è€ƒè‡ª https://juejin.im/post/5a6a91276fb9a01cbd58ce32
>
> æ¬¢è¿å…³æ³¨æˆ‘è¿™ä¸ªå‰ç«¯å°èœçš„åšå®¢[ä¸€å¶æ€€æ²™](http://yyhuaisha.github.io/)
>
> åç»­è¿˜ä¼šæ›´æ–°å…³äºæ‰“åŒ…çš„éƒ¨åˆ†ã€‚

webpack è¯·é—®é‚£æ®µé…ç½®æ˜¯å¹²å˜›çš„ã€‚æˆ‘æƒ³åœ¨antd Proé‡Œå¼•å…¥import â€˜electronâ€™ï¼Œä½†æ‰“å°å‡ºæ¥æ˜¯undefined

## spirobel

https://github.com/yaoleia/electron-umi-antd-pro
æˆ‘è¿˜æœ‰æ‰¾åˆ°è¿™ä¸ªhttps://github.com/BySlin/umi-plugin-electron-builder åˆšåœ¨è¯•è¯•

## WangJM001

åŸºäºUmiçš„Electronæ¡†æ¶ï¼Œä¸€è¡Œå‘½ä»¤(pnpm create poros)ç”ŸæˆElectronåº”ç”¨ï¼Œå¿«é€Ÿå¼€å‘ã€æ‰“åŒ…ï¼Œ é›†æˆäº†å„ç§åŠŸèƒ½ï¼Œæ–¹ä¾¿å¥½ç”¨ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸‹ï¼Œæ¬¢è¿Starï¼Œé¡¹ç›®è¿˜åœ¨ä¸æ–­è¿­ä»£ä¸­ã€‚
https://github.com/porosjs/poros
