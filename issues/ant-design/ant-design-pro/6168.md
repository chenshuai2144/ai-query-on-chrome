# ğŸ§[é—®é¢˜] å‡çº§åˆ° umi3 å¯¼å‡ºä½¿ç”¨ connect è¿è¡ŒæŠ¥é”™

`ğŸ•µğŸ»â€â™€ï¸ question`

### ğŸ§ é—®é¢˜æè¿°

å‡çº§åˆ° umi 3ä¹‹åï¼Œä» umi å¯¼å‡º connectï¼Œç”ŸæˆæˆåŠŸï¼Œè¿è¡Œæ—¶æŠ¥é”™
TypeError: Object(...) is not a function

### ğŸš‘ å…¶ä»–ä¿¡æ¯

![image](https://user-images.githubusercontent.com/32095100/77053659-a55ff280-6a09-11ea-9750-0a65d31f9da9.png)
![image](https://user-images.githubusercontent.com/32095100/77053716-b7da2c00-6a09-11ea-93aa-c0117ff51c49.png)
![image](https://user-images.githubusercontent.com/32095100/77053757-c6284800-6a09-11ea-8c60-3b99c0b0b85e.png)

## s464446877

è¯·é—®ä½ å‡çº§åˆ°umi3åä¿®æ”¹å›½é™…åŒ–çš„formatmessageäº†ä¹ˆ

## yunyouu

> è¯·é—®ä½ å‡çº§åˆ°umi3åä¿®æ”¹å›½é™…åŒ–çš„formatmessageäº†ä¹ˆ

æ²¡æœ‰å‘¢ï¼Œæ˜¯å¼•èµ·è¿™ä¸ªé—®é¢˜çš„åŸå› å˜›

## s464446877

> > è¯·é—®ä½ å‡çº§åˆ°umi3åä¿®æ”¹å›½é™…åŒ–çš„formatmessageäº†ä¹ˆ
>
> æ²¡æœ‰å‘¢ï¼Œæ˜¯å¼•èµ·è¿™ä¸ªé—®é¢˜çš„åŸå› å˜›

ä¸æ˜¯ï¼Œåªæ˜¯æˆ‘ç°åœ¨å‡çº§åˆ°umi3åå®˜æ–¹ä¸æ¨èä½¿ç”¨formatmessageï¼ŒæŒ‰ç…§å®˜æ–¹æ¨èçš„æ–¹å¼æœ‰å†™åœ°æ–¹è¿˜ä¸é€‚ç”¨ï¼Œä¸çŸ¥é“æ€ä¹ˆå¼„ï¼Œæƒ³äº¤æµä¸€ä¸‹

## chenshuai2144

@s464446877 é‚£äº›åœ°æ–¹ä¸é€‚ç”¨ï¼Ÿ

## chenshuai2144

@yanglwr æ˜¯ä¸æ˜¯ dva æ’ä»¶æ²¡æœ‰é…ç½®ï¼Ÿ

## ZhengHuang-20

> @yanglwr æ˜¯ä¸æ˜¯ dva æ’ä»¶æ²¡æœ‰é…ç½®ï¼Ÿ

ä½ å¥½è¿™ä¸ªæ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿ æˆ‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜
import { queryAuthList } from '@/services/auth';
import React, { useEffect } from 'react';
import { connect } from 'umi';
import type { ConnectState } from '@/models/connect';

export type AuthProps = {
authName: string,
showWaring?: boolean,
children: React.ReactElement<AuthProps>[],
authList: []
}
const AuthComponent: React.FC<AuthProps> = (props) => {
const { authName, showWaring, children, authList } = props;

const getChildren = () => {
return queryAuthList().then((authList) => {
const isDenied = !authList[authName];
if (isDenied) {
if (showWaring) {
return <div className="auth_ctrl" >å½“å‰ç”¨æˆ·æ²¡æœ‰è®¿é—®æƒé™ï¼Œè¯·è”ç³»ç®¡ç†å‘˜å¼€é€šæƒé™ï¼</div>;
}
return null;
} else {
React.Children.forEach(children, (child: React.ReactElement<AuthProps>): void => {
console.log(child);
})
}
});

}

return <div></div>;

};

export default connect(({ global }: ConnectState) => ({
authList: global.authList
}))(AuthComponent);

æŠ¥é”™ï¼š
TypeError: Object(...) is not a function

## jackchoumine

æŠ¥é”™ï¼Œæ²¡æ‰¾åˆ°è§£å†³åŠæ³•ã€‚

## jackchoumine

> ### é—®é¢˜æè¿°
>
> å‡çº§åˆ° umi 3 ä¹‹åï¼Œä» umi å¯¼å‡º connectï¼Œç”ŸæˆæˆåŠŸï¼Œè¿è¡Œæ—¶æŠ¥é”™
> TypeError: Object(...) is not a function
>
> ### å…¶ä»–ä¿¡æ¯
>
> ![image](https://user-images.githubusercontent.com/32095100/77053659-a55ff280-6a09-11ea-9750-0a65d31f9da9.png) > ![image](https://user-images.githubusercontent.com/32095100/77053716-b7da2c00-6a09-11ea-93aa-c0117ff51c49.png) > ![image](https://user-images.githubusercontent.com/32095100/77053757-c6284800-6a09-11ea-8c60-3b99c0b0b85e.png)

è¯·é—®è§£å†³äº†å— ï¼Ÿ å¦‚ä½•è§£å†³çš„å‘¢ï¼Ÿ

## chenshuai2144

æ‰“å¼€ä¸€ä¸‹dvaï¼Œå¹¶ä¸”å†™ä¸ªmodelã€‚

é»˜è®¤æ˜¯å…³é—­çš„

## dingyl666

è¯·é—®è§£å†³äº†å—ï¼Œæˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜äº†
