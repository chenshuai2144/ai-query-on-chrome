# ğŸ›[BUG] èœå•çš„é«˜çº§ç”¨æ³•ä¸­ä½¿ç”¨layoutActionRef æŠ¥é”™

### ğŸ› bug æè¿°

åœ¨app.tsxä¸­åŠ å…¥export const layoutActionRef = createRef<{ reload: () => void }>();ä¼šæŠ¥é”™

### ğŸ“· å¤ç°æ­¥éª¤

![image](https://user-images.githubusercontent.com/38587734/117434881-c7933780-af5f-11eb-8dfb-a0f1628fac22.png)

<!--
æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜
-->

### ğŸ æœŸæœ›ç»“æœ

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
-->

### ğŸ’» å¤ç°ä»£ç 

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
-->

### Â© ç‰ˆæœ¬ä¿¡æ¯

- Ant Design Pro ç‰ˆæœ¬: 5.0.0-beta.2
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

app.tsx å¥½åƒä¸èƒ½éšä¾¿ export

## qq329401134

> app.tsx å¥½åƒä¸èƒ½éšä¾¿ export

æ–‡æ¡£ä¸Šæ˜¯é‚£æ ·ç”¨çš„ï¼Œæ­£ç¡®çš„æ–¹æ³•åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Œè€Œä¸”æˆ‘å‘ç°layout->menu çš„requestä¸­å¦‚æœè¿”å›æ•°ç»„ï¼Œç™»å½•æˆåŠŸåä¼šè°ƒç”¨ä¸€æ¬¡requestï¼Œå¦‚æœè¿”å›ä¸€ä¸ªpromiseçš„è¯ç™»å½•æˆåŠŸåä¸ä¼šè°ƒç”¨requestï¼Œåœ¨requestä¸­æ‰“å°çš„initialStateçš„currentUserä¸€ç›´æ˜¯undefinedé™¤éåˆ·æ–°é¡µé¢

## chenshuai2144

@qq329401134 params è®¾ç½®ä¸€ä¸‹ï¼Œparams ä¿®æ”¹å°±ä¼šè§¦å‘request

`params={initialState}` ä½ å¯ä»¥è¿™æ ·è®¾ç½®ä¸€ä¸‹

## chenshuai2144

å¯ä»¥æ›´æ–°ä¾èµ–è¯•è¯•äº†

## qq329401134

> å¯ä»¥æ›´æ–°ä¾èµ–è¯•è¯•äº†

æˆ‘æ–°å¼€äº†ä¸€ä¸ªæ›´è¯¦ç»†çš„ åŠ³çƒ¦çœ‹ä¸€ä¸‹

## againF

umi4é‡Œé¢å‡ºç°äº†åŒæ ·çš„é—®é¢˜

## Fluox-Etine

> ###

è¿™æ ·è®¾ç½®æœ‰é—®é¢˜ params={initialState} ç™»å½•åé‡å¤è¯·æ±‚ï¼›è¯·æ±‚äº†2æ¬¡ã€‚ æ— è®º params={initialState} è¿˜æ˜¯ initialState?.currentUser?.user_id, è¿™æ ·è®¾ç½®ï¼›é€€å‡ºçš„æ—¶å€™ä¼šåœ¨ä¸€æ¬¡è¯·æ±‚è·¯ç”±æ¥å£ã€‚è¯·é—®è¿™æ ·å¦‚ä½•è§£å†³å‘¢
