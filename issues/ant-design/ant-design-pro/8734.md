# ğŸ›[BUG] æäº¤åˆ°è‡ªå·±çš„giteeå’Œgithubå‰åšprecommitï¼Œ fabric verify-commitè¿‡ä¸å»ã€‚

### ğŸ› bug æè¿°

æäº¤åˆ°è‡ªå·±çš„giteeå’Œgithubå‰åšprecommitï¼Œ fabric verify-commitè¿‡ä¸å»ã€‚

### ğŸ“· å¤ç°æ­¥éª¤

![image](https://user-images.githubusercontent.com/18542211/125550844-7ba25cd7-671e-4e78-8e6f-c8806a2ce096.png)

### ğŸ æœŸæœ›ç»“æœ

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
-->

### ğŸ’» å¤ç°ä»£ç 

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
-->

### Â© ç‰ˆæœ¬ä¿¡æ¯

- Ant Design Pro ç‰ˆæœ¬: [e.g. 4.0.0]
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## kaoding

windows ä¸Šã€‚

## chenshuai2144

æŒ‰ç…§è§„èŒƒæ¥å†™ commitï¼Ÿ

## kaoding

æ˜¯æŒ‰ç…§è§„èŒƒæ¥çš„ï¼ˆæˆ‘åœ¨windowsä¸Šï¼‰ï¼Œä¿®æ”¹ä»»åŠ¡ä¸œè¥¿éƒ½commitä¸äº†ã€‚åœ¨commitæ—¶ï¼ŒåŠ ä¸Š--no-verify å°±å¯ä»¥çš„ã€‚

## chenshuai2144

ä½ æ¥ä¸ªå½•å±è¯•è¯•ï¼Œæˆ‘è¿˜æ²¡ç¢°è¿‡å…¼å®¹æ€§é—®é¢˜

## kaoding

1ã€ä» github ä¸Š clone ä¸‹æ¥
2ã€yarn (ä¸åšè¿™æ­¥ï¼Œcommit æ²¡æœ‰é—®é¢˜ï¼‰
3ã€éšä¾¿ä¿®æ”¹ä¸€ä¸ªåœ°æ–¹
4ã€å† commit å°±å‡ºç°ä¸Šé¢é—®é¢˜

## kaoding

@chenshuai2144 è¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿ

## chenshuai2144

commit ç¬¦åˆè§„èŒƒäº†å—ï¼Ÿ

## kaoding

> commit ç¬¦åˆè§„èŒƒäº†å—ï¼Ÿ

ä¸æ˜¯ commit è§„èŒƒé—®é¢˜ï¼Œæˆ‘å°±æ”¹ä¸€ç‚¹ä¸œè¥¿ï¼ˆå¦‚ä¸‹å›¾åŠ ç‚¹æ³¨é‡Šï¼‰éƒ½ä¸èƒ½ commit é€šè¿‡
![image](https://user-images.githubusercontent.com/18542211/126266484-6e3bedeb-38c7-477a-91ab-9da27b526498.png)

å‡ºç°è¿™ç§é”™è¯¯ï¼ˆæˆ‘æ˜¯æ‰¾äº†ä¸€å°å…¨æ–°widowsç”µè„‘è¿›è¡Œæµ‹è¯•çš„ï¼‰

![image](https://user-images.githubusercontent.com/18542211/126266631-d355176c-d8ee-44bb-9a24-1b9b545d0445.png)

## chenshuai2144

å¥‡æ€ªäº†æˆ‘ä¹Ÿæ˜¯windowsï¼Œéš¾é“æ˜¯å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘æ˜¯ç”¨çš„æ­£åˆ™åŒ¹é…åº”è¯¥node ç‰ˆæœ¬ä¸€è‡´å°±æ²¡ä»€ä¹ˆé—®é¢˜

## kaoding

åŸå› æ‰¾åˆ°äº†ï¼Œæ˜¯åœ¨å‘å¸ƒ v5 ç‰ˆæœ¬æ—¶ï¼Œåœ¨ package.json æ–‡ä»¶æœ€åæ·»åŠ äº†
"gitHooks": {
"commit-msg": "fabric verify-commit"
}
å¯¼è‡´ commit ä¸äº†ã€‚
@chenshuai2144

## kaoding

è¦ä¸å…ˆç§»å»è¿™ä¸ªã€‚

## chenshuai2144

ä¸è¦å‘€ï¼Œfabric verify-commit æ˜¯ä¸ºäº†å¢åŠ æäº¤å‰éªŒè¯ï¼ŒéªŒè¯ commit çš„åˆç†æ€§ï¼Œä½ åˆ æ‰äº†åŠŸèƒ½ä¸å°±æ²¡äº†
å…„å¼Ÿä½ ä¸è¦ä¹±æå‘€

## cyqhhj

æˆ‘ä»Šå¤©ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼Œå°±å¾ˆå¥‡æ€ª

## cyqhhj

@kaoding æ€ä¹ˆè§£å†³çš„ï¼Ÿ

## kaoding

> @kaoding æ€ä¹ˆè§£å†³çš„ï¼Ÿ

æ‹¿æ‰ package.json å†…çš„

```
  "gitHooks": {
    "commit-msg": "fabric verify-commit"
  }
```

## chenshuai2144

æäº¤çš„æ—¶å€™æ²¡è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¦ä¸“é—¨å¤„ç†äº†

## sunguoxing0628

1. æ–‡ä»¶å†…å®¹

```// https://umijs.org/config/
import { defineConfig } from 'umi';
import { join } from 'path';

import defaultSettings from './defaultSettings';
import proxy from './proxy';
import routes from './routes';

const { REACT_APP_ENV } = process.env;

export default defineConfig({
  devServer: {
    port: 8091,
  },
  hash: true,
  antd: {},
  dva: {
    hmr: true,
  },
  layout: {
    // https://umijs.org/zh-CN/plugins/plugin-layout
    locale: true,
    siderWidth: 208,
    ...defaultSettings,
  },
  // https://umijs.org/zh-CN/plugins/plugin-locale
  locale: {
    // default zh-CN
    default: 'zh-CN',
    antd: true,
    // default true, when it is true, will use `navigator.language` overwrite default
    baseNavigator: true,
  },
  dynamicImport: {
    loading: '@ant-design/pro-layout/es/PageLoading',
  },
  targets: {
    ie: 11,
  },
  // umi routes: https://umijs.org/docs/routing
  routes,
  // Theme for antd: https://ant.design/docs/react/customize-theme-cn
  theme: {
    'primary-color': defaultSettings.primaryColor,
  },
  // esbuild is father build tools
  // https://umijs.org/plugins/plugin-esbuild
  esbuild: {},
  title: false,
  ignoreMomentLocale: true,
  proxy: proxy[REACT_APP_ENV || 'dev'],
  manifest: {
    basePath: '/',
  },
  // Fast Refresh çƒ­æ›´æ–°
  fastRefresh: {},
  openAPI: [
    {
      requestLibPath: "import { request } from 'umi'",
      // æˆ–è€…ä½¿ç”¨åœ¨çº¿çš„ç‰ˆæœ¬
      // schemaPath: "https://gw.alipayobjects.com/os/antfincdn/M%24jrzTTYJN/oneapi.json"
      schemaPath: join(__dirname, 'oneapi.json'),
      mock: false,
    },
    {
      requestLibPath: "import { request } from 'umi'",
      schemaPath: 'https://gw.alipayobjects.com/os/antfincdn/CA1dOm%2631B/openapi.json',
      projectName: 'swagger',
    },
  ],
  nodeModulesTransform: { type: 'none' },
  mfsu: {},
  webpack5: {},
  exportStatic: {},
});
```

2. é”™è¯¯ä¿¡æ¯

```> running commit-msg hook: fabric verify-commit
   ERROR  invalid commit message format.
  Proper commit message format is required for automated changelog generation. Examples:
    ğŸ’¥ feat(compiler): add 'comments' option
    ğŸ› fix(compiler): fix some bug
    ğŸ“ docs(compiler): add some docs
    ğŸŒ· UI(compiler): better styles
    ğŸ° chore(compiler): Made some changes to the scaffolding
    ğŸŒ locale(compiler): Made a small contribution to internationalization
    See .github/commit-convention.md for more details.
commit-msg hook failed (add --no-verify to bypass)
```

@chenshuai2144 å¯¹äºä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ï¼Œæˆ‘åªå¢åŠ äº†ä¸‹é¢çš„ä¸€ä¸ªå‚æ•°ï¼Œå°±æŠ¥é”™äº†ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰æ‰¾åˆ°`.github/commit-convention.md`è¿™ä¸ªæ–‡ä»¶åœ¨å“ªé‡Œï¼Œç›®å‰åªæœ‰æ‹¿æ‰`gitHooks`æ‰èƒ½æäº¤ï¼Œä¸çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆé—®é¢˜ã€‚

```
devServer: {
    port: 8091,
  },
```

## chenshuai2144

æŒ‰ç…§è§„èŒƒå†™ commitï¼Œè¿™ä¸ªæŠ¥é”™æ˜¯commit æœ‰é—®é¢˜ä¸æ˜¯ä½ çš„ä»£ç æœ‰é—®é¢˜

## sunguoxing0628

> æŒ‰ç…§è§„èŒƒå†™commitï¼Œè¿™ä¸ªæŠ¥é”™æ˜¯commit æœ‰é—®é¢˜ä¸æ˜¯ä½ çš„ä»£ç æœ‰é—®é¢˜

@chenshuai2144 å¥½çš„ï¼Œæ˜¯æˆ‘æ²¡æ³¨æ„æç¤ºä¿¡æ¯ï¼Œ`commit message `åº”è¯¥æ»¡è¶³æŒ‡å®šæ ¼å¼ï¼Œå¦‚`message`å†™åš`fix: fix some  bug`ï¼Œè¿™æ ·æˆ‘å°±æäº¤æˆåŠŸäº†ã€‚

@kaoding @cyqhhj @yinzixie ä½ ä»¬å¯ä»¥è¿™ä¹ˆè¯•ä¸€ä¸‹ã€‚

## kaoding

ä¸æ˜¯è¿™ä¸ªåŸå› ï¼Œæˆ‘éƒ½è¯•è¿‡äº†ï¼ˆæˆ‘å°±æ–°æ‹‰ä¸€ä¸ªantd pro æ–°åº“ä¸‹æ¥ï¼Œæ”¹å‡ ä¸ªå­—ï¼Œå°±æäº¤ä¸åˆ°è‡ªå·±çš„åº“ä¸­ï¼‰ï¼Œå°±æ˜¯æŠ¥ï¼Œ

```
"gitHooks": {
    "commit-msg": "fabric verify-commit"
    }
```

è¿‡ä¸å»ï¼Œæš‚æ—¶å»æ‰è¿™ä¸ªã€‚

## sunguoxing0628

> ä¸æ˜¯è¿™ä¸ªåŸå› ï¼Œæˆ‘éƒ½è¯•è¿‡äº†ï¼ˆæˆ‘å°±æ–°æ‹‰ä¸€ä¸ªantd pro æ–°åº“ä¸‹æ¥ï¼Œæ”¹å‡ ä¸ªå­—ï¼Œå°±æäº¤ä¸åˆ°è‡ªå·±çš„åº“ä¸­ï¼‰ï¼Œå°±æ˜¯æŠ¥ï¼Œ
>
> ```
> "gitHooks": {
>     "commit-msg": "fabric verify-commit"
>     }
> ```
>
> è¿‡ä¸å»ï¼Œæš‚æ—¶å»æ‰è¿™ä¸ªã€‚

@kaoding æŒ‰ç…§æç¤ºä¿¡æ¯æ¥çœ‹ï¼Œåªæ˜¯`message`æ ¼å¼çš„é—®é¢˜ï¼Œå¯ä»¥æ³¨æ„ä¸€ä¸‹é‚£ä¸ªå†’å·ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ²¡æ³¨æ„ç”¨çš„ä¸­æ–‡å†’å·ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå®åœ¨ä¸è¡Œï¼Œé‚£å°±åªèƒ½æŒ‰ç…§ä½ è¯´çš„æ¥äº†ã€‚

## chenjiaxin11

@chenshuai2144 è¯·é—®è¿™ä¸ªcommitæ ¡éªŒè§„åˆ™å¯ä»¥è‡ªè¡Œé…ç½®å—ï¼Ÿ

## SugarTiger

å¤§å…„å¼Ÿï¼Œå°±æ˜¯ä½ çš„commit-msg æ ¼å¼ä¸å¯¹ï¼Œæ‰€ä»¥æŠ¥é”™äº†ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªåœ°å€ https://learnku.com/docs/antd-pro/5/commit-msg/11203#472210
æ³¨æ„commit-msgé‡Œé¢çš„å†’å·ï¼šå’Œæè¿°ä¹‹é—´ï¼Œä¸€å®šè¦æœ‰ä¸ªç©ºæ ¼ï¼Œä¸å¦‚éƒ½ä¼šæç¤ºæ ¼å¼ä¸æ­£ç¡®ã€‚
ä¾‹å¦‚ï¼š
é”™è¯¯çš„ï¼šfeat:add BASE_API_URL
æ­£ç¡®çš„ï¼šfeat: add BASE_API_URL

## mansion-sun

åŸæ¥æ˜¯ç©ºæ ¼é—®é¢˜ï¼Œæ„Ÿè§‰è¿™ä¸ªç©ºæ ¼æ²¡å¿…è¦ï¼Œæˆ‘è¯•äº†å¾ˆå¤šæ¬¡ï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯æ¨¡å—åæˆ–ä»£ç é—®é¢˜ï¼Œå†’å·ä¸­è‹±æ–‡ä¹Ÿè¯•è¿‡äº†ï¼Œè°èƒ½æƒ³çš„æœ‰ç©ºæ ¼å•Šï¼Œå¤§ä½¬è¿™ä¸ªè§„åˆ™ç€å®æœ‰ç‚¹å‘ï¼Œä¹‹å‰å…¬å¸é…ç½®çš„è§„åˆ™æ²¡æœ‰æ¸‰åŠç©ºæ ¼çš„ï¼ @chenshuai2144

## jonny-xhl

æœ‰æ²¡æœ‰é‡åˆ°è¿‡merge branchçš„default messageä¹Ÿä¼šé€šä¸è¿‡ã€‚

é€šè¿‡vscodeåˆå¹¶åˆ†æ”¯çš„é»˜è®¤messageä¹Ÿä¼šå¯¼è‡´åˆå¹¶å¤±è´¥ã€‚

E.g

```
Merge branch 'feature/demo' into development
```

## yangrenmu

![image](https://user-images.githubusercontent.com/18193168/170934169-6334bd41-08e8-47af-8f6b-2ebc6d1e7e8d.png)
è¿™æ„æ€æ˜¯ï¼Œmerge çš„ä¿¡æ¯ï¼Œéƒ½è¿‡ä¸äº†ä¹ˆï¼Ÿ

## chenshuai2144

merge æä¸ª -n å°±èƒ½è¿‡å»äº†

## LegionMrG

> æŒ‰ç…§è§„èŒƒå†™ commitï¼Œè¿™ä¸ªæŠ¥é”™æ˜¯commit æœ‰é—®é¢˜ä¸æ˜¯ä½ çš„ä»£ç æœ‰é—®é¢˜

æˆ‘çŸ¥é“æ˜¯commitæœ‰é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘å¡«â€œstyle: prettieræ ¼å¼è°ƒæ•´â€æäº¤å°±æŠ¥é”™ï¼Œä½†æ˜¯å¡«â€œUI: prettieræ ¼å¼è°ƒæ•´â€å°±å¯ä»¥ã€‚æŠ¥é”™ä¿¡æ¯è¯´â€œSee .github/commit-convention.md for more details.â€ä½†æ˜¯æ‰¾ä¸€åœˆæ²¡æ‰¾åˆ°è¿™ä¸ªmdåœ¨å“ªï¼Œå¤§ä½¬ç»™ä¸ªåœ°å€ï¼Ÿ

## LegionMrG

> ![image](https://user-images.githubusercontent.com/18193168/170934169-6334bd41-08e8-47af-8f6b-2ebc6d1e7e8d.png) è¿™æ„æ€æ˜¯ï¼Œmerge çš„ä¿¡æ¯ï¼Œéƒ½è¿‡ä¸äº†ä¹ˆï¼Ÿ

å…„å¼Ÿè¿™å›¾å“ªæ¥çš„ï¼Ÿ

## Topppy

> > ![image](https://user-images.githubusercontent.com/18193168/170934169-6334bd41-08e8-47af-8f6b-2ebc6d1e7e8d.png) è¿™æ„æ€æ˜¯ï¼Œmerge çš„ä¿¡æ¯ï¼Œéƒ½è¿‡ä¸äº†ä¹ˆï¼Ÿ
>
> å…„å¼Ÿè¿™å›¾å“ªæ¥çš„ï¼Ÿ

https://regexper.com/
