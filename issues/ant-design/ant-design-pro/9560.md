# 🐛[BUG]ant design pro v5 约定式路由后左侧菜单栏在登录页面会显示出来

![image](https://user-images.githubusercontent.com/35474637/150486224-5c129380-918f-4cb9-8db8-62008cfc889b.png)

## JennyLeung030

你應該是忘了routes設定了
![image](https://user-images.githubusercontent.com/51438629/150487030-20be6531-fd5d-4ea8-bf78-26ba99c8bb2f.png)

## WhiteTheIce

> 你应该是通知路线设置了 ![图片](https://user-images.githubusercontent.com/51438629/150487030-20be6531-fd5d-4ea8-bf78-26ba99c8bb2f.png)

约定式路由是没法控制登录路由的配置

## WhiteTheIce

> 你应该是通知路线设置了 ![图片](https://user-images.githubusercontent.com/51438629/150487030-20be6531-fd5d-4ea8-bf78-26ba99c8bb2f.png)
> ![image](https://user-images.githubusercontent.com/35474637/150487369-e79a610b-7d86-4b16-90ce-9c49b402f6af.png)

## WhiteTheIce

> 你應該是忘了routes設定了 ![image](https://user-images.githubusercontent.com/51438629/150487030-20be6531-fd5d-4ea8-bf78-26ba99c8bb2f.png)

大神有木有解决方案啊？急需请求帮助！！！

## JennyLeung030

你可以發一下你route關於login page截圖來看看嗎?

## WhiteTheIce

> 你可以發一下你route關於login page截圖來看看嗎?

![image](https://user-images.githubusercontent.com/35474637/150491096-7ad7f0bc-692b-43b2-8ed7-257a6d7aeb6f.png)
![image](https://user-images.githubusercontent.com/35474637/150491159-4c80d048-4856-45a9-9759-b3c6a7c6cc8b.png)

## WhiteTheIce

> 你可以發一下你route關於login page截圖來看看嗎?

路由完全是约定式的由后端请求控制

## JennyLeung030

> > 你可以發一下你route關於login page截圖來看看嗎?
>
> 路由完全是约定式的由后端请求控制

的確是可以用後端控制

## WhiteTheIce

> > > 你可以發一下你route關於login page截圖來看看嗎?
> >
> > 路由完全是约定式的由后端请求控制
>
> 的確是可以用後端控制

后端控制的结果就是改为约定式路由然后就出现了登录页的layout控制不了出现了上图所出现的问题

## JennyLeung030

> > > > 你可以發一下你route關於login page截圖來看看嗎?
> > >
> > > 路由完全是约定式的由后端请求控制
> >
> > 的確是可以用後端控制
>
> 后端控制的结果就是改为约定式路由然后就出现了登录页的layout控制不了出现了上图所出现的问题

因為我不是用後端控制,我是利用前端routes控制, 所以在後端那要加上控制login界面不可以套用現有的layout

## JennyLeung030

在ant design pro 5.0.0 的使用例子中, 它是有把login父親那一層的layout關掉的

## JennyLeung030

你可以在app.jsx中看見它有用那一些組件

## JennyLeung030

> 你可以在app.jsx中看見它有用那一些組件

這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content

## WhiteTheIce

> > > > > 你可以發一下你route關於login page截圖來看看嗎?
> > > >
> > > > 路由完全是约定式的由后端请求控制
> > >
> > > 的確是可以用後端控制
> >
> > 后端控制的结果就是改为约定式路由然后就出现了登录页的layout控制不了出现了上图所出现的问题
>
> 因為我不是用後端控制,我是利用前端routes控制, 所以在後端那要加上控制login界面不可以套用現有的layout

后端请求只有登录以后才会去请求路由去所以还是有这问题

> > 你可以在app.jsx中看見它有用那一些組件
>
> 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content

v5没法在app.jsx控制layout

## WhiteTheIce

> > 你可以在app.jsx中看見它有用那一些組件
>
> 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content

他是由umi动态生成的layout
![image](https://user-images.githubusercontent.com/35474637/150494287-f44b7990-275d-4721-a36f-a054a368ed74.png)

## WhiteTheIce

> > 你可以在app.jsx中看見它有用那一些組件
>
> 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content

所以只能在路由上控制，但是约定式路由必须把config中的routes注释掉才生效所以导致了没法控制login的路由

## JennyLeung030

> > > 你可以在app.jsx中看見它有用那一些組件
> >
> > 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content
>
> 所以只能在路由上控制，但是约定式路由必须把config中的routes注释掉才生效所以导致了没法控制login的路由

對丫, 所以我才說你要後端那要加上控制login界面不可以套用現有的layout

## WhiteTheIce

> > > > 你可以在app.jsx中看見它有用那一些組件
> > >
> > > 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content
> >
> > 所以只能在路由上控制，但是约定式路由必须把config中的routes注释掉才生效所以导致了没法控制login的路由
>
> 對丫, 所以我才說你要後端那要加上控制login界面不可以套用現有的layout

在没登录以前都没法获取到menu所以在后端加入了也没用因为根本控制不到

## WhiteTheIce

我已经试过了

## JennyLeung030

> > > > > 你可以在app.jsx中看見它有用那一些組件
> > > >
> > > > 這一頁的組件是給所有頁面應用,你需要route裏面的不想應用的頁面都關掉,你才看不見左側菜單和上面的Right content
> > >
> > > 所以只能在路由上控制，但是约定式路由必须把config中的routes注释掉才生效所以导致了没法控制login的路由
> >
> > 對丫, 所以我才說你要後端那要加上控制login界面不可以套用現有的layout
>
> 在没登录以前都没法获取到menu所以在后端加入了也没用因为根本控制不到

不對丫, 你要先弄一個API專給不登錄的人用丫

## JennyLeung030

你要拋棄那些孤兒嗎? QAQ

## WhiteTheIce

> 我也试过单独传手动在app.jsx里面固定写死一个login的配置路由在没登录以前用但是也没用，因为我改成了约定式路由就由umi自己生成了

## JennyLeung030

有些頁面不用登錄用的丫, 例如: login, forgot password and activation acount

## JennyLeung030

>

可能你要轉回自己寫的route了

## WhiteTheIce

umi又没法修改控制感觉这就是一个约定式路由的bug

## JennyLeung030

> umi又没法修改控制感觉这就是一个约定式路由的bug

其實不算bug, 因為後端的api是否一定要登錄才能連是可以設定的

## JennyLeung030

因為我上司有給我的API, 有幾個API是不需要登錄的

## WhiteTheIce

感觉就约定式路由的一个bug，因为改为约定式的路由后login的权限没法控制了

## JennyLeung030

> 感觉就约定式路由的一个bug，因为改为约定式的路由后login的权限没法控制了

login本來就不用權限去控制, 按到理說你要先登錄之後才知你有甚麽權限能看甚麽東西
