# 保存至initialState的defaultSettings.ts配置里的title信息在返回登陆页后丢失

### 🐛 bug 描述

试图将defaultSettings.ts中的title信息作为登陆页的标题，通过initialState去获取，初次取值正常，登陆后再返回登陆页面，title属性直接丢失了

<!--
详细地描述 bug，让大家都能理解
-->

> 使用了create-umi创建的simple模板项目，默认是将defaultSettings.ts的配置在app.tsx中通过getInitialState保存起来了，然后就在登陆页打印：`initialState?.settings?.title`

### 📷 复现步骤

1. 初始进入登陆页，看到控制台打印`Ant Design Pro`
2. 登陆成功跳转至主页后在点击浏览器回退返回至登陆页，看到控制台打印`initialState?.settings?.title`的结果是`undifined`
3. 打印`initialState?.settings`再重复操作，发现返回登录页后里面的属性只少了title
<!--
清晰描述复现步骤，让别人也能看到问题
-->

### 🏞 期望结果

title应该正常获取

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

![image](https://user-images.githubusercontent.com/60975123/164585162-913413af-6d99-4e4b-bf39-4bd0c7e86f51.png)

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

![image](https://user-images.githubusercontent.com/60975123/164585454-530e4802-e326-446b-a62a-ac58e23f8909.png)

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

这个是异步的，你在useEffect 里面配置吧

## BaoXianSheng

页面切换，title就丢失了，navTheme 不会丢失，这里面的title是做了什么操作嘛
`  if (ignorePaths.findIndex((item) => item === history.location.pathname) === -1) {
    currentUser = await fetchUserInfo();
    const settings = defaultSettings as Partial<LayoutSettings>;
    settings.title = currentUser!.organization.name;
    settings.navTheme = 'realDark';
    return {
      fetchUserInfo,
      settings,
      storeInitialState,
      currentUser,
    };
  }`
