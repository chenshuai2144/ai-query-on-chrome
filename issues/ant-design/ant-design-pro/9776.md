# ä¿å­˜è‡³initialStateçš„defaultSettings.tsé…ç½®é‡Œçš„titleä¿¡æ¯åœ¨è¿”å›ç™»é™†é¡µåä¸¢å¤±

### ğŸ› bug æè¿°

è¯•å›¾å°†defaultSettings.tsä¸­çš„titleä¿¡æ¯ä½œä¸ºç™»é™†é¡µçš„æ ‡é¢˜ï¼Œé€šè¿‡initialStateå»è·å–ï¼Œåˆæ¬¡å–å€¼æ­£å¸¸ï¼Œç™»é™†åå†è¿”å›ç™»é™†é¡µé¢ï¼Œtitleå±æ€§ç›´æ¥ä¸¢å¤±äº†

<!--
è¯¦ç»†åœ°æè¿° bugï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

> ä½¿ç”¨äº†create-umiåˆ›å»ºçš„simpleæ¨¡æ¿é¡¹ç›®ï¼Œé»˜è®¤æ˜¯å°†defaultSettings.tsçš„é…ç½®åœ¨app.tsxä¸­é€šè¿‡getInitialStateä¿å­˜èµ·æ¥äº†ï¼Œç„¶åå°±åœ¨ç™»é™†é¡µæ‰“å°ï¼š`initialState?.settings?.title`

### ğŸ“· å¤ç°æ­¥éª¤

1. åˆå§‹è¿›å…¥ç™»é™†é¡µï¼Œçœ‹åˆ°æ§åˆ¶å°æ‰“å°`Ant Design Pro`
2. ç™»é™†æˆåŠŸè·³è½¬è‡³ä¸»é¡µååœ¨ç‚¹å‡»æµè§ˆå™¨å›é€€è¿”å›è‡³ç™»é™†é¡µï¼Œçœ‹åˆ°æ§åˆ¶å°æ‰“å°`initialState?.settings?.title`çš„ç»“æœæ˜¯`undifined`
3. æ‰“å°`initialState?.settings`å†é‡å¤æ“ä½œï¼Œå‘ç°è¿”å›ç™»å½•é¡µåé‡Œé¢çš„å±æ€§åªå°‘äº†title
<!--
æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜
-->

### ğŸ æœŸæœ›ç»“æœ

titleåº”è¯¥æ­£å¸¸è·å–

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
-->

### ğŸ’» å¤ç°ä»£ç 

![image](https://user-images.githubusercontent.com/60975123/164585162-913413af-6d99-4e4b-bf39-4bd0c7e86f51.png)

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
-->

### Â© ç‰ˆæœ¬ä¿¡æ¯

![image](https://user-images.githubusercontent.com/60975123/164585454-530e4802-e326-446b-a62a-ac58e23f8909.png)

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

è¿™ä¸ªæ˜¯å¼‚æ­¥çš„ï¼Œä½ åœ¨useEffect é‡Œé¢é…ç½®å§

## BaoXianSheng

é¡µé¢åˆ‡æ¢ï¼Œtitleå°±ä¸¢å¤±äº†ï¼ŒnavTheme ä¸ä¼šä¸¢å¤±ï¼Œè¿™é‡Œé¢çš„titleæ˜¯åšäº†ä»€ä¹ˆæ“ä½œå˜›
`  if (ignorePaths.findIndex((item) => item === history.location.pathname) === -1) {
    currentUser = await fetchUserInfo();
    const settings = defaultSettings as Partial<LayoutSettings>;
    settings.title = currentUser!.organization.name;
    settings.navTheme = 'realDark';
    return {
      fetchUserInfo,
      settings,
      storeInitialState,
      currentUser,
    };
  }`
