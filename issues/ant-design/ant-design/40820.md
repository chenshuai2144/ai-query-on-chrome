# [Form]async-validator使用debounce验证会触发异常

`🤔 Need Reproduce`,`unconfirmed`

### Reproduction link

[https://stackblitz.com/edit/react-ts-zvgdue?file=App.tsx](https://stackblitz.com/edit/react-ts-zvgdue?file=App.tsx)

### Steps to reproduce

1. 点击验证，两个表单项中，防抖表单项未触发非空验证
2. 在第二个表单项输入字符，validator验证未更新（可对照表单项一输入随机字符的情况，error错误信息会在每次输入完闪动）

### What is expected?

1. 点击验证，两个表单项，均触发非空校验
2. 两个表单项，在输入字符的时候，错误提示信息会刷新

### What is actually happening?

1. 防抖表单项点击验证时未触发非空验证
2. 防抖表单项在input框输入内容时未触发更新

| Environment | Info           |
| ----------- | -------------- |
| antd        | 4.24.7         |
| React       | 18.2.0         |
| System      | win 11         |
| Browser     | 110.0.5481.104 |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

你的重现没保存，打开是空的。
<img width="336" alt="截屏2023-02-20 16 47 17" src="https://user-images.githubusercontent.com/5378891/220056645-8a819501-ae1b-420d-a4e2-b3178b5f1ab4.png">

## TaurusWood

@zombieJ 好了，现在可以打开了

## zombieJ

lodash 的 debounce 不会返回你原来的 promise。可以用 callback，这样就不依赖返回值了：
https://stackblitz.com/edit/react-ts-ltdphm?file=App.tsx

## TaurusWood

@zombieJ
https://stackblitz.com/edit/react-ts-3vqoyv?file=App.tsx
如果是这样用callback，验证只会触发一次了。第二次输入update，error info 不会更新了
