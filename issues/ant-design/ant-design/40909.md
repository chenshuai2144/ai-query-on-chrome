# ConfigProvider ç»„ä»¶æä¾›çš„ token ä¸ç”Ÿæ•ˆ

`ğŸ› Bug`,`ğŸ‘·ğŸ»â€â™‚ï¸ Someone working on it`

### Reproduction link

[https://stackblitz.com/edit/ant-desigin-configprovider?file=demo.tsx](https://stackblitz.com/edit/ant-desigin-configprovider?file=demo.tsx)

### Steps to reproduce

1.ä½¿ç”¨ `ConfigProvider` ç»„ä»¶åŒ…è£¹ `Layout.Header` ç»„ä»¶2.åœ¨ `ConfigProvider` ç»„ä»¶ä¸­ï¼Œä¸º `Layout.Header` è®¾ç½®ä¸“å±çš„ `theme`, å¦‚ `colorBgHeader`

### What is expected?

Headerçš„èƒŒæ™¯è‰²å˜ç™½

### What is actually happening?

`colorBgHeader` æ— æ•ˆ

| Environment | Info                          |
| ----------- | ----------------------------- |
| antd        | 5.2.2                         |
| React       | 18.2.0                        |
| System      | Window 10                     |
| Browser     | Google Chrome(110.0.5481.178) |

---

æˆ‘æŸ¥è¯¢åˆ°ä¸€ä¸ªç›¸å…³çš„ [issue](https://github.com/ant-design/ant-design/issues/38975)ï¼Œåº”è¯¥æ˜¯é€ æˆè¯¥é—®é¢˜çš„åŸå› ã€‚
å¦‚æœå®˜æ–¹æš‚æ—¶ä¸æ”¯æŒç»„ä»¶å…¨é‡tokenæ³¨å…¥ï¼Œä½†æ˜¯åˆä¸å†ä½¿ç”¨ Lessï¼Œé‚£ä¹ˆå½“å‰æ¨èçš„ä¿®æ”¹æ ·å¼çš„æ–¹æ¡ˆï¼Œåº”è¯¥æ˜¯å¦‚ä½•ï¼Ÿ
æ¯”å¦‚ï¼Œæˆ‘å½“å‰ä½¿ç”¨ emotion ï¼ˆCSS-in-JSï¼‰ï¼Œæˆ‘è¯¥å¦‚æœä¿®æ”¹æ ·å¼ï¼Ÿå› ä¸º`::where`é€‰æ‹©å™¨çš„å­˜åœ¨ï¼Œæˆ‘çš„ emotion ä»£ç æƒé‡è¢«é™ä½äº†ã€‚

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

å‘ç°æ˜¯ä¸ª BUGï¼Œcssinjs ä½œç”¨åœ¨ Layout ä¸Šï¼Œå­å…ƒç´ ä¸æ”¯æŒæ›´æ–°ï¼Œæˆ‘ä¿®ä¸€ä¸‹ï¼š
https://stackblitz.com/edit/ant-desigin-configprovider-bevlqw?file=demo.tsx

## Gatsby069

> å‘ç°æ˜¯ä¸ª BUGï¼Œcssinjs ä½œç”¨åœ¨ Layout ä¸Šï¼Œå­å…ƒç´ ä¸æ”¯æŒæ›´æ–°ï¼Œæˆ‘ä¿®ä¸€ä¸‹ï¼š https://stackblitz.com/edit/ant-desigin-configprovider-bevlqw?file=demo.tsx

æˆ‘çœ‹äº†ä¸‹ä½ çš„ä¿®å¤demoï¼Œå‘ç°ä½ æŠŠ `ConfigProvider` æ ‡ç­¾å‘ä¸Šç§»åŠ¨äº†ä¸€å±‚ï¼ŒåŒ…è£¹åœ¨äº† `Layout.Header` å’Œ `Layout.Content` çš„å¤–å±‚ `Layout`å…ƒç´ ä¸Šï¼Œç„¶åæ ·å¼ç”Ÿæ•ˆã€‚
ä½†æ˜¯æˆ‘ä¾ç„¶è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªç–‘é—®ï¼Œæ¯”å¦‚è¿™ä¸ªdemo:
https://stackblitz.com/edit/react-ts-fjpwm8?file=App.tsx
æˆ‘æ— æ³•ä¿®æ”¹è¡¨å¤´é¢œè‰²ã€‚
æˆ‘æ‰¾åˆ°äº†å±äº table çš„ theme çš„ç±»å‹å£°æ˜ `TableComponentToken`, ä½†æ˜¯å®ƒæ˜¯ç©ºçš„ã€‚ç„¶åæˆ‘å‘ç°äº† `TableToken` è¿™ä¸ªå£°æ˜å…·æœ‰æˆ‘æ‰€éœ€è¦çš„ `tableHeaderBg` å±æ€§ï¼Œ ä½†æ˜¯æˆ‘ä¸çŸ¥é“è¯¥å¦‚æœä½¿å®ƒç”Ÿæ•ˆã€‚
![image](https://user-images.githubusercontent.com/66930419/221157424-9ec1ac30-4e8d-4f06-af33-cf2d1a5d2079.png)

æˆ‘é€šè¿‡è¿™ä¸ª[issue](https://github.com/ant-design/ant-design/issues/38975)æ„è¯†åˆ°å¯èƒ½æ˜¯è¿™ä¸ªåŸå› å¯¼è‡´çš„ã€‚

**æ‰€ä»¥æˆ‘æœ€å¤§çš„ç–‘é—®æ˜¯ï¼šæˆ‘è¯¥å¦‚ä½•æ­£ç¡®åœ°ä¿®æ”¹æ ·å¼å‘¢ï¼Ÿï¼ˆå› ä¸º`antd`ä¸å†ä½¿ç”¨Lessï¼Œä½†æ˜¯ component token ç›®å‰åˆæ²¡æœ‰å‘å¸ƒï¼‰**
æ¯”å¦‚è¿™ä¸ªä¾‹å­ï¼š
https://stackblitz.com/edit/react-ts-7eecdl?file=App.tsx
**æˆ‘ä¸çŸ¥é“è¯¥å¦‚ä½•ç¼–å†™`emotion`ä»£ç æ¥è®©è¡¨å¤´å˜è‰²ã€‚**ï¼ˆå› ä¸ºæˆ‘çœ‹ä½ ä»¬çš„ [StyleProvider](https://github.com/ant-design/cssinjs#styleprovider)ï¼Œå…¶å®åº•å±‚ä¾èµ–äº† `emotion`ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä½¿ç”¨ `emotion` åº“æ¥ä¹¦å†™æˆ‘çš„CSSæ ·å¼ã€‚ï¼‰

## zombieJ

å‚è€ƒè¿™ä¸ªä¾‹å­ï¼šhttps://github.com/ant-design/ant-design/pull/40933/files#diff-cbecb841e4a0032c882897c0cf4ffcdca91a1804ec870b4808609e45a583c7c1R12

åº•å±‚ç”¨äº† emotion çš„ hash åº“ï¼Œæœ¬èº«ç”¨çš„æ˜¯ stylis åŒ…çš„ã€‚ä½†æ˜¯æ— æ‰€è°“åº•å±‚æ˜¯ä»€ä¹ˆï¼Œä½ ä¸éœ€è¦é€šè¿‡ emotion æ”¹å˜æ ·å¼ï¼Œæ”¹å˜æ ·å¼çš„æ˜¯é€šè¿‡ CP è®¾ç½®çš„ themeã€‚å°±åƒä½ ä¸Šé¢çš„ä»£ç ä¸€æ ·ï¼ŒCP é‡Œé’ˆå¯¹ component ä¼ å…¥å°±è¡Œã€‚ä½†æ˜¯ç°åœ¨å®˜ç½‘component é¡µé¢ç¼ºä¸€ä¸ªæ˜ å°„è¡¨ã€‚
