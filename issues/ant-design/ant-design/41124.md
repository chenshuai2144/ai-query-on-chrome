# 多个独立的 shadow dom 不能同时保持ant-design样式

`needs-more-info`

### Reproduction link

[https://github.com/Rmttf/antd-in-shadow-dom.git](https://github.com/Rmttf/antd-in-shadow-dom.git)

### Steps to reproduce

1. npm install
2. npm run start
3. 启动服务后可以看到定义的两个custom-element只有一个拥有antd样式

### What is expected?

styleProvider api 应该支持多个 shadow dom 内注入样式

### What is actually happening?

启动服务后可以看到定义的两个custom-element只有一个拥有antd样式

| Environment | Info                                |
| ----------- | ----------------------------------- |
| antd        | 5.2.3                               |
| React       | 17.0.2                              |
| System      | macOS 11.6.8 (20G730)               |
| Browser     | 105.0.5195.125（正式版本） (x86_64) |

---

我提供了一个简单的示例代码仓库，我希望通过shadow dom能够进一步封装出一些基于ant-design的组件，但是由于shadow dom的样式隔离，可能需要为每个自定义标签注入ant-design样式。我看到styleProvider api在尝试解决这个问题，但是只能全局提供样式的注入位置修改，不能够多次注入样式。

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## MadCcc

antd 的样式有缓存，同一个组件不会多次生成样式。试试为 shadow dom 的组件每次都创建一个新 cache。

```
<StyleProvider cache={...}>
  <Button />
</StyleProvider>
```

## Rmttf

> antd 的样式有缓存，同一个组件不会多次生成样式。试试为 shadow dom 的组件每次都创建一个新 cache。
>
> ```
> <StyleProvider cache={...}>
>   <Button />
> </StyleProvider>
> ```

谢谢解答，我从[这个答案](https://github.com/ant-design/cssinjs/issues/83)中也看到了类似的解决方案，可以解决这个问题。
