# Can you fix this onChange function in <RangePicker onChange={onChange} />

`🤔 Need Reproduce`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/agitated-jepsen-h08ldf?file=/src/App.tsx)

### Steps to reproduce

open this codeSandBox link

### What is expected?

i want to fix this onchange function

### What is actually happening?

(property) onChange: ((value: dayjs.Dayjs | null, dateString: string) => void) | undefined
No overload matches this call.
Overload 1 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any> & CommonPickerMethods', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.
Type '(value: Dayjs | null, dateString: string) => void' is not assignable to type '(values: RangeValue<Dayjs>, formatString: [string, string]) => void'.
Types of parameters 'value' and 'values' are incompatible.
Type 'RangeValue<Dayjs>' is not assignable to type 'Dayjs | null'.
Type '[EventValue<Dayjs>, EventValue<Dayjs>]' is not assignable to type 'Dayjs'.
Overload 2 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any>', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.ts(2769)
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any> & CommonPickerMethods> & Readonly<...>)'
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any>> & Readonly<...>)'

| Environment | Info   |
| ----------- | ------ |
| antd        | 5.3.0  |
| React       | 18.2.0 |
| System      | Ubuntu |
| Browser     | Chrome |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

Your reproduce not seems error. What's the reproduce step?

## caslanbigeyes

I don't see how your error is reproduced, please be more specific

## Bikramjit-1

import React, { useState } from "react";
import type { DatePickerProps, TimePickerProps } from "antd";
import { DatePicker, Select, Space } from "antd";
import { DateTime } from "luxon";

const { Option } = Select;
const { RangePicker } = DatePicker;

type PickerType = "custom" | "date";

const PickerWithType = ({
type,
onChange
}: {
type: PickerType;
onChange: TimePickerProps["onChange"] | DatePickerProps["onChange"];
}) => {
if (type === "custom") return <RangePicker onChange={onChange} />;
if (type === "date") return <DatePicker onChange={onChange} />;

return <DatePicker picker={type} onChange={onChange} />;
};

const App: React.FC = () => {
const [type, setType] = useState<PickerType>("custom");
const shiftDefnList = ["6-14", "14-22", "22-6"];
const [shift, setShift] = useState(shiftDefnList[0]);
const [customDate, setCustomDate] = useState<{
startTime: number;
endTime: number;
}>({
startTime: 0,
endTime: 0
});

let customDateRange = { startTime: 0, endTime: 0 };

return (
<Space>
<Select value={type} onChange={setType}>
<Option value="Day">Day</Option>
<Option value="week">Week</Option>
<Option value="shift">shift</Option>
<Option value="month">Month</Option>
<Option value="custom">Custom</Option>
</Select>

      <PickerWithType
        type={type}
        onChange={
          (value) => console.log("value", typeof value, value)

        }
      />
    </Space>

);
};

export default App;

in this RangePicker-> if (type === "custom") return <RangePicker onChange={onChange} />;

i face this error =>
(property) onChange: ((value: dayjs.Dayjs | null, dateString: string) => void) | undefined
No overload matches this call.
Overload 1 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any> & CommonPickerMethods', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.
Type '(value: Dayjs | null, dateString: string) => void' is not assignable to type '(values: RangeValue<Dayjs>, formatString: [string, string]) => void'.
Types of parameters 'value' and 'values' are incompatible.
Type 'RangeValue<Dayjs>' is not assignable to type 'Dayjs | null'.
Type '[EventValue<Dayjs>, EventValue<Dayjs>]' is not assignable to type 'Dayjs'.
Overload 2 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any>', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.ts(2769)
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any> & CommonPickerMethods> & Readonly<...>)'
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any>> & Readonly<...>)'

## Bikramjit-1

https://codesandbox.io/s/serene-goodall-qnn2gq

this is the codesandbox link

## Bikramjit-1

![image](https://user-images.githubusercontent.com/96054843/226533737-f00b6afb-a2ec-4105-bfa7-fe0e17cadfe9.png)

## Bikramjit-1

in this onChange i face this error =
(property) onChange: ((value: dayjs.Dayjs | null, dateString: string) => void) | undefined
No overload matches this call.
Overload 1 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any> & CommonPickerMethods', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.
Type '(value: Dayjs | null, dateString: string) => void' is not assignable to type '(values: RangeValue<Dayjs>, formatString: [string, string]) => void'.
Types of parameters 'value' and 'values' are incompatible.
Type 'RangeValue<Dayjs>' is not assignable to type 'Dayjs | null'.
Type '[EventValue<Dayjs>, EventValue<Dayjs>]' is not assignable to type 'Dayjs'.
Overload 2 of 2, '(props: RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, context?: any): Component<RangePickerProps<Dayjs> & { ...; }, unknown, any>', gave the following error.
Type '((value: Dayjs | null, dateString: string) => void) | undefined' is not assignable to type '((values: RangeValue<Dayjs>, formatString: [string, string]) => void) | undefined'.ts(2769)
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any> & CommonPickerMethods> & Readonly<...>)'
RangePicker.d.ts(24, 5): The expected type comes from property 'onChange' which is declared here on type 'IntrinsicAttributes & (IntrinsicClassAttributes<Component<RangePickerProps<Dayjs> & { dropdownClassName?: string | undefined; popupClassName?: string | undefined; }, unknown, any>> & Readonly<...>)'

## sRoke

According to the code implemented in the official documentation example of Antd, I also found the same problem
![image](https://user-images.githubusercontent.com/22782890/231339986-753ba96c-045d-4f83-8e99-5982a45df792.png)

![image](https://user-images.githubusercontent.com/22782890/231339564-10305bd4-b5c5-487c-bc8f-ba1490746c6e.png)

## sRoke

@Bikramjit-1 May I ask how you resolved it

## sRoke

解决方案： onChange方法中 value的类型应该指定为（Dayjs | null）;官网示例直接写Dayjs会提示类型错误

## denvudd

Hello! Can someone please tell me how you solved this issue? I encountered the same problem while developing a project, even though I followed the documentation and examples.

Here's the piece of code where the problem occurs:

```
...
const handleDateChange: DatePickerProps["onChange"] = (
date: Dayjs | null,
dateString: string
): void => {
console.log(selectedDates);
};
...
{
key: "dateRelease",
label: "Дата релізу",
type: "group",
children: [
{
key: "datepicker",
label: (
<DatePicker.RangePicker
onChange={handleDateChange}
size="small"
/>
),
type: "group",
},
],
},
...
```

And here's the error message:
`Type error: Type '(date: Dayjs | null, dateString: [string, string]) => void' is not assignable to type '(value: Dayjs | null, dateString: string) => void'`

As far as I could discover if you look at the `export declare type RangePickerSharedProps<DateType>`, you can see the following annotation for onChange:
`onChange?: (values: RangeValue<DateType>, formatString: [string, string]) => void;`
But if you look at DatePickerProps["onChange"], you can see the following annotation for onChange:
`onChange?: (value: DateType | null, dateString: string) => void;`

They seem different, aren't they? Both annotations for onChange are causing an error. Does someone know a solution? Thank you!
