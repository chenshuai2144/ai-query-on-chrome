# When toggling the display of different Form, component in Form.Item with same name remains same value in dom

`unconfirmed`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/antd-form-compare-6hit7r?file=/src/index.js)

### Steps to reproduce

```js
<button onClick={() => setTab((v) => !v)}>toggle</button>
      <div>
        {tab ? (
          // add different key for Forms can resolve this problem
          <Form form={form1}>
            <Form.Item name="a" label="A">
              <Input />
            </Form.Item>
          </Form>
        ) : (
          <Form form={form2}>
            <Form.Item name="a" label="B">
              {/* Note that this isn't an input */}
              <Input.TextArea />
            </Form.Item>
          </Form>
        )}
      </div>
```

1. type something in form1.a
2. click "toggle"
3. form2 will display the same string, but actually the value haven't been store in form2.

### What is expected?

Different Form with same name of Form.Item should display different dom content.

### What is actually happening?

When using "?:", form2's value of Input keeps the same in page, while form2.getFieldsValue('a') is undefined.

| Environment | Info   |
| ----------- | ------ |
| antd        | 5.3.2  |
| React       | 18.2.0 |
| System      | \*     |
| Browser     | \*     |

---

I supposed that it result from React diff, but after replacing <Input> with <Input.TextArea>, the problem still exist.

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

> add differect key for Form can also resolve this problem
> so the problem result from react diff algo?

You've already find the reason : )

For the first demo children is `[false, formNode]` or `[formNode, false]`, but second demo is always `formNode` which be merged into same one by React.

Use `key` prop to diff is the resolution.

## ldc-37

> > add differect key for Form can also resolve this problem
> > so the problem result from react diff algo?
>
> You've already find the reason : )
>
> For the first demo children is `[false, formNode]` or `[formNode, false]`, but second demo is always `formNode` which be merged into same one by React.
>
> Use `key` prop to diff is the resolution.

Hi @zombieJ Firstly thanks for explanation ~

But it's still strange, because React Diff will not reuse elements that type change after re-render. In my case, before "toggle" there's an \<input\> in dom. While after "toggle", it switch to a \<textarea\>. as shown in screenshots

- form1
  <img width="1197" alt="image" src="https://user-images.githubusercontent.com/34739463/226834027-2407c726-d65d-4dd0-bce5-5f1c905dabc6.png">

- form2
  <img width="1295" alt="image" src="https://user-images.githubusercontent.com/34739463/226834236-67b57c67-99bd-44d8-9c41-ac8e75b07d46.png">

---

**After further tests, I found it seems that \<Form\> will always binding form1, no matter how I toggle.**

<img width="658" alt="image" src="https://user-images.githubusercontent.com/34739463/226834957-286295bd-bd18-47c0-a915-6c669bb097bc.png">

In this üëÜüèª case, I switch to form2 and type "change this in form2", then discover that the string is actually store in form1, form2.getFieldsValue() will return an empty object. So I think maybe this situation is **not** (or precisely, not only) the result of react diff mechanism.

p.s. I'm not familiar with how ant-design implemented Form.useForm() so maybe it just work as it designed ü§ì
