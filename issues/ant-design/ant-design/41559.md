# å®˜ç½‘çš„nextjsè‡ªå®šä¹‰ä¸»é¢˜ä¾‹å­æ— æ•ˆ

`unconfirmed`

### Reproduction link

[https://github.com/ant-design/create-next-app-antd](https://github.com/ant-design/create-next-app-antd)

### Steps to reproduce

```
import fs from "fs";
import { extractStyle } from "@ant-design/static-style-extract";
import { ConfigProvider } from "antd";
import React from "react";

const outputPath = "./public/antd.min.css";

// 1. default theme

// const css = extractStyle();

// 2. With custom theme

const testGreenColor = "#008000";
const testRedColor = "#ff0000";

const css = extractStyle((node) => (
  <>
    <ConfigProvider
      theme={{
        token: {
          colorBgBase: testGreenColor,
        },
      }}
    >
      {node}
    </ConfigProvider>
    <ConfigProvider
      theme={{
        token: {
          colorPrimary: testGreenColor,
        },
      }}
    >
      <ConfigProvider
        theme={{
          token: {
            colorBgBase: testRedColor,
          },
        }}
      >
        {node}
      </ConfigProvider>
    </ConfigProvider>
  </>
));

fs.writeFileSync(outputPath, css);

console.log(`ğŸ‰ Antd CSS generated at ${outputPath}`);
```

ä¿®æ”¹æ–‡ä»¶genAntdCss.tsx

### What is expected?

ä¸»é¢˜å˜åŒ–

### What is actually happening?

ä¸»é¢˜æ²¡æœ‰å˜åŒ–

| Environment | Info   |
| ----------- | ------ |
| antd        | 5.1.0  |
| React       | 18.2.0 |
| System      | mac    |
| Browser     | chrome |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## kiner-tang

æˆ‘æ¥çœ‹çœ‹

## kiner-tang

@ibufu å¦‚æœç€æ€¥çš„è¯ï¼Œå¯ä»¥å°è¯•æŒ‰ç…§è¿™ç§æ–¹å¼æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜çš„é™æ€åŒ–æ ·å¼æŠ½ç¦»ï¼šhttps://github.com/ant-design/create-next-app-antd/pull/5/files#diff-a9827ce1be32c607c948881a89b99c592f752898f9c49e0dea0b7199eb151029

## ibufu

> @ibufu å¦‚æœç€æ€¥çš„è¯ï¼Œå¯ä»¥å°è¯•æŒ‰ç…§è¿™ç§æ–¹å¼æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜çš„é™æ€åŒ–æ ·å¼æŠ½ç¦»ï¼šhttps://github.com/ant-design/create-next-app-antd/pull/5/files#diff-a9827ce1be32c607c948881a89b99c592f752898f9c49e0dea0b7199eb151029

æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè™½ç„¶ç¡®å®åˆ†ç¦»äº†cssï¼Œä½†æ˜¯ server è¿”å›çš„ HTML é¦–å±è¿˜æ˜¯æ²¡æœ‰æ ·å¼çš„ã€‚

## kiner-tang

> > @ibufu å¦‚æœç€æ€¥çš„è¯ï¼Œå¯ä»¥å°è¯•æŒ‰ç…§è¿™ç§æ–¹å¼æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜çš„é™æ€åŒ–æ ·å¼æŠ½ç¦»ï¼šhttps://github.com/ant-design/create-next-app-antd/pull/5/files#diff-a9827ce1be32c607c948881a89b99c592f752898f9c49e0dea0b7199eb151029
>
> æµ‹è¯•äº†ä¸€ä¸‹ï¼Œè™½ç„¶ç¡®å®åˆ†ç¦»äº†cssï¼Œä½†æ˜¯ server è¿”å›çš„ HTML é¦–å±è¿˜æ˜¯æ²¡æœ‰æ ·å¼çš„ã€‚

ä½ æœ‰åœ¨ \_app.tsx ä¸­å¼•å…¥æ ·å¼å—ï¼Ÿ
<img width="1113" alt="image" src="https://user-images.githubusercontent.com/10286961/229035497-51960ee4-aa0e-42db-8d4d-ffe8993c45da.png">
![å±å¹•å½•åˆ¶2023-03-31 14 06 43 mov](https://user-images.githubusercontent.com/10286961/229037265-7d229227-4c82-4031-96d1-3bb196f28d78.gif)

## ibufu

duplicate https://github.com/ant-design/ant-design/issues/41573
