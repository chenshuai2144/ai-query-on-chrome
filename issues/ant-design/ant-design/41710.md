# 5.3.3 的Popover嵌套Modal显示异常

`unconfirmed`

### Reproduction link

[https://stackblitz.com/edit/react-y42zoz?file=demo.tsx](https://stackblitz.com/edit/react-y42zoz?file=demo.tsx)

### Steps to reproduce

鼠标放在popover上触发显示content，在content里有个按钮，点击按钮打开了Modal弹窗，这时候鼠标再放到Popover触发组件上（经过看看），Popover又被弹出来了

### What is expected?

弹窗遮罩以后Popover不要触发onOpenChange

### What is actually happening?

弹窗遮罩了内容还触发了onOpenChange

| Environment | Info           |
| ----------- | -------------- |
| antd        | 5.3.3          |
| React       | 18.2.0         |
| System      | windows11      |
| Browser     | 111.0.5563.147 |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## Vantown

注：在5.2.2的版本上是正常的，升级到5.3.3就出问题了，尝试升级到5.4.0问题还是存在，这样使用的场景如下，比如这个弹窗里面是一些快速新建单据的菜单，菜单的顶部还放了个组件，这个组件里功能是这样，一个按钮加一个弹窗，点按钮就出来弹窗，弹窗里是设置菜单用的，再比如这个菜单，这个菜单点击了是直接弹窗新建单据，新建单据也需要弹窗，像这种就出现了这个组件需要在多个地方复用，在Popover里也需要这样用，5.3.3是出于什么考虑要把这种改了呢？

## Yuiai01

可以看看这个 https://github.com/ant-design/ant-design/issues/41362

## Vantown

> 可以看看这个 #41362

是出于什么场景考虑要改成这样呢？这个应该是5.3.x版本新加的，我再5.2.2的版本上没这个问题

## zombieJ

以前 Popover 底层的 `rc-tooltip` 依赖的 `rc-trigger` 实现不是 React 生命周期方式，导致冒泡会丢失。`5.3.0` 里重构了 `rc-trigger` 元素都会完整在同一个 Virtual Dom Tree 里，所以冒泡就恢复了哈。
它其实是 BUG as Feature。

## Vantown

> 以前 Popover 底层的 `rc-tooltip` 依赖的 `rc-trigger` 实现不是 React 生命周期方式，导致冒泡会丢失。`5.3.0` 里重构了 `rc-trigger` 元素都会完整在同一个 Virtual Dom Tree 里，所以冒泡就恢复了哈。 它其实是 BUG as Feature。

原来是这样，那我知道了，多谢解惑
