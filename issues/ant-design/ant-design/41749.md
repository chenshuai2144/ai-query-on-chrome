# Calendar with date-fns not styled properly with NextJS

`improvement`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/p/sandbox/wispy-fast-ywg1ty)

### Steps to reproduce

Click Default tab: works correctly. Click Date Fns tab: styling is incorrect (`colorPrimary` is ignored).

### What is expected?

Colored items should be the correct color (`colorPrimary`).

### What is actually happening?

Colored items show as default color (blue).

| Environment | Info                                                   |
| ----------- | ------------------------------------------------------ |
| antd        | 5.4.1                                                  |
| React       | 18.2.0                                                 |
| System      | Windows Professional 21H2                              |
| Browser     | Chrome Version 112.0.5615.50 (Official Build) (64-bit) |

---

I tried changing calendar.tsx imports from "antd/lib" to "antd/es", which is what the documentation says to do, but this does not compile with NextJS.

I believe this bug also applies to `generatePicker`.

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

NextJS using es modules, we can improve this export from DatePicker.generate instead of developer import from path

## devuxer

@zombieJ,

Thank you for working on this!

Can you show a usage example? I don't quite understand what you've done.

**Edit**

Oh, I think I figured it out from [your test](https://github.com/ant-design/ant-design/pull/41773/commits/b9cf50e93aa97b774f912aeb5cdbc1fb12821dc8#diff-7fdce5d71fac3793bf16cbc035559eeb8d5565c0db96d0b9399b5265a8c471b4).

Would this be right?

```ts
import dateFnsGenerateConfig from "rc-picker/lib/generate/dateFns";
import { DatePicker as DatePickerCore } from "antd";

const DatePicker = DatePickerCore.generatePicker(dateFnsGenerateConfig);

export default DatePicker;
```

Are you able to say when this will be released?

## iakovmarkov

@zombieJ looking at the PR you've linked it doesn't look like it fixes the issue. Currently, the picker components that are returned by "generatePicker" do not pick up on the theme that is supplied via Config Provider.

In the codesandbox it is clearly visible when you change the tabs. One calendar is red (as is set in the theme), and another is blue (default color).

Unfortunately I couldn't figure out why this happens looking at the generatePicker code. Maybe it has to do something with rc-picker internals?

## devuxer

@zombieJ,

Can you please answer our questions?

1. Does your patch solve the issue with styling? (See @iakovmarkov 's comment)

   I want this:

   ![image](https://user-images.githubusercontent.com/1298521/233859387-314e4d7e-39f5-4dfb-8532-62a933eda18c.png)

   But I'm getting this:

   ![image](https://user-images.githubusercontent.com/1298521/233859405-b8239983-98f8-40d0-ba47-9625982dc88c.png)

2. When will this patch be released? I just installed version 4.5.4 and still don't see any of your code changes. Are you waiting for a code review or something?

## zombieJ

feature branch release minor version at end of each month. Please ref #41773 for more info : )

## devuxer

@zombieJ , It's a new month now. I don't see any difference.

## iakovmarkov

I've tried the new version as well and the bug is still present. I tried to look into the source code again but the interactions with theme provider are simply too arcane for an outsider to understand.

Unfortunately, that's not the only place where Theme/Config Provider is outright broken. There is not much interest from the Antd team in fixing those edge cases it seems.

## devuxer

@iakovmarkov,

That's not good. What other components are broken? If there are issues for them, can you link here? Thx.

## devuxer

Just updated my [reproduction](https://codesandbox.io/p/sandbox/solitary-sun-58b5bu), and it is now fixed!
