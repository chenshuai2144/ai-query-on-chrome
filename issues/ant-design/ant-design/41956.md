# [Modal]å¼¹æ¡†æ‰“å¼€åï¼Œfixedæˆ–è€…absoluteå…ƒç´ ä¼šæŠ–åŠ¨

`ğŸ™…ğŸ»â€â™€ï¸ WON'T RESOLVE`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/embed/vibrant-lalande-ckk85f?fontsize=14&hidenavigation=1&theme=dark)

### Steps to reproduce

ç‚¹å‡»ã€Open Modalã€‘å”¤èµ·å¼¹æ¡†

### What is expected?

headeræ ‡ç­¾ä¸­å±…ä¸­çš„å…ƒç´ ã€fixedå®šä½ã€‘ä¸ä¸‹é¢çš„ã€testã€‘å…ƒç´ ä¸€æ ·ï¼Œå”¤èµ·å¼¹æ¡†åä½ç½®ä¸å˜

### What is actually happening?

headeræ ‡ç­¾ä¸­å±…ä¸­çš„å…ƒç´ ï¼Œå› ä¸ºéšè—æ»šåŠ¨æ¡å¯¼è‡´å®½åº¦å˜åŒ–ï¼Œä½¿é‡Œé¢å…ƒç´ çš„å±…ä¸­ä½ç½®å˜åŒ–ï¼Œäº§ç”ŸæŠ–åŠ¨è§†è§‰æ•ˆæœ

| Environment | Info                |
| ----------- | ------------------- |
| antd        | 5.3.2               |
| React       | 18.2.0              |
| System      | windows             |
| Browser     | chrome 114.0.5720.4 |

---

I. https://github.com/ant-design/ant-design/issues/19729 è¯¥issuesæœ‰æå‡ºç±»ä¼¼é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®ƒcloseå‰æ²¡æœ‰çœ‹åˆ°è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸”issuesé‡Œè®¨è®ºçš„è§£å†³æ–¹æ¡ˆåœ¨5.xç‰ˆæœ¬å·²ç»ä¸ç”¨äº†ï¼Œ5.xç‰ˆæœ¬çš„antd åªæ˜¯å¯¹htmlå’Œbodyæ ‡ç­¾calcäº†å®½åº¦ã€‚
II. è§£å†³ä»¥ä¸Šåœºæ™¯ï¼Œå¯ä»¥é¢å¤–å¢åŠ ä¸€ä¸ªclassæ ·å¼ä¾‹å¦‚ï¼š

```
.ant-scrolling-effect{
    width: `calc(100% - ${scrollBarSize}px)`,
}
```

ç”¨æˆ·å¯ä»¥è‡ªè¡Œé…ç½®class:ant-scrolling-effectï¼Œä¾‹å¦‚ï¼š`<header class="ant-scrolling-effect" />`

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

å—¯ï¼Œæ˜¯ä¸ªå·²çŸ¥é—®é¢˜ã€‚ä½†æ˜¯ä¸å¥½è§£ï¼Œå› ä¸ºæ»šåŠ¨æ¡å˜åŒ–æ˜¯ä¼šå½±å“å®½åº¦çš„ã€‚css é‡Œé…ç½®çš„å®½åº¦ä¸ä¼šå— padding å½±å“ã€‚

## jx62257070

> å—¯ï¼Œæ˜¯ä¸ªå·²çŸ¥é—®é¢˜ã€‚ä½†æ˜¯ä¸å¥½è§£ï¼Œå› ä¸ºæ»šåŠ¨æ¡å˜åŒ–æ˜¯ä¼šå½±å“å®½åº¦çš„ã€‚css é‡Œé…ç½®çš„å®½åº¦ä¸ä¼šå— padding å½±å“ã€‚

æˆ‘çœ‹åˆ°å¼¹æ¡†å”¤èµ·æ—¶ä¼šæ’å…¥è¿™ä¸ªstyleæ ‡ç­¾ï¼š
![image](https://user-images.githubusercontent.com/42292902/234509719-ced1b4f4-8c6e-4d3d-8088-a5b3ffe3c278.png)

å¦‚æœåœ¨è¿™ä¸ªstyleæ ‡ç­¾é‡Œé¢å¤–åŠ å…¥ç±»ä¼¼æˆ‘ä¸Šè¿°çš„classæ ·å¼ï¼š
![image](https://user-images.githubusercontent.com/42292902/234513020-41945cab-b58b-4861-9c16-dda7952a0f34.png)

è®©ä½¿ç”¨è€…é€šè¿‡åœ¨headeræ ‡ç­¾è‡ªå·±åŠ å…¥è¯¥classæ¥æ§åˆ¶å®½åº¦ï¼Œæ˜¯å¦å¯è¡Œå‘¢ï¼Ÿ
![image](https://user-images.githubusercontent.com/42292902/234513256-bad10854-3e1f-403c-b90a-4802ae96bce6.png)

## zombieJ

è¿™ç§å°±æ˜¯éœ€è¦å¼€å‘åŒå­¦è‡ªè¡Œæ·»åŠ å¯¹åº”é€»è¾‘ï¼Œç»„ä»¶å±‚é¢å°±æ²¡åŠæ³•åšäº†ã€‚

## jx62257070

> è¿™ç§å°±æ˜¯éœ€è¦å¼€å‘åŒå­¦è‡ªè¡Œæ·»åŠ å¯¹åº”é€»è¾‘ï¼Œç»„ä»¶å±‚é¢å°±æ²¡åŠæ³•åšäº†ã€‚

æ¯•ç«Ÿç»„ä»¶ä¸å¥½åˆ¤æ–­å“ªäº›å…ƒç´ éœ€è¦ä¸€èµ·å˜å®½åº¦ï¼Œåªèƒ½è®©ä½¿ç”¨è€…è‡ªå·±è§†æƒ…å†µé…ç½®äº†ã€‚

æ¯”èµ·ä½¿ç”¨è€…ç›‘å¬æ¯ä¸ªå¼¹æ¡†æ˜¾éšï¼Œç„¶åå†è‡ªå·±æ’å…¥å’Œç§»é™¤styleæ ‡ç­¾ï¼Œæ„Ÿè§‰åœ¨ã€æ’å…¥styleæ ‡ç­¾ã€‘ä»£ç å¤„ä¼˜åŒ–ä¸‹æ›´å¥½ã€‚

ä¸è¿‡è¿™æ®µã€æ’å…¥styleæ ‡ç­¾ã€‘çš„ä»£ç ä¼¼ä¹åœ¨rc-utilè¿™ä¸ªåº“ï¼Œä¸å¥½ç›´æ¥æ”¹..

çœ‹antdä¹‹å‰æœ‰ç»™rc-utilåº“æissuesï¼Œä¸Šè¿°è§£å†³æ–¹æ¡ˆæ˜¯å¦å¯ä»¥ä¹Ÿæä¸ªissuesä¼˜åŒ–ä¸‹å‘¢ï¼Ÿ

## TimoA200

# Let me translate this thread for you (you're welcome):

### [jx62257070](https://github.com/jx62257070)

### Steps to reprodue

Click [Open Modal] to invoke the pop-up box

### What is expected?

The centered element [fixed positioning] in the header tag is the same as the [test] element below, and the position remains unchanged after the pop-up box is evoked

### What is actually happening?

The centered element in the header tag, because the hidden scroll bar causes the width to change, the centered position of the element inside changes, resulting in a jittering visual effect

[shows his environment]

I. #19729 This issue raised a similar problem, but I didn't see the solution before it was closed, and the solution discussed in the issue is no longer used in version 5.x. Antd in version 5.x only supports html and body tags Calculate the width.
II. To solve the above scenarios, you can add an additional class style such as:

```
.ant-scrolling-effect{
    width: `calc(100% - ${scrollBarSize}px)`,
}
```

Users can configure class:ant-scrolling-effect by themselves, for example: `header class="ant-scrolling-effect" />`

### [zombieJ](https://github.com/zombieJ)

Well, it's a known issue. But it is not easy to solve, because the change of the scroll bar will affect the width. The width configured in css will not be affected by padding.

### [jx62257070](https://github.com/jx62257070)

I see this style tag is inserted when the popup pops up:
![image](https://user-images.githubusercontent.com/22802100/234687240-7fcfda72-0c29-4cca-b8ca-3fa93ed772f8.png)

If you add an additional class style similar to the one I mentioned above to this style tag:
![image](https://user-images.githubusercontent.com/22802100/234687290-21ed444a-003c-4949-91c6-51b346ae764f.png)

Is it feasible for users to control the width by adding this class in the header tag?
![image](https://user-images.githubusercontent.com/22802100/234687338-f0cb1368-f6fa-45c6-a32c-5e5dd73d8045.png)

### [zombieJ](https://github.com/zombieJ)

This kind of thing requires developers to add corresponding logic by themselves, and there is no way to do it at the component level.

### [jx62257070](https://github.com/jx62257070)

After all, it is not easy for components to judge which elements need to be changed in width together, so users can only configure them according to the situation.

Compared with the user monitoring each pop-up box to show and hide, and then inserting and removing the style tag by himself, it feels better to optimize the [insert style tag] code.

But this [insert style tag] code seems to be in the rc-util library, so itâ€™s not easy to change it directly..

Seeing that antd has raised issues for the rc-util library before, can the above solution also raise issues for optimization?

## TimoA200

In my case, I have overridden all html, body related `width` values, with the css `!important` rule, in my global.css.

```
html,
body {
  width: 100% !important;
}
```

This is for sure not applicable in all cases, but for me it was the fastest way to solve this.

## zombieJ

You can use `:is` selector to raise priority instead of `!important`:

https://codesandbox.io/s/divine-resonance-g4c009?file=/src/styles.css

## zombieJ

Close since current prevent scroll is only for css control. We can do nothing more on this.

## huangsheng7271

å¤§ä½¬ä»¬ï¼Œè¿™ä¸ªé—®é¢˜åº”è¯¥æ€ä¹ˆè§£å†³å‘€
