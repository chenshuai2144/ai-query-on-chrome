# [BUG](Upload): åœ¨disabled=trueçš„Formç»„ä»¶ä¸‹ï¼Œå³ä½¿ä¸ºUploadå•ç‹¬è®¾ç½®äº†disabled=falseï¼Œä¾ç„¶æ— æ³•åˆ é™¤å·²ä¸Šä¼ çš„æ–‡ä»¶

`ğŸ› Bug`,`ğŸ‘·ğŸ»â€â™‚ï¸ Someone working on it`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/yi-shang-chuan-de-wen-jian-lie-biao-antd-5-4-5-forked-ymnozr?file=/demo.tsx)

### Steps to reproduce

1. Uploadç»„ä»¶åœ¨ disabled=true çš„context ä¸‹
2. å•ç‹¬ä¸ºUploadè®¾ç½®disabled=false
3. ç‚¹å‡»å·²ä¸Šä¼ æ–‡ä»¶çš„åˆ é™¤Iconï¼Œæ— ååº”

### What is expected?

ç‚¹å‡»åˆ é™¤Iconèƒ½å¤Ÿåˆ é™¤å·²ä¸Šä¼ æ–‡ä»¶

### What is actually happening?

åˆ é™¤Iconè¢«ç¦ç”¨

| Environment | Info       |
| ----------- | ---------- |
| antd        | 5.4.6      |
| React       | 18.0.0     |
| System      | mac os     |
| Browser     | chrome 112 |

### Reason

https://github.com/ant-design/ant-design/blob/c9bac13bc860a071749f19ee5574c926d5622303/components/upload/UploadList/index.tsx#L140

å› ä¸ºè¿™é‡Œå®ç°æ˜¯ButtonåŒ…è£¹ï¼Œä½†æ˜¯æ²¡æœ‰ä»ä¸Šæ¸¸ä¼ å…¥disabledï¼Œå¯¼è‡´Buttonç”¨çš„æ˜¯è‡ªå·±ä»Contextä¸­å–åˆ°çš„disabled

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## Wxh16144

å¥½åƒç¡®å®æœ‰é—®é¢˜, æˆ‘æ¥å°è¯•è§£å†³ä¸€ä¸‹~

## xliez

> å¥½åƒç¡®å®æœ‰é—®é¢˜, æˆ‘æ¥å°è¯•è§£å†³ä¸€ä¸‹~

https://github.com/ant-design/ant-design/blob/c9bac13bc860a071749f19ee5574c926d5622303/components/upload/UploadList/index.tsx#L140

å› ä¸ºè¿™é‡Œå®ç°æ˜¯ButtonåŒ…è£¹ï¼Œä½†æ˜¯æ²¡æœ‰ä»ä¸Šæ¸¸ä¼ å…¥disabledï¼Œå¯¼è‡´Buttonç”¨çš„æ˜¯è‡ªå·±ä»Contextä¸­å–åˆ°çš„disabled

@Wxh16144

## Wxh16144

è§£å†³è¿™ä¸ªé—®é¢˜çš„é€‚åˆæˆ‘åœ¨è€ƒè™‘è¿™ç§ case æ˜¯å¦éœ€è¦è€ƒè™‘:

```tsx
<Form disabled>
  <Form.Item>
    <Upload disabled={false}>
      <Button onClick={window.console.log}>click</Button>
    </Upload>
  </Form.Item>
</Form>
```

ç°çŠ¶æ˜¯è¿™ä¸ª Button æ˜¯ç¦ç”¨çš„ğŸ¤”

---

å‡è®¾å°† Upload éƒ½ç”¨ `DisabledContextProvider` åŒ…è£¹ä¸€å±‚çš„è¯, é‚£å…¶ä»– antd ç»„ä»¶æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦å‘¢? æ¯”å¦‚:

case1.

```tsx
<Form name="base" disabled>
  <Form.Item name="upload">
    <Button disabled={false} size="large">
      <Button size="small">click</Button>
    </Button>
  </Form.Item>
</Form>
```

## xliez

å› ä¸ºç›®å‰åªæœ‰Formæ˜¯ç”¨äº† `DisabledContextProvider`ï¼Œæ‰€ä»¥èƒ½æ”¯æŒæ‰‹åŠ¨ä¼ å…¥ disabled å°±ä¹Ÿè¿˜å¥½

## Wxh16144

æˆ‘æäº¤äº†ä¸€ä¸ª PR, ç­‰å¾…æ ¸å¿ƒæˆå‘˜çš„æ„è§å’Œå»ºè®®

## xliez

æ–¹ä¾¿ 4.x ç‰ˆæœ¬ä¸Šä¹Ÿ fix ä¸€ä¸‹å—ï¼Ÿ

## Wxh16144

> æ–¹ä¾¿ 4.x ç‰ˆæœ¬ä¸Šä¹Ÿ fix ä¸€ä¸‹å—ï¼Ÿ

å½“ç„¶, åŸåˆ™ä¸Š 4.x å¦‚æœæœ‰ bug éƒ½å°†æ¥å—æ›´æ–°. æ™šç‚¹æˆ‘å»æäº¤ä¸€ä¸ª PR.

## oliver34

ç°åœ¨ä¸‹è½½æŒ‰é’®ä¹Ÿè¢«ç¦ç”¨äº†

## Wxh16144

> ç°åœ¨ä¸‹è½½æŒ‰é’®ä¹Ÿè¢«ç¦ç”¨äº†

@oliver34 æˆ‘æ²¡æœ‰ç†è§£åˆ°ä½ çš„æ„æ€, å¯ä»¥å¸®åŠ©æˆ‘æä¾›ä¸€ä¸ªå¤ç°åœ°å€ä¹ˆ? (ä¹Ÿå¯ä»¥é‡æ–°å¼€ä¸€ä¸ª issue

## danzw1995

> > ç°åœ¨ä¸‹è½½æŒ‰é’®ä¹Ÿè¢«ç¦ç”¨äº†
>
> @oliver34 æˆ‘æ²¡æœ‰ç†è§£åˆ°ä½ çš„æ„æ€, å¯ä»¥å¸®åŠ©æˆ‘æä¾›ä¸€ä¸ªå¤ç°åœ°å€ä¹ˆ? (ä¹Ÿå¯ä»¥é‡æ–°å¼€ä¸€ä¸ª issue

æˆ‘æœ€è¿‘ä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çš„é¡¹ç›®ä¸­ï¼ŒæŸäº›æƒ…å†µä¸‹ï¼ŒUploadç»„ä»¶ä¼šè®¾ç½®ä¸ºåªè¯»ï¼Œä½†æ˜¯å·²ç»ä¸Šä¼ è¿‡çš„æ–‡ä»¶æœŸæœ›èƒ½å¤Ÿä¸‹è½½ã€‚ ç°åœ¨disabledä¼šä¼ é€’ç»™Buttonï¼Œå¯¼è‡´ä¸‹è½½æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ä¸ç”Ÿæ•ˆ
