# CSS is applied on the first visit to the page.

`unconfirmed`

### Reproduction link

[https://vrstyler.tainguyenviet.com/register](https://vrstyler.tainguyenviet.com/register)

### Steps to reproduce

I use antd 5.4.5 for my project. When I first visit the page the css doesn't seem to be applied.

### What is expected?

CSS is applied on the first visit to the page.

### What is actually happening?

On the first page load, the css is not applied.

| Environment | Info                               |
| ----------- | ---------------------------------- |
| antd        | 5.4.5                              |
| React       | 18.2.0                             |
| System      | Macbook Air M1 2020 - macOS 13.3.1 |
| Browser     | Chrome 112.0.5615.137              |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## archisketch-thangly

![antd-v5-css-load-slow-on firstime](https://user-images.githubusercontent.com/105255382/236393531-c6944a6d-2418-4d50-93f7-894be2c134ec.gif)

As you can see, I get the html with the original css of the input boxes.

## afc163

See https://github.com/ant-design/ant-design/pull/41686

## archisketch-thangly

> See #41686

@afc163 I think the workaround mentioned is to change \_document.tsx, but it's not fixed with my project.

## archisketch-thangly

```typescript
import Document, { DocumentContext, Head, Html, Main, NextScript } from 'next/document';
import { StyleProvider, createCache } from '@ant-design/cssinjs';
import { ServerStyleSheet } from 'styled-components';

export default class MyDocument extends Document {
static async getInitialProps(ctx: DocumentContext): Promise<any> {
  const sheet = new ServerStyleSheet();
  const cache = createCache();
  const originalRenderPage = ctx.renderPage;

  try {
    ctx.renderPage = () =>
      originalRenderPage({
        enhanceApp: (App) => (props) =>
          sheet.collectStyles(
            <StyleProvider cache={cache}>
              <App {...props} />
            </StyleProvider>
          ),
      });

    const initialProps = await Document.getInitialProps(ctx);
    return {
      ...initialProps,
      styles: (
        <>
          {initialProps.styles}
          {sheet.getStyleElement()}
        </>
      ),
    };
  } finally {
    sheet.seal();
  }
}

render() {
  const isProduction = this.props.__NEXT_DATA__.runtimeConfig?.DEPLOY_ENV === 'prod';
  let langCode = this.props.__NEXT_DATA__.props.pageProps?.language?.langCode;
  if (langCode === 'jp') langCode = 'ja';

  return (
    <Html lang={langCode || 'null'} dir='ltr' translate='no'>
      <Head>
        <noscript id='jss-insertion-point' />
        <meta charSet='utf-8' />
      </Head>
      <body>
        <Main />
        <NextScript />
      </body>
    </Html>
  );
}
}
```
