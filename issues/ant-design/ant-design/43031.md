# Upload ç»„ä»¶åœ¨ä¸Šä¼ åˆ—è¡¨è¶…è¿‡ maxCount æ•°é‡æ—¶ï¼Œå†è¿›è¡Œæ–‡ä»¶ä¸Šä¼ å°†ä¸ä¼šåœ¨æ–‡ä»¶ä¸Šä¼ æˆåŠŸ/å¤±è´¥å›è°ƒ onChange æ–¹æ³•

`ğŸ‘·ğŸ»â€â™‚ï¸ Someone working on it`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/xian-zhi-shu-liang-antd-4-24-10-forked-ch8kvj)

### Steps to reproduce

1. å…ˆä¸Šä¼ æ–‡ä»¶ç›´è‡³è¾¾åˆ°maxCount è¦è¿‡çš„æ•°é‡
2. ç„¶åå†è¿›è¡Œä¸Šä¼ æ–‡ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡ onChange ä¸” file çš„ status æ˜¯ uploading çŠ¶æ€
3. åç»­æ–‡ä»¶ä¸Šä¼ æˆåŠŸæˆ–è€…å¤±è´¥éƒ½ä¸ä¼šç»§ç»­å‡ºå‘onChange, ä¸”ä¸Šä¼ åˆ—è¡¨ä¹Ÿä¸ä¼šæ›´æ–°

### What is expected?

éœ€è¦è¿›è¡Œç¡®è®¤ï¼ŒæœŸæœ›æ˜¯è¦†ç›–æ‰æœ€è€çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯è¯´éœ€è¦å¼¹çª—æç¤ºâ€œè¶…è¿‡æ–‡ä»¶æ•°é‡ä¸èƒ½ç»§ç»­ä¸Šä¼ â€è€Œä¸”ç¬¬ä¸€æ¬¡è§¦å‘çš„onChange file çš„ status æ˜¯ error çŠ¶æ€

### What is actually happening?

Upload ç»„ä»¶åœ¨ä¸Šä¼ åˆ—è¡¨è¶…è¿‡ maxCount æ•°é‡æ—¶ï¼Œå†è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ä¸ä¼šåœ¨æ–‡ä»¶ä¸Šä¼ æˆåŠŸ/å¤±è´¥å›è°ƒ onChange æ–¹æ³•

| Environment | Info                 |
| ----------- | -------------------- |
| antd        | 4.24.10              |
| React       | 18.0.0               |
| System      | MaxOS Big Sur 11.3.1 |
| Browser     | 114.0.5735.106       |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## SharkBaby

æˆ‘è¿™è¾¹åˆ†æäº†ä¸€ä¸‹åŸå› æ˜¯å› ä¸ºåœ¨ Antd Upload.tsx å†…éƒ¨ï¼Œå½“å‰æ–‡ä»¶å› ä¸ºæ˜¯è¶…è¿‡maxCount çš„æ•°é‡ï¼Œæ‰€ä»¥ä¸ä¼šåœ¨ä»–å†…éƒ¨çš„mergedFileListï¼Œå¯¼è‡´è¿™é‡ŒæŸ¥æ‰¾æ–‡ä»¶å¤±è´¥äº†ï¼Œå°±ä¸ä¼šç»§ç»­è§¦å‘onChangeäº‹ä»¶ï¼Œ éœ€è¦å›¢é˜Ÿçœ‹ä¸€ä¸‹è¿™æ ·çš„é—®é¢˜éœ€è¦æ€æ ·è§£å†³ï¼Ÿ
![image](https://github.com/ant-design/ant-design/assets/18545909/db94c369-b334-467d-b549-eb38c4bf2006)

## zombieJ

è¶…å‡º `maxCount` ä¸åº”è¯¥è§¦å‘ `onChange` äº‹ä»¶ï¼Œåªæœ‰åœ¨ `maxCount=1` æ—¶æ‰ä¼šæ›¿æ¢ã€‚

## zombieJ

> éœ€è¦è¿›è¡Œç¡®è®¤ï¼ŒæœŸæœ›æ˜¯è¦†ç›–æ‰æœ€è€çš„æ–‡ä»¶ï¼Œè¿˜æ˜¯è¯´éœ€è¦å¼¹çª—æç¤ºâ€œè¶…è¿‡æ–‡ä»¶æ•°é‡ä¸èƒ½ç»§ç»­ä¸Šä¼ â€è€Œä¸”ç¬¬ä¸€æ¬¡è§¦å‘çš„onChange file çš„ status æ˜¯ error çŠ¶æ€

è¿™ä¸ªæ˜¯ä¸šåŠ¡é€»è¾‘ï¼Œ`maxCount` é™åˆ¶ä¸å…è®¸ä¸Šä¼ ï¼Œor ä¸è®¾ç½® `maxCount` é€šè¿‡å—æ§è‡ªè¡Œæ›¿æ¢å³å¯å“ˆ~

## zombieJ

> è¶…å‡º `maxCount` ä¸åº”è¯¥è§¦å‘ `onChange` äº‹ä»¶ï¼Œåªæœ‰åœ¨ `maxCount=1` æ—¶æ‰ä¼šæ›¿æ¢ã€‚

è¿™ä¸ªæˆ‘ä¿®ä¸€ä¸‹

## SharkBaby

> > è¶…å‡º `maxCount` ä¸åº”è¯¥è§¦å‘ `onChange` äº‹ä»¶ï¼Œåªæœ‰åœ¨ `maxCount=1` æ—¶æ‰ä¼šæ›¿æ¢ã€‚
>
> è¿™ä¸ªæˆ‘ä¿®ä¸€ä¸‹
> è¿™ä¸ªé—®é¢˜å¸Œæœ›èƒ½å¤Ÿåœ¨>4.20çš„ç‰ˆæœ¬ä¿®å¤å¯ä»¥å—ï¼Ÿç›®å‰æˆ‘ä»¬ä¸´æ—¶çš„æ–¹å¼æ˜¯åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶ä¸­åœ¨maxCount > 1å¹¶ä¸”fileList.lengthç­‰äº maxCount çš„æ—¶å€™å°±ç¦ç”¨ä¸Šä¼ åŠŸèƒ½
> CC: @roc-an

## zombieJ

v4 çš„è¯å‘ç‰ˆæœ¬ä¸ä¼šè¿™ä¹ˆå‹¤ï¼Œä½ è¿™ä¸ªä¸šåŠ¡å®ç°æ˜¯å¯ä»¥çš„ã€‚
