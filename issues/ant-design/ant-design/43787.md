# åœ¨ iframe ä¸­ï¼Œå°† Modal æŒ‚åˆ°å®¿ä¸» HTML ä¸­ï¼Œ Modal ä¸­çš„ Select ä¸‹æ‹‰æ¡†ä½ç½®ä¸æ­£ç¡®

### Reproduction link

https://github.com/AmAzing129/antd-select-bug

### Steps to reproduce

1. åˆ›å»ºä¸€ä¸ªä¸» html é¡µé¢
2. åœ¨ html é¡µé¢ä¸­å¼•å…¥ iframe
3. iframe ä¸­çš„ app é€šè¿‡ getPopupContainer å°† Modal ç»„ä»¶æŒ‚è½½åˆ°å®¿ä¸»é¡µé¢ï¼Œå¦‚ window.parent.document.body
4. æ­¤æ—¶åœ¨ Modal ä¸­å¦‚æœä½¿ç”¨ Select ç»„ä»¶ï¼Œä¸‹æ‹‰æ¡†å°†æ— æ³•æ­£ç¡®æ˜¾ç¤ºï¼Œå§‹ç»ˆæ˜¾ç¤ºåœ¨å…¶ container å·¦ä¸Šè§’ï¼Œè€Œä¸æ˜¯ Select ä¸‹æ–¹

æ³¨ï¼šiframe ä¸æ–¹ä¾¿å¤ç°ï¼Œæœ€å°å¤ç°ä¸ºæ­£å¸¸ Selectï¼Œåœ¨ iframe ä¸­æ— æ³•ä½¿ç”¨

### What is expected?

Select ç»„ä»¶æ­£å¸¸æ˜¾ç¤ºä½¿ç”¨

### What is actually happening?

Select ç»„ä»¶ä¸‹æ‹‰æ¡†ä¸¢å¤±

| Environment | Info            |
| ----------- | --------------- |
| antd        | 5.7.3           |
| React       | 18              |
| System      | Apple M1 13.4.1 |
| Browser     | Chrome          |

---

ä¸‹æ‹‰é€‰é¡¹ç–‘ä¼¼ä¸ Select çš„ç›¸å¯¹ä½ç½®è®¡ç®—å‡ºé”™ï¼Œæ ·å¼å§‹ç»ˆä¸º inset: 0px auto auto 0pxï¼Œä¸‹å›¾å°† container è®¾ç½®ä¸º modal ç»„ä»¶
![image](https://github.com/ant-design/ant-design/assets/115673583/4b2cec0c-4c5d-4a59-b7a5-fa43c7001280)

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## MadCcc

ç¡®å®šæ˜¯ 5.x ä¹ˆ

## zombieJ

codesandbox ä¸æ–¹ä¾¿çš„è¯å¯ä»¥åšä¸€ä¸ª github repo å“ˆ~

## AmAzing129

> codesandbox ä¸æ–¹ä¾¿çš„è¯å¯ä»¥åšä¸€ä¸ª github repo å“ˆ~

å¥½çš„ï¼Œç¨ç­‰

## AmAzing129

https://github.com/AmAzing129/antd-select-bug
ç”¨ umi è·‘äº†ä¸¤ä¸ªé¡¹ç›®ï¼Œæœ¬åœ°èµ·åœ¨80ç«¯å£å’Œ81ç«¯å£ï¼Œä¸€ä¸ªæ˜¯å®¿ä¸»ï¼Œä¸€ä¸ªæ˜¯ iframe åµŒå…¥ï¼ŒåµŒå…¥çš„æ˜¯ä¸€ä¸ª Modalï¼Œå…¶ä¸­åŒ…å«æœ‰ Select
è¾›è‹¦å¤§ä½¬çœ‹ä¸‹
@zombieJ @MadCcc

## AmAzing129

> ### Reproduction link
>
> https://github.com/AmAzing129/antd-select-bug
>
> ### Steps to reproduce
>
> 1. åˆ›å»ºä¸€ä¸ªä¸» html é¡µé¢
> 2. åœ¨ html é¡µé¢ä¸­å¼•å…¥ iframe
> 3. iframe ä¸­çš„ app é€šè¿‡ getPopupContainer å°† Modal ç»„ä»¶æŒ‚è½½åˆ°å®¿ä¸»é¡µé¢ï¼Œå¦‚ window.parent.document.body
> 4. æ­¤æ—¶åœ¨ Modal ä¸­å¦‚æœä½¿ç”¨ Select ç»„ä»¶ï¼Œä¸‹æ‹‰æ¡†å°†æ— æ³•æ­£ç¡®æ˜¾ç¤ºï¼Œå§‹ç»ˆæ˜¾ç¤ºåœ¨å…¶ container å·¦ä¸Šè§’ï¼Œè€Œä¸æ˜¯ Select ä¸‹æ–¹
>
> æ³¨ï¼šiframe ä¸æ–¹ä¾¿å¤ç°ï¼Œæœ€å°å¤ç°ä¸ºæ­£å¸¸ Selectï¼Œåœ¨ iframe ä¸­æ— æ³•ä½¿ç”¨
>
> ### What is expected?
>
> Select ç»„ä»¶æ­£å¸¸æ˜¾ç¤ºä½¿ç”¨
>
> ### What is actually happening?
>
> Select ç»„ä»¶ä¸‹æ‹‰æ¡†ä¸¢å¤±
>
> Environment Info
> antd 5.7.3
> React 18
> System Apple M1 13.4.1
> Browser Chrome
> ä¸‹æ‹‰é€‰é¡¹ç–‘ä¼¼ä¸ Select çš„ç›¸å¯¹ä½ç½®è®¡ç®—å‡ºé”™ï¼Œæ ·å¼å§‹ç»ˆä¸º inset: 0px auto auto 0pxï¼Œä¸‹å›¾å°† container è®¾ç½®ä¸º modal ç»„ä»¶ ![image](https://user-images.githubusercontent.com/115673583/255825714-4b2cec0c-4c5d-4a59-b7a5-fa43c7001280.png)

å·²å¢åŠ å¤ç°ä»“åº“

## MadCcc

å¤ç°ä»“åº“ä¸­æ²¡æœ‰ iframe å‘€

## AmAzing129

> å¤ç°ä»“åº“ä¸­æ²¡æœ‰ iframe å‘€

å®¿ä¸»åº”ç”¨æ˜¯ parent ä¸‹çš„ umi é¡¹ç›®ï¼Œå­åº”ç”¨æ˜¯å¤–å±‚çš„
åœ¨å®¿ä¸»åº”ç”¨ä¸­ï¼Œparent/src/pages/index.tsx

![image](https://github.com/ant-design/ant-design/assets/115673583/a84f5064-b443-4c45-a485-3663d4cb9624)

## AmAzing129

@zombieJ è¾›è‹¦ç¡®è®¤ä¸‹ï¼Ÿå·²å¢åŠ å¤ç°ï¼Œå¯ä»¥å»æ‰ Need Reproduce æ ‡ç­¾

## AmAzing129

@zombieJ @yoyo837 @MadCcc @jhsu
è¾›è‹¦å¤§ä½¬ä»¬å…ˆå¸®å¿™å®šä½ä¸‹ï¼Ÿè¿™ä¸ªé—®é¢˜æˆ‘ä»¬è¿™è¾¹æœ‰ç‚¹ç´§æ€¥ ><

## yoyo837

å¹¶ä¸å¤ªå»ºè®®è¿™æ ·ç”¨å§? è¿˜ä¸å¦‚jsé€šä¿¡åè®©å®¿ä¸»é¡µé¢æ¥å¼¹å‡ºå†…å®¹å‘¢?

## AmAzing129

> å¹¶ä¸å¤ªå»ºè®®è¿™æ ·ç”¨å§? è¿˜ä¸å¦‚jsé€šä¿¡åè®©å®¿ä¸»é¡µé¢æ¥å¼¹å‡ºå†…å®¹å‘¢?

1. ç›®å‰å®¿ä¸»å’Œiframeæ˜¯ä¸¤ä¸ªé¡¹ç›®ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œæ‰€ä»¥éœ€æ±‚ä¸Šä¸å¤ªå¥½æ··æ‚

2. æŠ›å¼€ä½¿ç”¨ï¼Œä¸çŸ¥é“è¿™ä¸ªæ˜¯å¦ç®—å®ç°bugï¼Œå› ä¸ºæŠŠå…ƒç´ /ç»„ä»¶æŒ‚å‡ºå»çš„åœºæ™¯æ˜¯å­˜åœ¨çš„ï¼Œæ¯”å¦‚ cssinjs æä¾›äº† container å±æ€§ï¼Œè¿™é‡Œæ˜¯å¦æ˜¯ Select ç±»ç»„ä»¶è‡ªèº«æ ·å¼é€»è¾‘é—®é¢˜ï¼Ÿ

## afc163

> å¹¶ä¸å¤ªå»ºè®®è¿™æ ·ç”¨å§? è¿˜ä¸å¦‚jsé€šä¿¡åè®©å®¿ä¸»é¡µé¢æ¥å¼¹å‡ºå†…å®¹å‘¢?

å»ºè®® iframe ä¹‹é—´é€šè¿‡ postMessage äº¤äº’ï¼Œåªåšé€šä¿¡ã€‚

## zibuyu28

the same problem :(

## yoyo837

ç›®å‰antdåœ¨å®ç°æ—¶å¹¶æ²¡æœ‰è€ƒè™‘è¿™ç§åœºæ™¯, éƒ¨åˆ†åœºæ™¯èƒ½ç”¨åªæ˜¯å·§åˆ.

## AmAzing129

ä¸ºä»€ä¹ˆå…³é—­å‘¢ï¼Ÿé—®é¢˜æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå¦‚æœæ˜¯åœºæ™¯é—®é¢˜ï¼Œå»ºè®®æ›´æ–°æ–‡æ¡£ï¼Œæ¯•ç«Ÿ issue ä¸‹ä¹Ÿæœ‰å¾ˆå¤š iframe çš„é—®é¢˜

## afc163

è¿˜æ˜¯å»ºè®® iframe ä¹‹é—´ç”¨ postMessage é€šä¿¡ï¼Œå†è°ƒç”¨å¯¹åº”é¡µé¢çš„ antd å®ä¾‹ã€‚

## wusfe

> ä¸ºä»€ä¹ˆå…³é—­å‘¢ï¼Ÿé—®é¢˜æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå¦‚æœæ˜¯åœºæ™¯é—®é¢˜ï¼Œå»ºè®®æ›´æ–°æ–‡æ¡£ï¼Œæ¯•ç«Ÿ issue ä¸‹ä¹Ÿæœ‰å¾ˆå¤š iframe çš„é—®é¢˜

same problem ğŸ¤”
ä½ è§£å†³äº†å—

## AmAzing129

> > ä¸ºä»€ä¹ˆå…³é—­å‘¢ï¼Ÿé—®é¢˜æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œå¦‚æœæ˜¯åœºæ™¯é—®é¢˜ï¼Œå»ºè®®æ›´æ–°æ–‡æ¡£ï¼Œæ¯•ç«Ÿ issue ä¸‹ä¹Ÿæœ‰å¾ˆå¤š iframe çš„é—®é¢˜
>
> same problem ğŸ¤” ä½ è§£å†³äº†å—

æ²¡æœ‰ï¼Œæœ€åç”¨çš„ postMessage
