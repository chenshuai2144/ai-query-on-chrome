# style æ ‡ç­¾è¢«åˆ é™¤

`ğŸ¤” Need Reproduce`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/ks6t3p)

### Steps to reproduce

antd 5åœ¨ä½¿ç”¨ css in js æ–¹æ¡ˆä¸‹ï¼Œä¼šè‡ªå·±åˆ é™¤head æ ‡ç­¾ä¸‹çš„ style æ ‡ç­¾ï¼Œä¸è¿‡æŒ‰ç…§ https://ant.design/docs/react/customize-theme-cn#%E8%B0%83%E8%AF%95%E4%B8%BB%E9%A2%98 è¿™ä¸ªåŒ…çš„æè¿°æ¥çœ‹ autoclear é»˜è®¤ä¸ºfalse ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯è‡ªå·±ä½¿ç”¨å§¿åŠ¿é—®é¢˜ã€‚è¾›è‹¦çœ‹åˆ°å›å¤ä¸€ä¸‹

### What is expected?

æœŸæœ›antdä¸è‡ªè¡Œåˆ é™¤styleæ ‡ç­¾

### What is actually happening?

è‡ªå·±ä¼šåˆ é™¤

| Environment | Info   |
| ----------- | ------ |
| antd        | 5.7.3  |
| React       | 18     |
| System      | Mac    |
| Browser     | Chrome |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## MadCcc

åŒä¸€ä¸ª hash ä¸‹çš„ç»„ä»¶æ ·å¼æ˜¯ä¸ä¼šåˆ é™¤çš„ï¼Œä½†æ˜¯å¦‚æœå½“å‰ hash æ²¡æœ‰ç»„ä»¶ä½¿ç”¨å°±ä¼šæŠŠæ•´ä¸ª hash ç›¸å…³çš„æ ·å¼å…¨éƒ¨ç§»é™¤

## powerdong

ç°åœ¨æˆ‘ä»¬çº¿ä¸Šæ˜¯å‡ºç°è¿™ä¸ªæƒ…å†µ
æˆ‘ä»¬ä¸€ä¸ªç³»ç»Ÿï¼Œå¤šä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„antdï¼ˆæºç æ‰“å…¥ åŠ¨æ€åŠ è½½
å°±å‡ºç°äº†antdæŠŠè‡ªå·±çš„styleåˆ æ‰çš„æƒ…å†µï¼Œåˆ«çš„ç»„ä»¶å°±ä¸å¥½ä½¿äº†ã€‚æˆ‘å°è¯•ç»™ç»„ä»¶åŠ ä¸Šautocleaer false ä¹Ÿä¸å¥½ä½¿

## zombieJ

é‡ç°çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œæ“ä½œæ­¥éª¤æ˜¯ä»€ä¹ˆï¼Ÿ

## powerdong

@zombieJ æˆ‘æä¾›çš„è¿™ä¸ªé“¾æ¥æ˜¯æƒ³è¯´æ˜antd è‡ªå·±åˆ é™¤styleï¼ŒæŠ±æ­‰ä¸æ˜¯å¤ªå¥½æä¾›å¤ç°åœºæ™¯ã€‚ä¿ºæƒ³å’¨è¯¢æœ‰æ²¡æœ‰åŠæ³•é…ç½®æŠŠè¿™ä¸ªé€»è¾‘å»æ‰ï¼Ÿ

## zombieJ

å¯ä»¥ç»™ä¸ª repo çœ‹çœ‹ï¼Œæˆ‘ä»¬ä¸šåŠ¡é‡Œä¹Ÿæ˜¯è¿™ä¹ˆç”¨çš„ï¼Œstyle æŒ‰ç†è¯´ä¸åº”è¯¥ä¼šåˆ é™¤æ‰å¯¹ã€‚éœ€è¦ç¡®è®¤ä¸€ä¸‹æ˜¯ä»€ä¹ˆé€»è¾‘èµ°è¿‡å»çš„ã€‚autoClear é»˜è®¤æ˜¯ false æ˜¯ä¸ä¼šè·‘åˆ°çš„ã€‚

## powerdong

@zombieJ é‚£æœ‰ä¸ªå°ç–‘é—®å“ˆï¼Œ æˆ‘åœ¨è¿™ä¸ªæ²™ç›’é‡Œè¾¹ æ‰“å¼€form modal çš„æ—¶å€™styleæ ‡ç­¾æ•°é‡ æ˜¯ 17 å…³é—­modal å°±æˆ 16äº† è¿™ä¸ªé€»è¾‘æœ‰åŠæ³•å…³æ‰å—ï¼Ÿ autoclear ä¸æ˜¯ä½œç”¨äºè¿™ä¸ªçš„ä¹ˆï¼Ÿ

## zombieJ

autoClear è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰å®Œæˆï¼Œæ‰€ä»¥æ˜¯é»˜è®¤æ˜¯å…³é—­çš„ã€‚ä½ æ²¡æœ‰é…ç½®çš„è¯å®ƒæ˜¯ä¸ä¼šå»åˆ æ ‡ç­¾çš„ã€‚æ‰€ä»¥æˆ‘è¯´éœ€è¦æä¸ª repo çœ‹çœ‹å…·ä½“åŸå› ã€‚
å½“ç„¶ä½ ä¹Ÿå¯ä»¥ fork `@ant-design/cssinjs` ç„¶åæŠŠæ‰€æœ‰ removeCSS çš„æ–¹æ³•æ³¨é‡Šæ‰ï¼Œç„¶å webpack alias åˆ°ä½ è‡ªå·±çš„ cssinjs åº“ã€‚è¿™æ ·å°±ä¸ä¼šåˆ é™¤äº†ã€‚ä½†æ˜¯è¿™å¯¹äºåŠ¨æ€ä¸»é¢˜è€Œè¨€å°±ä¼šä¸æ–­ç´¯åŠ  style æ ‡ç­¾ï¼Œä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„çŠ¶æ€ã€‚å°±å¦‚ä¸Šé¢æåˆ°çš„ï¼Œä»…ä»…æ˜¯æŠŠåˆ é™¤ style å»æ‰è¿™ä¸ªåªæ˜¯éšè—é—®é¢˜ã€‚å¯èƒ½ä¼šé‡åˆ°æ›´å¤§çš„å‘ã€‚

## zombieJ

å¦å¤–ä½ æåˆ°çš„ æ²™ç›’ æ˜¯ä»€ä¹ˆå’§ï¼Ÿqiankun ä¹ˆï¼Ÿ

## powerdong

è¿™ä¸ª https://codesandbox.io/s/ks6t3p?file=/demo.tsx @zombieJ

## zombieJ

> è¿™ä¸ª https://codesandbox.io/s/ks6t3p?file=/demo.tsx

è¿™ä¸ªæ²¡æœ‰é”™å“ˆï¼Œæ‰“å¼€ modal çš„æ—¶å€™åŠ äº†ä¸€ä¸ªé”å®š body æ»šåŠ¨çš„ cssã€‚å…³é—­ modal çš„æ—¶å€™åˆ é™¤ä»¥æ¢å¤æ»šåŠ¨ï¼Œè¿™ä¸ªæ˜¯é¢„æœŸçš„ï¼š

<img width="865" alt="æˆªå±2023-07-25 23 31 23" src="https://github.com/ant-design/ant-design/assets/5378891/3ff30e99-0e58-4842-970a-bec3b064c946">

## powerdong

> autoClear è¿™ä¸ªåŠŸèƒ½æ²¡æœ‰å®Œæˆï¼Œæ‰€ä»¥æ˜¯é»˜è®¤æ˜¯å…³é—­çš„ã€‚ä½ æ²¡æœ‰é…ç½®çš„è¯å®ƒæ˜¯ä¸ä¼šå»åˆ æ ‡ç­¾çš„ã€‚æ‰€ä»¥æˆ‘è¯´éœ€è¦æä¸ª repo çœ‹çœ‹å…·ä½“åŸå› ã€‚
> å½“ç„¶ä½ ä¹Ÿå¯ä»¥ fork `@ant-design/cssinjs` ç„¶åæŠŠæ‰€æœ‰ removeCSS çš„æ–¹æ³•æ³¨é‡Šæ‰ï¼Œç„¶å webpack alias åˆ°ä½ è‡ªå·±çš„ cssinjs åº“ã€‚è¿™æ ·å°±ä¸ä¼šåˆ é™¤äº†ã€‚ä½†æ˜¯è¿™å¯¹äºåŠ¨æ€ä¸»é¢˜è€Œè¨€å°±ä¼šä¸æ–­ç´¯åŠ  style æ ‡ç­¾ï¼Œä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„çŠ¶æ€ã€‚å°±å¦‚ä¸Šé¢æåˆ°çš„ï¼Œä»…ä»…æ˜¯æŠŠåˆ é™¤ style å»æ‰è¿™ä¸ªåªæ˜¯éšè—é—®é¢˜ã€‚å¯èƒ½ä¼šé‡åˆ°æ›´å¤§çš„å‘ã€‚

æ„Ÿè°¢ get æˆ‘ä¹Ÿæ˜¯ä»Šå¤©debugæ‰¾åˆ°å†…éƒ¨removeçš„é€»è¾‘ æˆ‘æ˜å¤©å†çœ‹çœ‹ è¾›è‹¦å•¦

## powerdong

> > è¿™ä¸ª https://codesandbox.io/s/ks6t3p?file=/demo.tsx
>
> è¿™ä¸ªæ²¡æœ‰é”™å“ˆï¼Œæ‰“å¼€ modal çš„æ—¶å€™åŠ äº†ä¸€ä¸ªé”å®š body æ»šåŠ¨çš„ cssã€‚å…³é—­ modal çš„æ—¶å€™åˆ é™¤ä»¥æ¢å¤æ»šåŠ¨ï¼Œè¿™ä¸ªæ˜¯é¢„æœŸçš„ï¼š
>
> <img alt="æˆªå±2023-07-25 23 31 23" width="865" src="https://user-images.githubusercontent.com/5378891/255952807-3ff30e99-0e58-4842-970a-bec3b064c946.png">

@zombieJ è€å“¥ æˆ‘æ’æŸ¥ä¸‹æ¥ è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œå¯¼è‡´æˆ‘çš„æ ·å¼é”™ä¹±
![image](https://github.com/ant-design/ant-design/assets/45968889/6ec08647-68f2-4939-8968-34b666817e0c)

æŠ±æ­‰å†…éƒ¨é¡¹ç›®ä¸èƒ½æä¾›åˆé€‚çš„ demoï¼Œæˆ‘æƒ³é—®ä¸€ä¸‹è¿™é‡Œå¦‚æœæˆ‘æƒ³ä¸´æ—¶æ€§fixæœ‰ä»€ä¹ˆåŠæ³•ä¹ˆï¼Ÿ

> æˆ–è€…æˆ‘å¼ºåˆ¶æŠŠè¿™é‡Œçš„æºç ç»™æ³¨é‡Šæ‰ä¼šæœ‰å…¶ä»–ä»€ä¹ˆé—®é¢˜ä¹ˆ ğŸŒš

debug å‘ç°è¿™é‡Œä¸€æ¬¡æ€§æ‰¾åˆ°äº†23ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥å°±æœ‰è¯¯åˆ çš„æƒ…å†µ
![image](https://github.com/ant-design/ant-design/assets/45968889/b716d1c6-68b2-499d-85cd-39f2c1b757f5)

## zombieJ

`ä¼šæœ‰å…¶ä»–ä»€ä¹ˆé—®é¢˜ä¹ˆ` å°±æ˜¯è¿™ä¸ªï¼š

> å½“ç„¶ä½ ä¹Ÿå¯ä»¥ fork @ant-design/cssinjs ç„¶åæŠŠæ‰€æœ‰ removeCSS çš„æ–¹æ³•æ³¨é‡Šæ‰ï¼Œç„¶å webpack alias åˆ°ä½ è‡ªå·±çš„ cssinjs åº“ã€‚è¿™æ ·å°±ä¸ä¼šåˆ é™¤äº†ã€‚ä½†æ˜¯è¿™å¯¹äºåŠ¨æ€ä¸»é¢˜è€Œè¨€å°±ä¼šä¸æ–­ç´¯åŠ  style æ ‡ç­¾ï¼Œä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„çŠ¶æ€ã€‚å°±å¦‚ä¸Šé¢æåˆ°çš„ï¼Œä»…ä»…æ˜¯æŠŠåˆ é™¤ style å»æ‰è¿™ä¸ªåªæ˜¯éšè—é—®é¢˜ã€‚å¯èƒ½ä¼šé‡åˆ°æ›´å¤§çš„å‘ã€‚
