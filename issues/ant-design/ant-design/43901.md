# antd 4.15.6 4.16.3 onCell åˆå¹¶ç»“æœä¸ç¬¦åˆé¢„æœŸ

`unconfirmed`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/antdwei-4-15-6shi-hou-rowspanhui-shi-xiao-forked-k9lssp?file=/demo.tsx)

### Steps to reproduce

åˆ·æ–°demo å¯çœ‹
<img width="1638" alt="image" src="https://github.com/ant-design/ant-design/assets/8169783/0a7d6aef-b999-4fbb-9d42-6d17af652db1">

### What is expected?

å¸Œæœ›åªåˆå¹¶è®¾ç½®äº†onCellçš„åˆ—ï¼Œä¸”ä¸å‡ºç°æ•°æ®é”™ä½

### What is actually happening?

æ•°æ®é”™ä½ï¼Œé™¤ç¬¬ä¸€åˆ—å¤–åˆå¹¶ä¸ç¬¦åˆé¢„æœŸ
è®¾ç½®rowSpan æ— æ•ˆï¼Œè®¾ç½®rowspanæœ‰æ•ˆ

| Environment | Info                |
| ----------- | ------------------- |
| antd        | undefined           |
| React       | 17.0.2              |
| System      | masOS Monterey 12.1 |
| Browser     | chrome 115          |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## afc163

çœ‹çœ‹ antd@4.24.12 æ˜¯å¦ç¬¦åˆé¢„æœŸå‘¢ï¼Ÿhttps://codesandbox.io/s/antdwei-4-15-6dong-tai-rowspanbu-fu-he-yu-qi-forked-nlthmd?file=/package.json:212-219

## rawbin-

> çœ‹çœ‹ antd@4.24.12 æ˜¯å¦ç¬¦åˆé¢„æœŸå‘¢ï¼Ÿhttps://codesandbox.io/s/antdwei-4-15-6dong-tai-rowspanbu-fu-he-yu-qi-forked-nlthmd?file=/package.json:212-219
> è¿™ä¸ªä¹Ÿä¸€æ ·ï¼Œä¹Ÿé”™ä½äº†ï¼Œå¸Œæœ›åªæ˜¯ç¬¬ä¸€åˆ—æŒ‰ç›¸åŒåç§°åˆå¹¶ï¼Œå…¶ä»–åˆ—ä¿æŒä¸å˜
> è¿›ä¸€æ­¥å‘ç° è¿”å›å€¼ä½¿ç”¨rowSpan å°±ok ä½¿ç”¨rowspanä¼šé”™ä½
> https://codesandbox.io/s/antdwei-4-15-6dong-tai-rowspanbu-fu-he-yu-qi-forked-h6zx7g?file=/demo.tsx
> <img width="1306" alt="image" src="https://github.com/ant-design/ant-design/assets/8169783/2f8da3e4-db77-439c-ae0d-34308ae36a8d">

<img width="1434" alt="image" src="https://github.com/ant-design/ant-design/assets/8169783/6e157e9a-4867-4d79-8a75-39843c82da2f">

## zombieJ

### ğŸ”¥ æœ‰é—®é¢˜æ€»æ˜¯å…ˆå‡çº§ antd åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œv4 æœ€æ–°ç‰ˆæœ¬ä¸º `4.24.x` ã€‚å¯¹è¿‡å»ç‰ˆæœ¬åé¦ˆçš„ bug å¾ˆå¯èƒ½åœ¨ä¹‹åç‰ˆæœ¬å·²ç»ä¿®å¤äº†

å¦å¤–ï¼Œåˆå¹¶è¡Œä»£ç é€»è¾‘ä¹Ÿä¸å¯¹ï¼Œä¸‹é¢è¿™ä¸ªåˆ¤æ–­æ°¸è¿œéƒ½æ˜¯ `false`ï¼š

```tsx
return item.name !== item.name;
```

lint ä¹Ÿæç¤ºäº†ï¼š

<img width="528" alt="æˆªå±2023-07-31 10 36 51" src="https://github.com/ant-design/ant-design/assets/5378891/7f712dde-8b2b-4728-a3e5-812da2f44f80">

æ­¤å¤–ï¼Œ`let sameRowCount = index` è¿™ä¸ªä¹Ÿä¸å¯¹ï¼Œ èµ·å§‹å€¼æ€»åº”è¯¥æ˜¯ `1` æ‰å¯¹ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ `some` å°±è¦ä» `0` å¼€å§‹ã€‚å’Œ `index` æ²¡æœ‰å…³ç³»ã€‚`sameRowCount++` è¿™ä¸ªé€»è¾‘ä½ç½®ä¹Ÿä¸æ­£ç¡®ï¼Œè¿™ä¸ªåˆ¤æ–­å‡½æ•°æ˜¯å¯èƒ½é‡åˆ°ä¸ç­‰çš„ï¼Œéœ€è¦å…ˆåˆ¤æ–­å†ç´¯åŠ ï¼š

https://codesandbox.io/s/antdwei-4-15-6dong-tai-rowspanbu-fu-he-yu-qi-forked-j27qv8?file=/demo.tsx

## rawbin-

@zombieJ å°´å°¬äº†å¤§ä½¬ï¼ŒæŠ±æ­‰ï¼Œè¿™ä¸ªæ˜¯æˆ‘çš„é”…ï¼Œé¢„æœŸçœ‹åˆ°çš„ä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬ï¼Œè€Œæ˜¯ä¸Šé¢æˆªå›¾ä¸­çš„ç‰ˆæœ¬ï¼Œå¯èƒ½ç½‘ç»œé—®é¢˜åé¢æ²¡æœ‰ä¿å­˜ä¸Š

é¦–å…ˆå‡çº§è¿™ä¸ªå‡ ä¹ä¸å¯èƒ½äº†ï¼Œæˆ‘ä»¬å°è¯•è¿‡å‡çº§åˆ°4.xæœ€æ–°ï¼Œä½†é—®é¢˜ä¸å°‘ è§ https://github.com/ant-design/ant-design/issues/40643
åé¢å‘ç°é—®é¢˜äº†ï¼Œ4.xçš„æ–‡æ¡£å’Œ5.xçš„æ–‡æ¡£éƒ½è¯´æ˜¯renderæ–¹æ³•ï¼Œç»“æœdemoä¸­éƒ½æ˜¯onCell çš„demoï¼ŒonCellçš„åšæ³•ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­åœ¨
4.24.8ç‰ˆæœ¬é‡Œé¢çœ‹èµ·æ¥ç›¸å½“çš„ä¸æ»‘ï¼Œè€Œä¸”åªéœ€è¦åœ¨éœ€è¦åˆå¹¶çš„åˆ—ä¸­é…ç½®onCellå°±è¡Œäº†ä¹Ÿä¸ä¼šå‡ºç°é”™ä½çš„æƒ…å†µï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚
ä½†è¿™ä¸ªæ”¾åˆ°4.16.13ç‰ˆæœ¬ä¸­å°±æ— æ•ˆäº†ï¼Œ[4.16.13 rowSpanæ— æ•ˆ](https://codesandbox.io/s/antdwei-4-16-13dong-tai-rowspanwu-xiao-forked-qgw7tr)ï¼Œéœ€è¦æŠŠonCell è¿”å›å€¼ä¸­ rowSpanæ”¹ä¸º rowspanæ‰æœ‰æ•ˆï¼Œä½†æ­¤æ—¶ä¼šå‡ºç°é”™ä½ [4.16.13 rowspanæœ‰æ•ˆä½†é”™ä½](https://codesandbox.io/s/antdwei-4-16-13dong-tai-rowspanyou-xiao-dan-cuo-wei-forked-wqmhcm)ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°è¯•[ä½¿ç”¨renderçš„æ–¹æ¡ˆ](https://codesandbox.io/s/antdwei-4-16-13dong-tai-rowspanyou-xiao-forked-render-93kfnr?file=/demo.tsx) å‘ç°æ­¤æ—¶rowspanå’ŒrowSpanä¸¤ä¸ªå±æ€§éƒ½èƒ½èµ·ä½œç”¨ï¼Œä½†rowSpanç¬¦åˆé¢„æœŸrowspanä¼šé”™ä½

æ‰€ä»¥ç›®å‰åœ¨4.16.13ä¸­ä½¿ç”¨ renderæ–¹æ³•ï¼Œæœ‰è¡Œåˆå¹¶çš„æ–¹æ¡ˆ [ä½¿ç”¨renderçš„æ–¹æ¡ˆ](https://codesandbox.io/s/antdwei-4-16-13dong-tai-rowspanyou-xiao-forked-render-93kfnr?file=/demo.tsx) ï¼Œä½†ä½¿ç”¨onCell ç›®å‰è¿˜æ²¡æœ‰æ–¹æ¡ˆ
