# Custom Form Item Component, requires "disabled" prop of Form instance

`4.x`

### What problem does this feature solve?

//Using antd 4.x
//Consider a Simple Custom Form Item component.

```
import {useState} from 'react';
import styles from './index.less';
import {Form, Button} from 'antd';

const CustomFormItem = ({value, onChange}) => {

    const [count, setCount] = useState(value || 0);

    const change = (n: number) => {
        const newCount = count   n;
        setCount(newCount);
        if (typeof onChange === 'function') {
            onChange(newCount);
        }
    };

    return <>
        <button disabled={ ??? } onClick={() => change(-1)}>-</button>
        {count}
        <button  disabled={ ??? } onClick={() => change(1)}> </button>
       // More components here which requires disabled prop value to make it readonly, etc.
    </>;
}

const App = () => {

    const onFinish = (values: { count: number }) => {
        alert(JSON.stringify(values));
    };

    return <Form onFinish={onFinish} >
        <Form.Item label={'count'} name={'count'} initialValue={0}>
            <CustomFormItem/>
        </Form.Item>
        <Button htmlType='submit' type='primary'>submit</Button>
    </Form>
}

export default App;
```

### What does the proposed API look like?

This is a stripped down version of use case, the actual custom form item component is complex and value of disabled set via Form prop is required for its functionality.

disabled prop value of Form is propagated to form item components through DisabledContextProvider.
However, there is no way to read the status of this value.
Exposing this value through hook or some other way will be useful to render custom form item components accordingly.

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## Wxh16144

In `5.3.0` we added the `ConfigProvider.useConfig()` hook, which allows to get the disabled state.

New feature requests are no longer accepted in 4.x stable. You can get the disabled state from the config-provider/DisabledContext.tsx upline.

Of course, you should upgrade to 5.x for a better experience.

## Wxh16144

4.x online demo https://codesandbox.io/s/antd-reproduction-template-forked-gzth4c?file=/index.js

## divyeshsachan

Hi,

I've already tried it.
es modules is not supported in our app.
Hence imported DisabledContext from "antd/lib/config-provider/DisabledContext";

the value of disabled is always returned as false.

```
import React, { useContext } from "react";
import { createRoot } from "react-dom/client";
import { Button, version, Form } from "antd";
import DisabledContext from "antd/lib/config-provider/DisabledContext";
import "antd/dist/antd.css";
import "./index.css";

import { useState } from "react";

const CustomFormItem = ({ value, onChange }) => {
  const [count, setCount] = useState(value || 0);

  const change = (n) => {
    const newCount = count + n;
    setCount(newCount);
    if (typeof onChange === "function") {
      onChange(newCount);
    }
  };

  const disabled = useContext(DisabledContext); // here
  //console.log("disabled", disabled);

  return (
    <>
      <button type="button" disabled={disabled} onClick={() => change(-1)}>
        -
      </button>
      {count}
      <button type="button" disabled={disabled} onClick={() => change(1)}>
        +
      </button>
    </>
  );
};

const App = () => {
  const onFinish = (values) => {
    alert(JSON.stringify(values));
  };
  return (
    <div className="App">
      <h1>antd version: {version}</h1>
      <Form onFinish={onFinish} disabled={true}>
        <Form.Item label={"count"} name={"count"} initialValue={0}>
          <CustomFormItem />
        </Form.Item>
        <Button htmlType="submit" type="primary">
          submit
        </Button>
      </Form>
    </div>
  );
};

const root = createRoot(document.getElementById("root"));
root.render(<App />);
```

Any solution to this ?

## zombieJ

Check your deps, if confirm that ConfigProvider is from the `lib`, it should be work as expect. Or it's from `es` but with some loader issue. Or using external config which makes client render using different antd module.

As @Wxh16144 said, v4 is in maintain that will not add new feature.
