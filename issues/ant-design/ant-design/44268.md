# defaultExpandAllRows in table does not work when I use async data

`unconfirmed`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/shu-xing-shu-ju-zhan-shi-antd-5-8-3-forked-6khscv?file=/demo.tsx)

### Steps to reproduce

刷新列表没有全部展开

### What is expected?

刷新列表全部展开

### What is actually happening?

没有全部展开

| Environment | Info  |
| ----------- | ----- |
| antd        | 5.8.3 |
| React       | 17-18 |
| System      | mac   |
| Browser     | goole |

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

[FAQ: 当我动态改变 defaultValue 的时候它并没有生效。](https://ant-design.antgroup.com/docs/react/faq-cn#%E5%BD%93%E6%88%91%E5%8A%A8%E6%80%81%E6%94%B9%E5%8F%98-defaultvalue-%E7%9A%84%E6%97%B6%E5%80%99%E5%AE%83%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%94%9F%E6%95%88)

## lihuan-bot

> [FAQ: 当我动态改变 defaultValue 的时候它并没有生效。](https://ant-design.antgroup.com/docs/react/faq-cn#%E5%BD%93%E6%88%91%E5%8A%A8%E6%80%81%E6%94%B9%E5%8F%98-defaultvalue-%E7%9A%84%E6%97%B6%E5%80%99%E5%AE%83%E5%B9%B6%E6%B2%A1%E6%9C%89%E7%94%9F%E6%95%88)

@zombieJ 谢谢！在table中我知道了 但是在Protable中使用request该如何做呢？

## lihuan-bot

const App: React.FC = () => {

    const isMounted = useRef(0)
    const [list, setList] = useState<DataType[]>([]);
    const [loading, setLoading] = useState(false);

    async function getList(idx:number,params?:any) {
      console.log(params)
      setLoading(true)
      await delay();
      setLoading(false)
      setList(data.slice(idx));
      isMounted.current +=1
    }
    useEffect(() => {
    getList(0);


}, []);
return (
<>
{
isMounted.current > 0 && <ProTable
loading={loading}
columns={columns}
expandable={{ defaultExpandAllRows: true }}
dataSource={list}
request={async (params) => {
isMounted.current +=1
if(isMounted.current >2) {
getList(1,params);
}
return Promise.resolve({data:[] });
}}

      />
      }
    </>

);
}

//这样好像可以 感觉有点太low了 主要想用Protable的搜索表单 ！！！麻烦大佬指点一下 谢谢
