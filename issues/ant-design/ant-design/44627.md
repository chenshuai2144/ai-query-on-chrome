# QRCodeäºŒç»´ç ç»„ä»¶æ–‡æ¡£å‚æ•°é”™è¯¯

`ğŸ¤” Need Reproduce`

### Reproduction link

[https://ant-design.antgroup.com/components/qr-code-cn](https://ant-design.antgroup.com/components/qr-code-cn)

### Steps to reproduce

æ ¹æ®APIä¸­çš„iconå±æ€§ï¼ˆicon äºŒç»´ç ä¸­å›¾ç‰‡çš„åœ°å€ï¼ˆç›®å‰åªæ”¯æŒå›¾ç‰‡åœ°å€ï¼‰ string -ï¼‰æ¥è®¾ç½®äºŒç»´ç ä¸­çš„icon

### What is expected?

æ˜¾ç¤ºäºŒç»´ç ä¸­çš„iconå›¾æ ‡

### What is actually happening?

æœªæ˜¾ç¤º

| Environment | Info                                        |
| ----------- | ------------------------------------------- |
| antd        | 5.8.6                                       |
| React       | 17.x                                        |
| System      | windows11                                   |
| Browser     | chrome 116.0.5845.141ï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰ ï¼ˆ64 ä½ï¼‰ |

---

ç»é˜…è¯»æºç å‘ç°è®¾ç½®iconå±æ€§éœ€é€šè¿‡ imageSettings:ImageSettings æ¥è®¾ç½®

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## Wxh16144

https://ant-design.antgroup.com/components/qr-code-cn#qr-code-demo-icon

è¿™æ ·ï¼Ÿ
<img width="591" alt="image" src="https://github.com/ant-design/ant-design/assets/32004925/fac00589-7d19-41c5-8674-2195b6d681aa">

## li-jia-nan

æ²¡å•¥é—®é¢˜å§ï¼Œantd åšäº†ä¸€å±‚å°è£…ï¼Œä¼  `icon` å°±å¯ä»¥äº†ï¼Œåº•å±‚æ˜¯ antd æŠŠ icon ä¼ ç»™äº† `imageSettings.src`

## quitelxd

imageSettings

> æ²¡å•¥é—®é¢˜å§ï¼Œantd åšäº†ä¸€å±‚å°è£…ï¼Œä¼ `icon`å°±å¯ä»¥äº†ï¼Œåº•å±‚æ˜¯ antd æŠŠ icon ä¼ ç»™äº†äº†`imageSettings.src`

æˆ‘åœ¨node_modulesæºç é‡Œé¢å‘ç° `function QRCodeCanvas(props) `è¿™ä¸ªæ–¹æ³•é‡Œé¢æ¥æ”¶çš„å‚æ•°
` const _a = props, {
    value,
    size = DEFAULT_SIZE,
    level = DEFAULT_LEVEL,
    bgColor = DEFAULT_BGCOLOR,
    fgColor = DEFAULT_FGCOLOR,
    includeMargin = DEFAULT_INCLUDEMARGIN,
    style,
    imageSettings
  } = _a, otherProps = __objRest(_a, [
    "value",
    "size",
    "level",
    "bgColor",
    "fgColor",
    "includeMargin",
    "style",
    "imageSettings"
  ]);
  const imgSrc = imageSettings == null ? void 0 : imageSettings.src;`
æ˜¯è¿™æ ·èµ‹å€¼çš„ï¼›çœ‹æ ·å­æ˜¯æ‹¿åˆ°imageSettings.srcèµ‹å€¼çš„ï¼›
åœ¨QRCode ç»„ä»¶ä¸­æ¥æ”¶çš„ props ä¸­å®šä¹‰çš„å‚æ•°ç±»å‹æ˜¯è¿™æ ·çš„
`declare type QRProps = {
    value: string;
    size?: number;
    level?: string;
    bgColor?: string;
    fgColor?: string;
    style?: CSSProperties;
    includeMargin?: boolean;
    imageSettings?: ImageSettings;
};`
æ‰€ä»¥åœ¨æ¥æ”¶çš„æ—¶å€™å¹¶æ²¡æœ‰iconçš„å±æ€§

## quitelxd

> https://ant-design.antgroup.com/components/qr-code-cn#qr-code-demo-icon
>
> è¿™æ ·ï¼Ÿ <img alt="å›¾åƒ" width="591" src="https://user-images.githubusercontent.com/32004925/265595327-fac00589-7d19-41c5-8674-2195b6d681aa.png">

å¯¹ï¼Œæ˜¯è¿™æ ·çš„ï¼ŒæŒ‰ç…§apiè®¾ç½®iconï¼Œåœ¨æˆ‘è¿™é‡Œæ˜¯æ²¡æœ‰æ•ˆæœçš„

## quitelxd

å¹¶ä¸”é€šè¿‡ `imageSettings` è¿™åªiconåœ°å€ï¼Œå‘ç°ä¼šä¸¥é‡å½±å“äºŒç»´ç è¯†åˆ«æ•ˆæœï¼Œåªèƒ½å°†äºŒç»´ç `width`å’Œ`height`è°ƒæ•´å¤§ï¼Œè®¾ç½®`errorLevel="H"`æ•ˆæœä¸å¤§

## Wxh16144

å…ˆçœ‹æç¤ºï¼š
<img width="1211" alt="image" src="https://github.com/ant-design/ant-design/assets/32004925/9a1cc2b8-8b85-4844-bf1b-5f134110c9b5">

å¦å¤–æ ¹æ® issue æè¿°çš„ 5.8.6 ç‰ˆæœ¬æ¥è¯´ï¼Œä½ æä¾›çš„æºç å¯èƒ½ä¸å¤ªå¯¹ï¼Œå»ºè®®é‡æ–°å®‰è£…ä¾èµ–ï¼Œä½ ä¹Ÿå¯ä»¥æ‰“å¼€ https://npmmirror.com/package/antd/files/lib/qr-code/index.js#L58-L66 çœ‹ä¸€ä¸‹è¿™é‡Œçš„äº§ç‰©
