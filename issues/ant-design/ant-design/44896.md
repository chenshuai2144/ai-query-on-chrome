# Antd 组件在 Shadow DOM 中无法正常工作

## 复现步骤

在 PlasmoHQ 的这个代码中使用 Select 组件，并在其中添加一个 Shadow DOM。复现步骤比较复杂，但基本就是 Plasmo 的这个代码加上 Select 组件。

## 期望结果

期望 Select 的下拉选项和 Tooltip 的 title 可以正常显示。

## 实际结果

实际结果是 Select 的下拉选项和 Tooltip 的 title 都无法正常显示。

## 环境信息

| 环境   | 信息            |
| ------ | --------------- |
| antd   | 5.9.1           |
| React  | 18.2.0          |
| 系统   | Macosx          |
| 浏览器 | Chrome 最新版本 |

## 解决方案

为了解决这个问题，我通过配置一个全局的 `getPopupContainer` 在 `ConfigProvider` 中来解决。

```tsx
import { theme } from "antd";
import ConfigProvider from "antd/es/config-provider";
import type { ReactNode } from "react";

export const ThemeProvider = ({ children = null as ReactNode }) => (
  <ConfigProvider
    getPopupContainer={() =>
      document.getElementById("shadow-dom-mount-container")?.shadowRoot as any
    }
  >
    {children}
  </ConfigProvider>
);
```

然后调整 Select 下拉选项弹出框的 z-index，这样就可以正常工作了。
