# setFieldsValue å’Œ setFieldValue åœ¨è®¾ç½®ç©ºå¯¹è±¡æ—¶æ— æ³•ç”Ÿæ•ˆ

`ğŸ› Bug`,`ğŸ‘·ğŸ»â€â™‚ï¸ Someone working on it`

### Reproduction link

[![Edit on CodeSandbox](https://codesandbox.io/static/img/play-codesandbox.svg)](https://codesandbox.io/s/setfieldsvalue-with-empty-object-5-9-2-fkkh4l?file=/demo.tsx:1487-1500)

### Steps to reproduce

ç‚¹å‡» â€set empty objectâ€œ æŒ‰é’®

### What is expected?

é‡ç½®è¡¨å•çš„ â€idâ€œ ã€ â€nameâ€œ å­—æ®µ

### What is actually happening?

æ²¡æœ‰ä»»ä½•æ•ˆæœ

| Environment | Info      |
| ----------- | --------- |
| antd        | 5.9.2     |
| React       | 18        |
| System      | win11     |
| Browser     | Chrome116 |

---

ä½¿ç”¨ setFieldValue å•ç‹¬è®¾ç½®å­—æ®µåŒæ ·æ— æ•ˆ

<!-- generated by ant-design-issue-helper. DO NOT REMOVE -->

## zombieJ

`setFieldsValue` ä¸ºåˆå¹¶æ›´æ–°ï¼Œè¿™æ˜¯é¢„æœŸè¡Œä¸ºã€‚æ„Ÿè§‰å¯ä»¥åŠ ä¸ªé€»è¾‘ï¼Œå¯¹äº `null` çš„åšæ¸…ç†å¤„ç†ã€‚

## kuangshu

> `setFieldsValue` ä¸ºåˆå¹¶æ›´æ–°ï¼Œè¿™æ˜¯é¢„æœŸè¡Œä¸ºã€‚æ„Ÿè§‰å¯ä»¥åŠ ä¸ªé€»è¾‘ï¼Œå¯¹äº `null` çš„åšæ¸…ç†å¤„ç†ã€‚

å•ç‹¬ä½¿ç”¨ setFieldValue å¯¹å­—æ®µè®¾ç½®åŒæ ·æ— æ•ˆï¼Œå¦‚æœè¿™ä¸¤ä¸ªé¢„æœŸéƒ½æ˜¯ merge é‚£è¿™ä¸¤ä¸ª api å°±ä»¥ set å¼€å¤´å°±å¾ˆè¿·æƒ‘ã€‚

## Wxh16144

> å¯¹äº null çš„åšæ¸…ç†å¤„ç†

å…·ä½“æ˜¯å•¥ caseï¼Œå¯å¦ç”±æˆ‘æ¥è¯•è¯•

## zombieJ

> å•ç‹¬ä½¿ç”¨ setFieldValue å¯¹å­—æ®µè®¾ç½®åŒæ ·æ— æ•ˆï¼Œå¦‚æœè¿™ä¸¤ä¸ªé¢„æœŸéƒ½æ˜¯ merge é‚£è¿™ä¸¤ä¸ª api å°±ä»¥ set å¼€å¤´å°±å¾ˆè¿·æƒ‘ã€‚

å½“å­˜åœ¨ `{ a: 111, b: 888, user: { name: 222, age: 333 } }` æ—¶ï¼Œ`setFieldsValue({ user: { name: 4, age: 5 } })` å¦‚æœå½“åšçº¯è®¾ç½®å°±æˆäº†ç§»é™¤ `a` `b`ï¼Œè¿™åè€Œä¼šä¸ç¬¦åˆé¢„æœŸï¼Œå…¶å®æ˜¯ä¸€ä¸ªé€‰æ‹©é—®é¢˜ã€‚

## zombieJ

æµ‹è¯•äº†ä¸€ä¸‹ï¼Œç°åœ¨ä¹Ÿæ˜¯è¿™ä¸ªè¡Œä¸ºã€‚è¿™ä¸ª issue æ˜¯ä¸ªå¤åˆé—®é¢˜ï¼š

1. Form çš„ç¡®æ˜¯é‡ç½®äº†å€¼ï¼Œå°†å­—æ®µçš„ `value` å˜æˆäº† `undefined`
2. Input çš„ `value` å˜æˆ `undefined` å…¶å®æ˜¯ä»å—æ§å˜æˆäº†éå—æ§ï¼Œæ‰€ä»¥å®ƒçš„ `value` å˜äº†ä½†æ˜¯å±•ç¤ºå€¼æ²¡æœ‰å˜ã€‚è¿™é‡Œç›´æ¥ HOC ä¸€ä¸‹å¼ºåˆ¶ä¸ºå—æ§å³å¯ã€‚
3. `setFieldValue` æœ¬èº«æ²¡æœ‰è§¦å‘ç»„ä»¶çš„æ›´æ–°ï¼Œæ˜¯ä¸ª bug

ref: https://codesandbox.io/s/setfieldsvalue-with-empty-object-5-9-2-forked-jsk72c?file=/demo.tsx
