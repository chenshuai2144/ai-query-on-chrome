# ğŸ§ [é—®é¢˜] ProLayout å¦‚ä½•å…³é—­ location.pathname åŒ¹é…ï¼ŒparentKeys åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ç”Ÿæ•ˆ

## ğŸ§ é—®é¢˜æè¿°

é€šè¿‡åå°è·å–çš„åŠ¨æ€èœå•ï¼Œèœå•æ ¼å¼ï¼š

```javascript
{
  path: "/a";
  children: [
    { path: "/a/b", parentKeys: ["/a"] },
    { path: "/a/b/c", parentKeys: ["/a"] },
  ];
}
```

å½“é€‰ä¸­ `/a/b/c` æ—¶ `/a/b` ä¹Ÿä¼šé€‰ä¸­ï¼Œè¿˜æ˜¯ä¼šè¿›è¡Œ pathname åŒ¹é…ã€‚

å› ä¸ºèœå•æ˜¯åå°åŠ¨æ€æ§åˆ¶çš„ï¼Œå¸Œæœ›å¯ä»¥éšæ„è°ƒæ•´å±‚çº§çš„æƒ…å†µä¸‹ path ä¸æ”¹å˜ã€‚

## kids-return

é€šè¿‡ `selectedKeys` å’Œ `openKeys` æ¥è¿›è¡Œå—æ§é…ç½®ã€‚

## kids-return

ä½¿ç”¨çš„æ˜¯ v5 "@ant-design/pro-layout": "^6.4.19"ã€‚

```js
export const layout = ({
  initialState,
}: {
  initialState: {
    settings?: LayoutSettings;
    currentUser?: API.CurrentUser;
    menus?: any; // åº”è¯¥æ˜¯ MenuDataItem[]
  };
}): BasicLayoutProps => {
  console.log('app.initialState', initialState);
  return {
    rightContentRender: () => <RightContent />,
    disableContentMargin: false,
    footerRender: () => <Footer />,
    onPageChange: () => {
      const { currentUser } = initialState;
      const { location } = history;
      // å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œé‡å®šå‘åˆ° login
      if (!currentUser && location.pathname !== '/user/login') {
        history.push('/user/login');
      }
    },
    menuHeaderRender: undefined,
    menuDataRender: (): MenuDataItem[] => {
      const { menus } = initialState;
      return menus;
    },
    ...initialState?.settings,
  };
};
```

## kids-return

`selectedKeys` å’Œ `openKeys` æ˜¯ç”¨æ¥å—æ§é…ç½®èœå•çš„ï¼Œå¦‚æœä¸éœ€è¦å—æ§é…ç½®ï¼Œå¯ä»¥è®¾ç½®ä¸º `undefined`ã€‚

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return
