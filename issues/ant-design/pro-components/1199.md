# 🧐 [问题] ProLayout 如何关闭 location.pathname 匹配，parentKeys 在什么情况下生效

## 🧐 问题描述

通过后台获取的动态菜单，菜单格式：

```javascript
{
  path: "/a";
  children: [
    { path: "/a/b", parentKeys: ["/a"] },
    { path: "/a/b/c", parentKeys: ["/a"] },
  ];
}
```

当选中 `/a/b/c` 时 `/a/b` 也会选中，还是会进行 pathname 匹配。

因为菜单是后台动态控制的，希望可以随意调整层级的情况下 path 不改变。

## kids-return

通过 `selectedKeys` 和 `openKeys` 来进行受控配置。

## kids-return

使用的是 v5 "@ant-design/pro-layout": "^6.4.19"。

```js
export const layout = ({
  initialState,
}: {
  initialState: {
    settings?: LayoutSettings;
    currentUser?: API.CurrentUser;
    menus?: any; // 应该是 MenuDataItem[]
  };
}): BasicLayoutProps => {
  console.log('app.initialState', initialState);
  return {
    rightContentRender: () => <RightContent />,
    disableContentMargin: false,
    footerRender: () => <Footer />,
    onPageChange: () => {
      const { currentUser } = initialState;
      const { location } = history;
      // 如果没有登录，重定向到 login
      if (!currentUser && location.pathname !== '/user/login') {
        history.push('/user/login');
      }
    },
    menuHeaderRender: undefined,
    menuDataRender: (): MenuDataItem[] => {
      const { menus } = initialState;
      return menus;
    },
    ...initialState?.settings,
  };
};
```

## kids-return

`selectedKeys` 和 `openKeys` 是用来受控配置菜单的，如果不需要受控配置，可以设置为 `undefined`。

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return

## kids-return
