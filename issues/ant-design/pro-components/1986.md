# form 使用 syncToUlr 在 reset 时无法清除数据🐛[BUG]

`⭕️   bug`,`form`,`👏🏻  Welcome pr`

### 🐛 bug 描述

https://procomponents.ant.design/~demos/form-sync-to-url-1?useMode=chapter&startTime=2021-02-25&endTime=2021-03-25&name=%E8%9A%82%E8%9A%81%E8%AE%BE%E8%AE%A1%E6%9C%89%E9%99%90%E5%85%AC%E5%8F%B8

### 📷 复现步骤

点击上诉链接进入 页面 点击 重置按钮 时间数据无法清空

## chenshuai2144

这个有点不好处理，表单不知道该删除哪些数据

## anewcoder1992

> 这个有点不好处理，表单不知道该删除哪些数据

这个同步url 功能感觉做在表单组件并不是很合理 毕竟使用场景基本是table才存在。
我这边写了一个 将 url 同步的功能 在table中实现，能够解决这个bug,我提个pr #2006 看是否可行，这边已经在本地demo 中测试过了.
目前我暂时只实现了 查询字段的同步，sort 和pagination的信息应该也是可以实现的。可进一步解决 #1234 的问题

## JunlinZhu-Tommy

我在有`ProFormDateRangePicker`的表单里面使用reset时也遇到了同样的问题，例如:
`ProFormDateRangePicker`的`name` 为: dateRange
但是需要同步到url上的字符串通常为: `startDate`, `endDate`分别指向`dateRange`里面的开始时间。

在使用`onFinish`时调用[`syncToUrl`](https://github.com/ant-design/pro-components/blob/master/packages/form/src/BaseForm/index.tsx#L220)钩子可以自定义同步到url上面的内容。

但是在`onReset`时，当有用户定义的`syncToUrl`时，确只是[用了表单ref清空后的fieldsValue](https://github.com/ant-design/pro-components/blob/master/packages/form/src/BaseForm/index.tsx#L138)。

是否可以在onReset里面也调用`setUrlSearch(genParams(syncToUrl, params, 'set'));` 当 `typeof syncToUrl === 'function'` 时。

这个需求刚好是我这周的一个kpi哈哈。

@chenshuai2144

## chenshuai2144

欢迎来个 pr

## JunlinZhu-Tommy

I will.

## gxb1998

<img width="419" alt="image" src="https://user-images.githubusercontent.com/52820524/223080791-538b55b0-7671-4b0f-8f76-69f53c552d0f.png">
设置syncToInitialValues false
