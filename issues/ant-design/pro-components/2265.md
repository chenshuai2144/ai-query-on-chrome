# ğŸ›[BUG] ProTable & EditableProTable æ ‘å½¢ç»“æ„ä¸‹ç¼–è¾‘é¡¶å±‚æ•°æ®é‡æ–°reload()ä»¥åï¼Œå¦‚æœæ•°æ®é¡ºåºå˜æ›´ä¼šå¯¼è‡´Table æ•°æ®é‡å¤

`AI Reply`

### ğŸ› bug

    ProTable å’Œ EditableProTable ç»„ä»¶ï¼Œæ•°æ®ï¼ˆ10æ¡ï¼‰ä¸ºæ ‘å½¢ç»“æ„ï¼Œ ç¼–è¾‘ä¸€çº§æ•°æ®ï¼ˆæœ€é¡¶å±‚çš„æ•°æ®ï¼‰æˆåŠŸå tableRef.current.cancelEditable(key)  &  reloadAndRest()ï¼Œæ­¤æ—¶å¦‚æœæ¥å£è¿”å›æ•°æ®ï¼ˆ10æ¡ï¼‰é¡ºåºå‘ç”Ÿå˜æ›´ã€‚åˆ™ç¼–è¾‘çš„è¡Œä¼šç•™åœ¨Tableå†…ï¼Œreload å‡ºçš„æ–°æ•°æ®ä¹Ÿä¼šç•™åœ¨Tableå†…ï¼Œå¯¼è‡´ä¸€ä¸ªTableå†…å‡ºç° 2è¡Œ ä¸€æ ·çš„æ•°æ®ï¼ˆå…±è®¡11æ¡æ•°æ®ï¼‰ã€‚

### ğŸ“· å¤ç°æ­¥éª¤

1ã€æ ‘å½¢ç»“æ„çš„æ•°æ®ä»¥åŠTable
2ã€ç¼–è¾‘ä¸€çº§æ•°æ®ï¼Œå³Tableæœ€é¡¶å±‚çš„æ•°æ®ã€‚
3ã€ç¼–è¾‘æˆåŠŸåï¼ŒcancelEditable(key) & reloadAndRest() æ¥å£è¿”å›çš„æ–°æ•°æ®é¡ºåºå˜æ›´ã€‚

### ğŸ æœŸæœ›ç»“æœ

é‡æ–°reloadAndRest() ä»¥åï¼Œç¼–è¾‘çš„è¡Œï¼Œä¸åº”è¯¥å†å‡ºç°åœ¨Tableä¸­ï¼Œè€Œæ˜¯ç”±æ–°æ•°æ®å…¨éƒ¨é‡æ–°æ¸²æŸ“è¦†ç›–ã€‚

### Â© ç‰ˆæœ¬ä¿¡æ¯

- @ant-design/pro-table@2.30.6
- umi ç‰ˆæœ¬
- Chrome
- win 10

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

### ğŸ’¡ è§£å†³æ–¹æ¡ˆ

æ ¹æ®æè¿°ï¼Œå¯ä»¥å°è¯•å…ˆæ¸…ç©º Table å†…å·²æ‹¥æœ‰çš„æ•°æ®ï¼Œå†é€šè¿‡ reloadAndRest() é‡æ–°åŠ è½½æ•°æ®ã€‚

å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

1. åœ¨ Table ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ rowKey å±æ€§æŒ‡å®šå”¯ä¸€æ ‡è¯†ç¬¦ï¼š
   ```
   <ProTable rowKey="id" ... />
   ```
2. ç¼–è¾‘æˆåŠŸåï¼Œå…ˆé€šè¿‡ `tableRef.current.clearSelectedAndRest()` æ¸…ç©º Table å†…å·²é€‰æ‹©çš„æ•°æ®ï¼Œå¹¶é‡ç½®çŠ¶æ€ã€‚
3. å†é€šè¿‡ `tableRef.current.clear()â€™` æ¸…ç©º Table å†…å·²æ¸²æŸ“çš„æ•°æ®ã€‚

4. æœ€åè°ƒç”¨ `tableRef.current.reloadAndRest()` é‡æ–°åŠ è½½æ•°æ®ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```
const tableRef = useRef();

<ProTable
  rowKey="id"
  ... //å…¶ä»–å±æ€§çœç•¥
  editable={{
    editableKeys,
    onSave: async (key, row) => {
      try {
        await saveRow(key, row);
        message.success('ä¿å­˜æˆåŠŸ');
        tableRef.current.cancelEditable(key);
        tableRef.current.clearSelectedAndRest();
        tableRef.current.clear(); //æ¸…ç©ºå·²æ¸²æŸ“æ•°æ®
        tableRef.current.reloadAndRest();
      } catch (err) {
        message.error('ä¿å­˜å¤±è´¥');
      }
    },
  }}
  tableRef={tableRef}
/>
```

### ğŸ“š å‚è€ƒæ–‡æ¡£

- [ProTable API - tableRef](https://protable.ant.design/api#tableref)

## chenshuai2144

ä¸€èˆ¬éƒ½æ˜¯keyé‡å¤å¯¼è‡´çš„
