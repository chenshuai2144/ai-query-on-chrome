# ğŸ§[é—®é¢˜]ProFormSelect showSearchæ—¶ requstæ–¹æ³•å¦‚ä½•åšåˆ°é˜²æŠ–ï¼Ÿ

`ğŸ“¦  Need to reproduce`

### ğŸ§ é—®é¢˜æè¿°

1.  requst å¦‚ä½•åšåˆ°é˜²æŠ–ï¼Ÿ
2.  requst è¿”å›æ–°æ•°ç»„åoptionä¸æ›´æ–°

### ğŸ’» ç¤ºä¾‹ä»£ç 

```js
<ProFormSelect
  label="xxx"
  showSearch
  request={lodash.debounce(async ({ keyWords }) => {
    if (!keyWords) return [];
    const res = await queryStaff({ keyword: keyWords });
    if (res.status === 200) {
      console.log(res.data.map(({ name, id }) => ({ label: name, value: id })));
      return res.data.map(({ name, id }) => ({ label: name, value: id }));
    }
    return [];
  })}
/>
```

## jiyingzhi

é˜²æŠ–å°±ç”¨ä½ è¿™ä¸ªæ–¹æ³•æ˜¯å¯ä»¥çš„

## mouthguo

ç¤ºä¾‹ä»£ç æ²¡æœ‰è®¾ç½® wait å“¦ï¼Œå‚è€ƒä¸‹[æ–‡æ¡£](https://lodash.com/docs/4.17.15#debounce)é»˜è®¤å€¼ä¸º 0 çš„ã€‚

> request è¿”å›æ–°æ•°ç»„å option ä¸æ›´æ–°

è¿™ä¸ªçœ‹äº†ä¸‹ï¼Œå¤±å»ç„¦ç‚¹å†å‡ºç°çš„æ—¶å€™ï¼Œæœ‰äº†ï¼Œå¥½åƒæ˜¯ bug

## chenshuai2144

ä¸ä¼šå®æ—¶åˆ·æ–°æ˜¯å—ï¼Ÿ

## mouthguo

å—¯ï¼Œè¯·æ±‚ç»“æœæ²¡æœ‰å®æ—¶å‡ºç°åœ¨ä¸‹æ‹‰æ¡†é‡Œé¢ã€‚

## oxygen-xx

@chenshuai2144 è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿå‘ç°äº†ï¼Œæ€»ä¹‹æ˜¯é€šè¿‡æŸ¥è¯¢æ›´æ–°optionsï¼Œä¸‹æ‹‰æ¡†æ²¡æœ‰æ›´æ–°ï¼Œéœ€è¦å¤±å»ç„¦ç‚¹ï¼Œå†å¾—åˆ°ç„¦ç‚¹çš„æ—¶å€™ï¼Œæ•°æ®æ‰ä¼šåˆ·æ–°å‡ºæ¥ã€‚

## chenshuai2144

è¿™ä¸ªä¹Ÿæ˜¯æ²¡æœ‰å¤ç°ï¼Œæˆ‘æäº†ä¸ªdemoï¼Œå‘ç°æ•ˆæœè¿˜æ˜¯å¯ä»¥çš„ï¼Œæ¥ä¸ªé‡ç°å§

## lucoxlee

åŒæ±‚,å¯ä»¥å…ˆæ··ç”¨,åç­‰æ›´æ–°

```
const handleAppSearch = Debounce(async (name: string) => {
    const res = await appList({name});
    setAppListData(res.data);
}, 800)

<ModalForm
  width={300}
  title="æ–°å»º"
  formRef={formRef}
  visible={modalVisible}
  onVisibleChange={visible => {
    if (visible === modalVisible) {
      return;
    }
    handleModalVisible(visible);
  }}
  onFinish={okHandle}
>
  <Form.Item
    name="appId"
    label="app"
    rules={[{required: true, message: 'è¯·é€‰æ‹©app'}]}
  >
    <Select
      showSearch
      placeholder={"è¯·è¾“å…¥APPåç§°æˆ–CODE"}
      defaultActiveFirstOption={false}
      showArrow={false}
      filterOption={false}
      onSearch={handleAppSearch}
      notFoundContent={null}
      style={{width: "100%"}}
    >
      {
        appListData.map(item => <Select.Option key={item.id} value={item.id!}>{item.name}</Select.Option>)
      }
    </Select>
  </Form.Item>
  <ProForm.Group>
    <ProFormText name="name" width={"md"} label="åç§°" placeholder="è¯·è¾“å…¥åç§°"
                 rules={[{required: true, message: "è¯·è¾“å…¥ï¼", min: 1}]} />
  </ProForm.Group>
</ModalForm>
```

## MonsterTan

> @chenshuai2144 è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿå‘ç°äº†ï¼Œæ€»ä¹‹æ˜¯é€šè¿‡æŸ¥è¯¢æ›´æ–°optionsï¼Œä¸‹æ‹‰æ¡†æ²¡æœ‰æ›´æ–°ï¼Œéœ€è¦å¤±å»ç„¦ç‚¹ï¼Œå†å¾—åˆ°ç„¦ç‚¹çš„æ—¶å€™ï¼Œæ•°æ®æ‰ä¼šåˆ·æ–°å‡ºæ¥ã€‚

@chenshuai2144 å‘ç°+1ã€‚ ä¹Ÿæ˜¯é€šè¿‡requestå»è¯·æ±‚è·å–æ•°æ®ï¼Œç¬¬ä¸€æ¬¡èƒ½è·å–okã€‚ä½†æ˜¯å½“è¾“å…¥åï¼Œå¯ä»¥å‘ç°ç»™åç«¯è¯·æ±‚å¹¶æˆåŠŸè¿”å›ï¼Œä½†æ˜¯selectæ¡†å¹¶æ²¡æœ‰ç­›é€‰åçš„æ•°æ®.

## jzsn2018

> > @chenshuai2144 è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿå‘ç°äº†ï¼Œæ€»ä¹‹æ˜¯é€šè¿‡æŸ¥è¯¢æ›´æ–°optionsï¼Œä¸‹æ‹‰æ¡†æ²¡æœ‰æ›´æ–°ï¼Œéœ€è¦å¤±å»ç„¦ç‚¹ï¼Œå†å¾—åˆ°ç„¦ç‚¹çš„æ—¶å€™ï¼Œæ•°æ®æ‰ä¼šåˆ·æ–°å‡ºæ¥ã€‚
>
> @chenshuai2144 å‘ç°+1ã€‚ ä¹Ÿæ˜¯é€šè¿‡requestå»è¯·æ±‚è·å–æ•°æ®ï¼Œç¬¬ä¸€æ¬¡èƒ½è·å–okã€‚ä½†æ˜¯å½“è¾“å…¥åï¼Œå¯ä»¥å‘ç°ç»™åç«¯è¯·æ±‚å¹¶æˆåŠŸè¿”å›ï¼Œä½†æ˜¯selectæ¡†å¹¶æ²¡æœ‰ç­›é€‰åçš„æ•°æ®.

åŒæ ·çš„é—®é¢˜+1,è¯·é—®ä½ è§£å†³äº†å—?

## qiangxinglin

+1

## weiqishang

åŒé—®ï¼Œå·²ç»å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œè¿˜æ˜¯æ²¡è§£å†³

## DenseW

optionsæ²¡æœ‰æ›´æ–°çš„åŸå› æ˜¯å› ä¸ºç”¨äº†lodash.debounceæ–¹æ³•ï¼Œreturnæœ‰é—®é¢˜ï¼Œç›´æ¥é…ç½®debounceTime={æ¯«ç§’}å°±å¯ä»¥å®ç°optionsæ›´äº†ï¼Œä¸”èƒ½é˜²æŠ–
![image](https://github.com/ant-design/pro-components/assets/46704005/8dcd8a6e-57c6-42f1-8548-ce26ddef535c)
