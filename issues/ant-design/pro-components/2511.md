# ğŸ›[BUG] ProLayout å½“çˆ¶çº§èœå•ä¸å­èœå•ç›¸ä¼¼åŒ¹é…æ—¶ï¼Œèœå•é€‰ä¸­å¤šä¸ª

### ğŸ› bug æè¿°

è§ [å¤ç°ä»£ç ](https://codesandbox.io/s/pro-layout-menu-bug-z42gr) èœå•: `Project`, `Setting > Members` è¢«é€‰ä¸­.
è°ƒè¯•æŸ¥çœ‹ `<Menu />` ç»„ä»¶ `selectedKeys` å±æ€§å€¼ä¸åº”è¯¥æ˜¯ `["/project","/project/setting/members"]`.

```
  const menus = [
    {
      path: "/project",  // çˆ¶èœå•é“¾æ¥
      exact: true,
      name: "Project"
    },
    {
      name: "Setting",
      children: [
        {
          name: "Members",
          path: "/project/setting/members",  // å­èœå•é“¾æ¥
          exact: true
        },
        {
          name: "Roles",
          path: "/project/setting/roles",
          exact: true
        }
      ]
    }
  ];
```

```
<Menu selectedKeys={["/project","/project/setting/members"]} ... />
```

### ğŸ“· å¤ç°æ­¥éª¤

https://codesandbox.io/s/pro-layout-menu-bug-z42gr

### ğŸ æœŸæœ›ç»“æœ

https://github.com/ant-design/pro-components/blob/master/packages/layout/src/BasicLayout.tsx#L327-L329

`matchMenus` å€¼åº”è¯¥åªæœ‰ `"/project/setting/members"`.

```
<Menu selectedKeys={["/project/setting/members"]} ... />
```

### ğŸ’» å¤ç°ä»£ç 

https://codesandbox.io/s/pro-layout-menu-bug-z42gr

### Â© ç‰ˆæœ¬ä¿¡æ¯

- @ant-design/pro-layout: 6.16.2

### ğŸš‘ å…¶ä»–ä¿¡æ¯

![image](https://user-images.githubusercontent.com/2050694/114900690-b49cb400-9e46-11eb-92eb-c5b40862281e.png)

## Moln

å…¶å®ƒç±»ä¼¼é—®é¢˜: #1001 #1002

## chenshuai2144

è¿™ä¸ªæ˜¯featrueï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡è·¯å¾„çš„ç›¸å…³æ€§æ¥è®¡ç®—é€‰ä¸­çš„ã€‚æˆ‘è§‰å¾—ä½ çš„èœå•è®¾ç½®æ˜¯æœ‰é—®é¢˜çš„ã€‚
/project åº”è¯¥æ˜¯ project/home ä¹‹ç±»çš„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¶…çº§å¤§çš„çˆ¶äº²æœ€ä¸ºå¹³çº§èŠ‚ç‚¹ã€‚

å½“ç„¶ä¹Ÿæ˜¯æœ‰è§£å†³åŠæ³•çš„ï¼Œå°±æ˜¯è®¾ç½®ä¸åŒçš„keyï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆä½¿ç”¨key

## oyhk

@chenshuai2144 å…·ä½“ä»£ç æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆæˆ‘åŠ äº†keyè¿˜æ˜¯ä¼šé€‰ä¸­å¤šä¸ªèœå•

## oyhk

@chenshuai2144 ä»£ç å¦‚ä¸‹ï¼Œéº»çƒ¦æŒ‡å¯¼ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªèœå•æ˜¯å¹³çº§çš„ï¼Œä½†æ˜¯111æ˜¯ä»£è¡¨ä¸€ä¸ªåŠ¨æ€id

```
    {
      name: 'å·¥ä½œå°',
      path: '/111',
      component: '@/pages/index',
      key:'workbench',
      exact:true,
    },
    // èœå“ç®¡ç†
    {
      name: 'èœå“ç®¡ç†',
      path: '/111/dishes',
      component: '@/pages/dishes/dishesIndex',
      access: 'role',
      exact:true,
      key:'dishes',
    },
```

## chenshuai2144

è°ƒæ¢ä¸€ä¸‹é¡ºåºå‘¢ï¼Ÿ

## oyhk

@chenshuai2144 è¯•è¿‡äº†

## chenshuai2144

èƒ½ç»™ä¸ªä»“åº“å—ï¼Ÿ æˆ‘debugä¸€ä¸‹ç®—æ³•

## oyhk

@chenshuai2144 æš‚æ—¶æ²¡æœ‰

## cuijiudai

> è¿™ä¸ªæ˜¯featrueï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡è·¯å¾„çš„ç›¸å…³æ€§æ¥è®¡ç®—é€‰ä¸­çš„ã€‚æˆ‘è§‰å¾—ä½ çš„èœå•è®¾ç½®æ˜¯æœ‰é—®é¢˜çš„ã€‚ /project åº”è¯¥æ˜¯ project/home ä¹‹ç±»çš„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè¶…çº§å¤§çš„çˆ¶äº²æœ€ä¸ºå¹³çº§èŠ‚ç‚¹ã€‚
>
> å½“ç„¶ä¹Ÿæ˜¯æœ‰è§£å†³åŠæ³•çš„ï¼Œå°±æ˜¯è®¾ç½®ä¸åŒçš„keyï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆä½¿ç”¨key

èƒ½å…³æ‰è¿™ä¸ªfeature å—ï¼Œä¸Šä¸‹çº§åº”è¯¥æ ¹æ®routes çš„åµŒå¥—æ¥ç¡®å®šã€‚è®¾ç½®äº†keyï¼Œæ²¡æœ‰ä½œç”¨

## cuijiudai

@oyhk å®ç°å‡ºæ¥äº†å—ï¼Ÿ
