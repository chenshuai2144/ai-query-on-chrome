# ğŸ‘‘ [éœ€æ±‚] å¯ä»¥ä¸å¼•å…¥ @import '~antd/es/style/themes/default.less'; å—ï¼Ÿå› ä¸ºä¼šè¦†ç›–é¡¹ç›®ä¸­çš„æ ·å¼

### ğŸ¥° éœ€æ±‚æè¿°

emmmï¼Œå…¬å¸å†…éƒ¨åŸºäºantdè‡ªå·±å°è£…äº†ç»„ä»¶åº“ï¼Œç„¶åå¼•å…¥å¯ç¼–è¾‘è¡¨æ ¼ç»„ä»¶çš„æ—¶å€™ä¼šå¯¹æ ·å¼äº§ç”Ÿå½±å“

<!--
è¯¦ç»†åœ°æè¿°éœ€æ±‚ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ§ è§£å†³æ–¹æ¡ˆ

å°†ä½ çš„å·¥ç¨‹ç›´æ¥å¼•è¿›æ¥ï¼Œç„¶åä¸€ç‚¹ç‚¹æ”¹ã€‚ã€‚ä½†æ˜¯åç»­çš„ç»´æŠ¤å’Œè¿­ä»£å°±ä¸æ–¹ä¾¿äº†

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## mtrucc

emmmï¼Œæˆ‘æƒ³ç€æ˜¯ä¸æ˜¯å¯ä»¥ä¼ å…¥å‚æ•°ï¼ŒæŒ‰éœ€å¼•å…¥æ ·å¼ï¼Ÿè¿™ä¸ªæ„Ÿè§‰æ”¹åŠ¨æ¯”è¾ƒå¤§

## mtrucc

- [additionaldata](https://webpack.docschina.org/loaders/less-loader/#additionaldata)
  å„ä½æˆ‘è§£å†³äº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•å»åˆ¤æ–­æ˜¯ä¸æ˜¯antdæ–‡ä»¶ï¼Œç„¶åå–æ¶ˆå¯¹antdçš„lessæ–‡ä»¶çš„å¼•å…¥ã€‚

```
              additionalData: (content, loaderContext) => {
                // æ›´å¤šå¯ç”¨çš„å±æ€§è§ https://webpack.js.org/api/loaders/
                const { resourcePath, rootContext } = loaderContext;
                const relativePath = path.relative(rootContext, resourcePath);

                if (relativePath === "styles/foo.less") {
                  return "@value: 100px;" + content;
                }

                return "@value: 200px;" + content;
              },
```

## NT-RX0

@chenshuai2144 è¿™ä¸ªæˆ‘å»ºè®® pro-components è¿˜æ˜¯å¤„ç†ä¸€ä¸‹ï¼Œå–æ¶ˆå¯¹æ ·å¼çš„é»˜è®¤å¼•å…¥ï¼Œåƒ antd ä¸€æ ·æ‰‹åŠ¨å¼•å…¥ã€‚ç›®å‰è¿™æ ·ï¼Œä¸»é¢˜å®é™…ä¸Šæ— æ³•é€šè¿‡ less å˜é‡è‡ªå®šä¹‰ï¼Œhack ä¹Ÿå¤ªä¸æ–¹ä¾¿äº†ã€‚

## NT-RX0

åœ¨ dumi çš„ .umirc.ts å°è¯•é…ç½®äº†ï¼Œå¹¶æ²¡æœ‰ç”Ÿæ•ˆ

```tsx
lessLoader: {
  additionalData: (content, loaderContext) => {
    // æ›´å¤šå¯ç”¨çš„å±æ€§è§ https://webpack.js.org/api/loaders/
    const { resourcePath, rootContext } = loaderContext;
    const relativePath = path.relative(rootContext, resourcePath);
    console.log(resourcePath)

    if (/@ant-design\/pro-form\/lib\/index.less/.test(resourcePath)) {
      return ''
    } else {
      return content
    }
  },
},
```

console ä¸ŠåŠ äº†æ–­ç‚¹ï¼Œdebug å¯åŠ¨ç¼–è¯‘æ—¶ä¹Ÿä¸ä¼šåœ¨æ–­ç‚¹ä¸­æ–­ï¼Œç›®æµ‹æ˜¯é…ç½®æ²¡æœ‰æ‰§è¡Œï¼Œä½†å¹¶åˆ—çš„ modifyVars é¡¹ç”Ÿæ•ˆäº†
dumi@^1.1.23

## dimsky

> @chenshuai2144 è¿™ä¸ªæˆ‘å»ºè®® pro-components è¿˜æ˜¯å¤„ç†ä¸€ä¸‹ï¼Œå–æ¶ˆå¯¹æ ·å¼çš„é»˜è®¤å¼•å…¥ï¼Œåƒ antd ä¸€æ ·æ‰‹åŠ¨å¼•å…¥ã€‚ç›®å‰è¿™æ ·ï¼Œä¸»é¢˜å®é™…ä¸Šæ— æ³•é€šè¿‡ less å˜é‡è‡ªå®šä¹‰ï¼Œhack ä¹Ÿå¤ªä¸æ–¹ä¾¿äº†ã€‚

+1

## Wang-yubo

> @chenshuai2144 è¿™ä¸ªæˆ‘å»ºè®® pro-components è¿˜æ˜¯å¤„ç†ä¸€ä¸‹ï¼Œå–æ¶ˆå¯¹æ ·å¼çš„é»˜è®¤å¼•å…¥ï¼Œåƒ antd ä¸€æ ·æ‰‹åŠ¨å¼•å…¥ã€‚ç›®å‰è¿™æ ·ï¼Œä¸»é¢˜å®é™…ä¸Šæ— æ³•é€šè¿‡ less å˜é‡è‡ªå®šä¹‰ï¼Œhack ä¹Ÿå¤ªä¸æ–¹ä¾¿äº†ã€‚

> - [additionaldata](https://webpack.docschina.org/loaders/less-loader/#additionaldata)
>   å„ä½æˆ‘è§£å†³äº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•å»åˆ¤æ–­æ˜¯ä¸æ˜¯antdæ–‡ä»¶ï¼Œç„¶åå–æ¶ˆå¯¹antdçš„lessæ–‡ä»¶çš„å¼•å…¥ã€‚
>
> ```
>               additionalData: (content, loaderContext) => {
>                 // æ›´å¤šå¯ç”¨çš„å±æ€§è§ https://webpack.js.org/api/loaders/
>                 const { resourcePath, rootContext } = loaderContext;
>                 const relativePath = path.relative(rootContext, resourcePath);
>
>                 if (relativePath === "styles/foo.less") {
>                   return "@value: 100px;" + content;
>                 }
>
>                 return "@value: 200px;" + content;
>               },
> ```

æ¥¼ä¸»èƒ½è´´ä¸€ä¸‹ä½ è¿™é‡Œçš„é…ç½®å˜›ï¼Ÿæˆ‘ä¹Ÿç”¨äº†ä½†æ˜¯æ²¡ç”Ÿæ•ˆ~~

## LolipopJ

å¯¹äº Umi 3.x é¡¹ç›®ï¼Œå¯ä»¥è¿™æ ·è§£å†³ï¼š

```bash
yarn add -D babel-plugin-transform-remove-imports
```

é€šè¿‡ babel æ’ä»¶ `transform-remove-imports` ç§»é™¤ `@ant-design/*` ä¸­ç»„ä»¶å¯¹ antd æ ·å¼çš„å¼•å…¥ï¼š

```ts
// config/config.ts
import path from "path";

return {
  extraBabelIncludes: [
    // ä»…å¤„ç† @ant-design ç›®å½•ä¸‹çš„ä¾èµ–åº“
    path.resolve("/node_modules/@ant-design"),
  ],
  extraBabelPlugins: [
    [
      "transform-remove-imports",
      {
        test: /(.*)antd\/es\/(.*)\/style(.*)/,
      },
      "antd-style-clear",
    ],
  ],
};
```
