# Antd ProTable æ•°æ®é‡å¹¶ä¸å¤§ï¼Œæ˜¾ç¤ºçš„å­—æ®µæ¯”è¾ƒå¤šï¼Œæœ‰11ä¸ªï¼Œæ˜¾ç¤ºæ•°æ®çš„é€Ÿåº¦æ…¢ï¼Œéœ€è¦2så·¦å³

`â­•ï¸   bug`,`table`

### ğŸ§ é—®é¢˜æè¿°

Antd ProTable æ•°æ®é‡å¹¶ä¸å¤§ï¼Œä½†æ˜¯åŠ è½½é€Ÿåº¦æ…¢ï¼Œéœ€è¦2-3s
å¹¶ä¸æ˜¯æ¥å£çš„é—®é¢˜ï¼Œæ¥å£æµ‹é€Ÿåªéœ€è¦300ms
è€Œä¸”å‹¾é€‰çš„æ—¶å€™ä¹Ÿå‡ºç°äº†å¡é¡¿
æˆ‘ç”¨Antd Tableè‡ªå·±å°è£…äº†ä¸€ä¸ªåŠŸèƒ½ä¸€æ¨¡ä¸€æ ·çš„ç»„ä»¶ï¼Œå‡ ä¹ç§’æ˜¾ã€‚ã€‚ã€‚
è¯·é—®å¤§å®¶æœ‰å•¥å¯ä»¥ä¼˜åŒ–çš„æ–¹æ³•å—

### ğŸ’» ç¤ºä¾‹ä»£ç 

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

pro-table é‡Œé¢æœ‰ä¸ªå»æŠ–ï¼Œå¯¼è‡´è‡³å°‘éœ€è¦ 200ms æ‰æ˜¾ç¤º

## bingo618

> pro-table é‡Œé¢æœ‰ä¸ªå»æŠ–ï¼Œå¯¼è‡´è‡³å°‘éœ€è¦ 200ms æ‰æ˜¾ç¤º

å¯ä»¥é…ç½®å»æ‰200mså»¶è¿Ÿå—ï¼ŸProTableå¸ƒå±€æŒºå¥½çœ‹ï¼Œæ„Ÿè§‰å¾ˆå¡é¡¿ã€‚

## chenshuai2144

æŠŠä½ çš„é…ç½®å’Œæ•°æ® show ä¸€ä¸‹ï¼Œæˆ‘ debug ä¸€ä¸‹ï¼Œ200ms åº”è¯¥æ— æ„Ÿçš„

## chenshuai2144

dep of https://github.com/ant-design/pro-components/issues/278

## aoyinke

éº»çƒ¦äº†

```

"dependencies": {
    "@ant-design/icons": "^4.2.2",
    "@ant-design/pro-layout": "^6.4.8",
    "@ant-design/pro-table": "^2.5.13",
    "@types/lodash.isequal": "^4.5.5",
    "antd": "^4.5.4",
    "classnames": "^2.2.6",
    "js-base64": "^3.4.5",
    "less": "^3.12.2",
    "lodash": "^4.17.20",
    "lodash.isequal": "^4.5.0",
    "moment": "^2.25.3",
    "numeral": "^2.0.6",
    "omit.js": "^2.0.2",
    "path-to-regexp": "2.4.0",
    "qs": "^6.9.0",
    "react": "^16.8.6",
    "react-dom": "^16.8.6",
    "react-helmet-async": "^1.0.4",
    "react-router": "^4.3.1",
    "umi": "^3.2.16",
    "umi-request": "^1.0.8",
    "use-merge-value": "^1.0.1"
  },
  "devDependencies": {
    "@ant-design/pro-cli": "^1.0.18",
    "@types/classnames": "^2.2.7",
    "@types/express": "^4.17.0",
    "@types/history": "^4.7.7",
    "@types/jest": "^26.0.10",
    "@types/lodash": "^4.14.159",
    "@types/qs": "^6.9.4",
    "@types/react": "^16.9.46",
    "@types/react-dom": "^16.8.4",
    "@types/react-helmet": "^5.0.13",
    "@umijs/fabric": "^2.2.0",
    "@umijs/plugin-blocks": "^2.0.5",
    "@umijs/preset-ant-design-pro": "^1.2.0",
    "@umijs/preset-react": "^1.5.21",
    "@umijs/preset-ui": "^2.2.6",
    "carlo": "^0.9.46",
    "chalk": "^4.0.0",
    "cross-env": "^7.0.0",
    "cross-port-killer": "^1.1.1",
    "detect-installer": "^1.0.1",
    "enzyme": "^3.11.0",
    "eslint": "^7.7.0",
    "express": "^4.17.1",
    "gh-pages": "^3.0.0",
    "husky": "^4.0.7",
    "jsdom-global": "^3.0.2",
    "lint-staged": "^10.0.0",
    "mockjs": "^1.0.1-beta3",
    "prettier": "^2.0.1",
    "pro-download": "1.0.1",
    "puppeteer-core": "^5.0.0",
    "stylelint": "^13.0.0"
  }
// æ•°æ®ï¼Œæ¯é¡µ20æ¡
createTime: "2020-08-21 15:47:06"
createUser: "shenx"
id: 119
imsi: "6666666666666"
insideId: "6666666666666"
macId: "6666666666666"
model: "FW6666666666666"
modelName: "fwe6666666666666"
modifyTime: "2020-08-26 14:29:33"
modifyUser: "admin"
name: "æµ‹è¯•6666666666666"
outsideId: "6666666666666"
period: "0"
printMacId: "6666666666666"
status: "3"
typeId: 21
typeName: "æ°´æ·¹6666666666666"

<ProTable
        columns={columns(options, equipValueEnum)}
        pagination={{
          showQuickJumper: true,
        }}
        actionRef={actionRef}
        request={async (params) => {
          const par = params;
          par.pageNum = params.current;
          try {
            const res = await getAgeingTest(params);
            if (res.code !== 200) {
              message.error(`é¡µé¢è¯·æ±‚æ•°æ®å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š${res.code || 'ç½‘å…³é”™è¯¯'}`);
            } else {
              return Promise.resolve({
                data: res.data.rows,
                success: true,
                total: res.data.total,
              });
            }
          } catch (error) {
            console.log(error);
          }
          return Promise.resolve({
            success: true,
          });
        }}
        rowKey="id"
        rowSelection={{
          onChange: (selectedRowKeys, selectedRows) => {
            handleSelectedEquip(() => selectedRows);
          },
        }}
        dateFormatter="string"
        toolBarRender={() => [
          <Button
            key="3"
            type="primary"
            onClick={() => {
              dispatch({
                type: 'GlobalModel/changeCreateModalVisible',
                payload: true,
              });
            }}
          >
            å¼€å§‹è€åŒ–
          </Button>,
        ]}
      />
```

## chenshuai2144

å»¶è¿Ÿå‡å°‘äº†ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦1s å·¦å³ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®å®åœ¨ useEffect æ‰è¯»å–çš„ï¼Œè€Œtableçš„æ•°æ®æ˜¯ç«‹é©¬å°±å‡†å¤‡å¥½çš„ï¼Œæ€§èƒ½ä¸Šè¿˜æ˜¯æœ‰ä¸€äº›å·®è·

## aoyinke

å¥½çš„ï¼Œè°¢è°¢

## zhangjingl02

@aoyinke æ€ä¹ˆè§£å†³çš„å•Šï¼Ÿ

## zhangjingl02

æˆ‘ä¹Ÿæ˜¯é‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œtable å‡ ä¹æ²¡åˆå»¶è¿Ÿçš„åŠ è½½ï¼Œpro table 2-3ç§’

## chenshuai2144

æ›´æ–°ä¸‹ç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºprotable å‘èµ·è¯·æ±‚æ¯”è¾ƒæ…¢

## Asence

@chenshuai2144 å¸…å“¥ æˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜ å°±æ˜¯æˆ‘è¡¨æ ¼å¤´éƒ¨æœç´¢æ˜¯ä¸ªä¸‹æ‹‰æ¡† æ¥å£è¿”å›çš„ç‰¹åˆ«å¿« ä½†æ˜¯ä¸‹æ‹‰æ¡†é‡Œé¢å€¼åŠ è½½å‡ºæ¥ç‰¹åˆ«æ…¢ï¼Œéœ€è¦5s

## chenshuai2144

æ˜¯æ²¡æœ‰è§¦å‘æ¸²æŸ“æŠŠï¼Œå¯ä»¥æŠŠä¸‹æ‹‰æ¡†å°æˆç»„ä»¶ï¼Œå°±å¯ä»¥ç²¾ç¡®æ§åˆ¶å®ƒçš„æ¸²æŸ“äº†

## Asence

æ¸²æŸ“å¾ˆæ…¢ å¥½åƒæ˜¯ç­‰è¡¨æ ¼æ•°æ®æ¸²æŸ“å®Œæ¯•ä»¥åæ‰å»æ¸²æŸ“çš„å¤´éƒ¨çš„ä¸‹æ‹‰æ¡†

## pollux2015

æˆ‘çš„è¡¨æ ¼å­—æ®µæœ‰30å¤šé¡¹ï¼Œ æ ¹æœ¬æ²¡æ³•ç”¨ï¼Œ å¦‚æœå½“å‰é¡µé¢æœ‰input éƒ½è¾“å…¥ä¸äº†

## jsonchou

31 \* 10 çš„å¹²å‡€è¡¨æ ¼
render å‡½æ•°æ‰§è¡Œäº†1400æ¬¡ï¼Œé¡µé¢éå¸¸å¡ï¼Œå¼€å¯debounceTime=300 ä¹Ÿæ— ç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

```js
 render: (txt, row, index, action) => }
    console.log('render', 1)
    return null
}
```

æ³¨é‡Šä¸Šè¿°ä»£ç ï¼Œé‡‡ç”¨é»˜è®¤ valueTypeï¼Œé¡µé¢æ¸²æŸ“æ€§èƒ½å“è¶Šã€‚

## chenshuai2144

render è¿™ä¸ªå¾ˆè›‹ç–¼çš„ï¼Œå› ä¸ºrender çš„ç»“æœæ²¡æ³•ç¼“å­˜ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½è¦æ‰§è¡Œï¼Œå¦‚æœéœ€è¦æ€§èƒ½å¥½çš„è¯ï¼Œä¸€å®šè¦å°½é‡ä¸è¦å†™ render ä¹‹ç±»çš„æ–¹æ³•

## nkHub

@chenshuai2144 æˆ‘çš„æ˜¾ç¤º23ä¸ªå­—æ®µï¼Œï¼Œæœ‰å¤šä¸ªç­›é€‰ï¼Œï¼Œå¼€å¯äº†çœç•¥ï¼ŒåŠ è½½è¦6ã€7ç§’ã€‚ã€‚æ— è¯­äº†ğŸ˜

## Aaron-skech

18åˆ— 100æ¡æ•°æ®åŠ è½½è¦8åˆ°9ç§’ å¡æ­»äº†

## zhangjiana

æˆ‘çš„ä¹Ÿå‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼Œ columnsæ˜¯åŠ¨æ€çš„ï¼Œæ¥å£è¿”å›çš„å¾ˆå¿«ã€‚æˆ‘æŠŠcolumns ç»™åˆ°ä¹‹åï¼Œ è¿˜æ˜¯åŠ è½½å¾ˆæ…¢

## zhangjiana

å…³é—­äº†`çœç•¥`ï¼Œå°±å¥½å¤šäº†ã€‚

## zhoubaibai

> å…³é—­äº†`çœç•¥`ï¼Œå°±å¥½å¤šäº†ã€‚

å…³é—­äº†çœç•¥æ˜¯å•¥æ„æ€å‘€....

## hpf0532

> > å…³é—­äº†`çœç•¥`ï¼Œå°±å¥½å¤šäº†ã€‚
>
> å…³é—­äº†çœç•¥æ˜¯å•¥æ„æ€å‘€....

ellipsis: false

## NARUTOyuyang

> å»¶è¿Ÿå‡å°‘äº†ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦1s å·¦å³ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®å®åœ¨ useEffect æ‰è¯»å–çš„ï¼Œè€Œtableçš„æ•°æ®æ˜¯ç«‹é©¬å°±å‡†å¤‡å¥½çš„ï¼Œæ€§èƒ½ä¸Šè¿˜æ˜¯æœ‰ä¸€äº›å·®è·

è¿™ä¼˜åŒ–ä¸äº†äº†å—ï¼Ÿæ•°æ®æ—©å°±è¿”å›äº†ï¼Œprotable è¿˜æ˜¯åœ¨ loading å¾ˆä¹…æ‰æ¸²æŸ“å‡ºæ¥

## NARUTOyuyang

> å¥½çš„ï¼Œè°¢è°¢

æ‰€ä»¥ä½ çš„æ¸²æŸ“æ…¢çš„é—®é¢˜æ˜¯æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ 20 ä¸ªå­—æ®µï¼Œ10 ä¸ªéœ€è¦ render ï¼Œå¡çš„å¾ˆ

## wx9999

> > å¥½çš„ï¼Œè°¢è°¢
>
> æ‰€ä»¥ä½ çš„æ¸²æŸ“æ…¢çš„é—®é¢˜æ˜¯æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæˆ‘ 20 ä¸ªå­—æ®µï¼Œ10 ä¸ªéœ€è¦ render ï¼Œå¡çš„å¾ˆ

è¯·é—®ä½ è§£å†³äº†å˜›
