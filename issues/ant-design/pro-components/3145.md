# ğŸ§[é—®é¢˜] pro-formçš„transformè·³è¿‡å¯¹è±¡çš„è½¬æ¢

`ğŸ¨ By Design`

### ğŸ§ é—®é¢˜æè¿°

- transformå¯¹åŸºæœ¬è¿”å›å€¼ç±»å‹éƒ½è¿›è¡Œè½¬æ¢æ˜¯åˆç†çš„å§ï¼Ÿ
- è¿™é‡Œä¸ºä»€ä¹ˆè¦è·³è¿‡å¯¹å¯¹è±¡ç±»å‹çš„è½¬æ¢ï¼Œæ˜¯é‡åˆ°ä»€ä¹ˆåœºæ™¯æ‰€ä»¥æ‰å†³å®šè·³è¿‡ï¼Ÿ

<!--
è¯¦ç»†åœ°æè¿°é—®é¢˜ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ’» ç¤ºä¾‹ä»£ç 

transform æºç ï¼š

```js
const gen = (tempValues: T, parentsKey?: React.Key[]) => {
    let result = {} as T;

    if (tempValues == null || tempValues === undefined) {
      return result;
    }
    Object.keys(tempValues).forEach((entryKey) => {
      const key = parentsKey ? [parentsKey, entryKey].flat(1) : [entryKey].flat(1);
      const itemValue = tempValues[entryKey];
      if (
        typeof itemValue === 'object' &&
        !Array.isArray(itemValue) &&
        !React.isValidElement(itemValue) && // ignore walk throungh React Element
        !(itemValue instanceof Blob) // ignore walk throungh Blob
      ) {
        const genValues = gen(itemValue, key);
        if (Object.keys(genValues).length < 1) {
          return;
        }
        result = namePathSet(result, [entryKey], genValues);
        return;
      }
      const transformFunction = get(dataFormatMap, key);
      const tempKey =
        typeof transformFunction === 'function'
          ? transformFunction?.(itemValue, entryKey, tempValues)
          : entryKey;
      // { [key:string]:any } æ•°ç»„ä¹Ÿèƒ½é€šè¿‡ç¼–è¯‘
      if (Array.isArray(tempKey)) {
        result = namePathSet(result, tempKey, itemValue);
        return;
      }
      if (typeof tempKey === 'object') {
        finalValues = {
          ...finalValues,
          ...tempKey,
        };
      } else if (tempKey) {
        result = namePathSet(result, [tempKey], itemValue);
      }
    });
    // namePathã€transformåœ¨omitä¸ºfalseæ—¶éœ€æ­£å¸¸è¿”å› https://github.com/ant-design/pro-components/issues/2901#issue-908097115
    return omit ? result : tempValues;
  };

  finalValues = merge(gen(values), finalValues);

  return finalValues;
};
```

è·³è¿‡äº†å¯¹è±¡çš„å¤„ç†

```js
typeof itemValue === 'object' &&
!Array.isArray(itemValue) &&
```

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åªå¯¹ æ•°æ®å¯¹è±¡åšå¤„ç†ï¼Œåˆ«çš„éƒ½ä¸ä¼šåšå¤„ç†

## jddxf

`Select` åœ¨ `labelInValue` æ¨¡å¼ä¸‹çš„å€¼æ˜¯å¯¹è±¡å½¢å¼çš„ï¼Œè¯¥æ€ä¹ˆè¿›è¡Œ transform å‘¢

## RIPm

> `Select` åœ¨ `labelInValue` æ¨¡å¼ä¸‹çš„å€¼æ˜¯å¯¹è±¡å½¢å¼çš„ï¼Œè¯¥æ€ä¹ˆè¿›è¡Œ transform å‘¢

æ²¡æ³•`transform`ã€‚ä»–ä»¬è®¾è®¡å°±æ˜¯ä¸æ”¯æŒ

## jddxf

@RIPm è¿™æ ·å­ã€‚ã€‚é‚£ä½ çŸ¥é“ transform çš„ä½¿ç”¨åœºæ™¯å—ï¼Ÿæˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯ç”¨äºå°†è¡¨å•æ•°æ®è½¬æ¢æˆè¯·æ±‚å‚æ•°çš„ï¼Œé‚£æ ·çš„è¯åº”è¯¥è¯·æ±‚å‰ transform ä¸€ä¸‹å°±è¡Œäº†ï¼Œä½†æ˜¯å‘ç°æ¯æ¬¡å€¼æ”¹å˜éƒ½ä¼šè°ƒç”¨ transformã€‚

## RIPm

æ”¹äº†å—ï¼Ÿ å€¼æ”¹å˜ä¸ä¼šè§¦å‘çš„

> @RIPm è¿™æ ·å­ã€‚ã€‚é‚£ä½ çŸ¥é“ transform çš„ä½¿ç”¨åœºæ™¯å—ï¼Ÿæˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯ç”¨äºå°†è¡¨å•æ•°æ®è½¬æ¢æˆè¯·æ±‚å‚æ•°çš„ï¼Œé‚£æ ·çš„è¯åº”è¯¥è¯·æ±‚å‰ transform ä¸€ä¸‹å°±è¡Œäº†ï¼Œä½†æ˜¯å‘ç°æ¯æ¬¡å€¼æ”¹å˜éƒ½ä¼šè°ƒç”¨ transformã€‚

## jddxf

ä¼šçš„ï¼Œå¯ä»¥åŠ  console.log è¯•ä¸‹ã€‚ https://codesandbox.io/s/etlig?file=/App.tsx:1991-2005

## zwmmm

> @RIPm è¿™æ ·å­ã€‚ã€‚é‚£ä½ çŸ¥é“ transform çš„ä½¿ç”¨åœºæ™¯å—ï¼Ÿæˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯ç”¨äºå°†è¡¨å•æ•°æ®è½¬æ¢æˆè¯·æ±‚å‚æ•°çš„ï¼Œé‚£æ ·çš„è¯åº”è¯¥è¯·æ±‚å‰ transform ä¸€ä¸‹å°±è¡Œäº†ï¼Œä½†æ˜¯å‘ç°æ¯æ¬¡å€¼æ”¹å˜éƒ½ä¼šè°ƒç”¨ transformã€‚

æˆ‘ç†è§£ä¹Ÿæ˜¯è¿™ä¸ªæ„æ€ ä½†å®é™…ä¸Šè¿™ä¸ªtransformé”¤å­ç”¨æ²¡æœ‰ å„ç§ä¸ç”Ÿæ•ˆ ç»„ä»¶æœ¬èº«å€¼æ”¹å˜ä¹Ÿä¼šè§¦å‘ çœ‹æ–‡æ¡£çš„æ„æ€åˆæ˜¯æäº¤æ•°æ®çš„æ—¶å€™è§¦å‘
