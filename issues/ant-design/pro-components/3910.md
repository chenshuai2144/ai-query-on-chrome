# ğŸ§[é—®é¢˜]EditableProTable å¯ç¼–è¾‘è¡¨æ ¼æ–°æ·»åŠ ä¸€è¡ŒonSaveåå¦‚ä½•æ›¿ä»£æœ¬åœ°ä¸´æ—¶ç”Ÿæˆçš„idï¼Ÿ

### ğŸ§ é—®é¢˜æè¿°

EditableProTable - å¯ç¼–è¾‘è¡¨æ ¼æ–°æ·»åŠ ä¸€è¡Œæ—¶ï¼Œä¸€èˆ¬ä¼šé»˜è®¤æŒ‡å®šä¸€ä¸ª idä½œä¸ºè¯¥è¡Œçš„keyï¼Œè¿™ä¸ªidå¯èƒ½æ˜¯ä¸´æ—¶ç”Ÿæˆçš„ï¼Œå¹¶ä¸ç¬¦åˆåå°è¦æ±‚ï¼Œå½“ä½¿ç”¨onSaveæ–¹æ³•ä¿å­˜åï¼Œåå°ä¼šè¿”å›ä¸€ä¸ªçœŸå®çš„idï¼Œç”¨æˆ·å¯èƒ½åœ¨éšåçš„æ“ä½œä¸­ä½¿ç”¨è¯¥idä½œä¸ºåç«¯ç¼–è¾‘å’Œåˆ é™¤çš„ä¾æ®ã€‚

ç°åœ¨çš„é—®é¢˜æ˜¯ï¼š onSaveè¿”å›åï¼Œä¸´æ—¶ç”Ÿæˆçš„idä¸çŸ¥å¦‚ä½•è¢«å–ä»£ã€‚ ä½¿ç”¨setDataSourceæ›´æ–°æ•°æ®æºä¸èµ·ä½œç”¨ã€‚

æœŸæœ›ï¼š onSaveåæœ¬åœ°ä¸´æ—¶ç”Ÿæˆçš„idèƒ½è¢«åå°è¿”å›çš„idå–ä»£ã€‚

### ğŸ’» ç¤ºä¾‹ä»£ç 

ç¤ºä¾‹ä»£ç è¯·æŸ¥çœ‹ [codesandbox.io](https://codesandbox.io/s/shi-shi-bao-cun-de-bian-ji-biao-ge-forked-bxcsk?file=/App.tsx)

### ğŸš‘ å…¶ä»–ä¿¡æ¯

![image](https://user-images.githubusercontent.com/2541149/139174983-1bf38438-ea03-4a27-a9b3-d9f92ed84d23.png)

## chenshuai2144

await åŠ  then è¿˜çœŸæ˜¯çµæ€§ã€‚

ä¸€èˆ¬idå˜åŒ–æ˜¯å› ä¸ºä½ æœ‰ä¸€é¡¹å«åšidçš„è¾“å…¥æ¡†å§, å¦‚æœåç«¯æœ‰å€¼ï¼Œæˆ‘æ¨èä½ ç›´æ¥reloadä¸€ä¸‹è¡¨æ ¼

## yuzhigang

> await åŠ  then è¿˜çœŸæ˜¯çµæ€§ã€‚
>
> ä¸€èˆ¬idå˜åŒ–æ˜¯å› ä¸ºä½ æœ‰ä¸€é¡¹å«åšidçš„è¾“å…¥æ¡†å§, å¦‚æœåç«¯æœ‰å€¼ï¼Œæˆ‘æ¨èä½ ç›´æ¥reloadä¸€ä¸‹è¡¨æ ¼

å‰ç«¯ä¿å­˜æ—¶ä¸ä¼šè¦æ±‚è¾“å…¥idï¼Œ ä½†æ˜¯rowKeyå´éœ€è¦è®¾ç½®idã€‚å¦‚æ‚¨æ‰€è¯´ï¼Œä¿å­˜åreloadåº”è¯¥æ˜¯æœ€ä¿é™©çš„ï¼Œä½†æ˜¯ï¼š

åœ¨onSaveé‡Œï¼Œæ— è®ºæ˜¯ reload, è¿˜æ˜¯setDataSourceæ›´æ–°çŠ¶æ€, æ•°æ®è¡¨çš„æ•°æ®æºéƒ½ä¸å‘ç”Ÿå˜åŒ–ã€‚ è„±ç¦»onSaveï¼Œåœ¨å¤–ä¾§è®¾ç½®ä¸€ä¸ªåˆ·æ–°æŒ‰é’®ï¼Œåˆ·æ–°tableæ•°æ®å´èƒ½å˜åŒ–ã€‚
![image](https://user-images.githubusercontent.com/2541149/139395074-da3c487e-c63b-439c-95b3-b627b04896b8.png)

## chenshuai2144

è¯•è¯•é…ç½® controlled

## wh77572

> è¯•è¯•é…ç½® controlled

é…ç½® controlledä¹Ÿä¸è¡Œ ç°åœ¨åªèƒ½å…ˆreloadè§£å†³ä¸€ä¸‹ saveçš„æ—¶å€™æŠŠidæ›´æ–°è¿‡å»äº† changeçš„æ—¶å€™valuesçš„å€¼æ²¡æœ‰åŠæ—¶æ›´æ–° è¿™é‡Œå¯èƒ½éœ€è¦è§£å†³ä¸€ä¸‹

## Yezhuming

åŒæ ·é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨onSaveé‡ŒsetDataSourceäº†ï¼Œä½†æ˜¯onChangeçš„å‚æ•°valueæ•°æ®æ˜¯æ—§çš„ï¼Œå¹¶ä¸æ˜¯onSaveé‡ŒsetDataSourceçš„æ•°æ®ğŸ˜©

## n0tKnow

```
editable={{
    onSave: async (rowKey, data, row) => {
        return post(`task` + (data.id ? `/${data.id}` : ""), data).then(r => {
            //replace id
            data.id = r?.data?.id
            return true
        })
    },
}}
```

## chenshuai2144

@n0tKnow è¿™ä¸ªæœ‰ç‚¹å±é™©ï¼Œè¿˜æ˜¯æ¨èç›´æ¥reloadã€
