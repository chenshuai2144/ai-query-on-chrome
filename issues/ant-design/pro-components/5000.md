# 🐛[BUG]Next-ProLayout 中使用 PageContainer 时 breadcrumb不会显示

`⭕️   bug`,`layout`,`AI Reply`

![image](https://user-images.githubusercontent.com/21276534/161751159-af39df6d-cfff-4065-b066-46eef62d1420.png)

还有就是左侧的菜单栏 3级节点选中时,太丑了....

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

您好，感谢您向我们报告该问题。

针对您提到的两个问题：

1. Next-ProLayout 中使用 PageContainer 时 breadcrumb不显示

可以通过设置 `breadcrumbRender` 属性来解决该问题。具体做法是在 `PageContainer` 标签中添加 `breadcrumbRender` 属性，这个属性值需要是一个回调函数，用于根据当前路由信息生成面包屑。

下面是一个基本的示例代码：

```jsx
import ProLayout, { PageContainer } from "@ant-design/pro-layout";
import { Breadcrumb } from "antd";
import { Link } from "umi";

const breadcrumbMap = {
  "/dashboard": "Dashboard",
  "/dashboard/analysis": "Analysis",
  "/dashboard/monitor": "Monitor",
  "/dashboard/workplace": "Workplace",
};

const breadcrumbRender = (routers = []) => {
  const last = routers.pop();
  return (
    <Breadcrumb>
      {routers.map((router) => (
        <Breadcrumb.Item key={router.path}>
          <Link to={router.path}>{breadcrumbMap[router.path]}</Link>
        </Breadcrumb.Item>
      ))}
      {last && <Breadcrumb.Item>{breadcrumbMap[last.path]}</Breadcrumb.Item>}
    </Breadcrumb>
  );
};

export default (props) => {
  const {
    location: { pathname },
  } = props;
  return (
    <ProLayout
      {...props}
      location={{ pathname }}
      breadcrumbRender={breadcrumbRender}
    >
      <PageContainer />
    </ProLayout>
  );
};
```

其中 `breadcrumbMap` 对象用于存储每个路由对应的面包屑名称，`breadcrumbRender` 回调函数则是用于根据当前路由信息生成面包屑。

2. 左侧的菜单栏 3级节点选中时，样式不美观

可以通过自定义菜单栏的 `menuItemRender` 属性来自定义菜单项的渲染效果。具体方法是在 `ProLayout` 标签中添加 `menuItemRender` 属性，这个属性值需要是一个回调函数，用于生成每个菜单项的 HTML 结构。

下面是一个基本的示例代码：

```jsx
import ProLayout from "@ant-design/pro-layout";
import { history } from "umi";
import { Icon } from "@ant-design/compatible";
import { QuestionCircleOutlined } from "@ant-design/icons";

const menuItemRender = (menuItemProps, defaultDom) => {
  if (menuItemProps.isUrl) {
    return defaultDom;
  }

  const { path, icon, name, children } = menuItemProps;
  if (children && children.length > 0) {
    return (
      <li className="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open ant-menu-submenu-selected ant-menu-submenu-selected-start">
        <div className="ant-menu-submenu-title">
          {icon && <Icon type={icon} />}
          <span>{name}</span>
        </div>
        {children}
      </li>
    );
  }

  return (
    <li
      onClick={() => {
        history.push(path);
      }}
      style={{ padding: "0 20px" }}
    >
      {defaultDom}
    </li>
  );
};

export default (props) => {
  const {
    children,
    location: { pathname },
  } = props;
  return (
    <ProLayout
      {...props}
      menuItemRender={menuItemRender}
      selectedKeys={[pathname]}
    >
      {children}
    </ProLayout>
  );
};
```

其中 `menuItemProps` 对象包含了菜单项的完整信息，可以通过该对象重构生成自定义的菜单项。在这个例子中，我们仅针对包含子菜单的菜单项进行了自定义样式的开发。

至此，两个问题都解决完毕。希望对您有所帮助。
