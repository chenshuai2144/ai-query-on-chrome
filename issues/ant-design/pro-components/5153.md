# ğŸ§[é—®é¢˜] è¯·é—®åœ¨åˆšè¿›å…¥é¡µé¢æ—¶useEffectä¸­è°ƒç”¨actionRef.current.reloadä¸ºä»€ä¹ˆä¸èƒ½è§¦å‘requestï¼Ÿ

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ§ é—®é¢˜æè¿°

åœ¨åˆšè¿›å…¥é¡µé¢æ—¶useEffectä¸­è°ƒç”¨actionRef.current.reloadä¸èƒ½è§¦å‘requestï¼Œè€Œé€šè¿‡settimeout(() => { actionRef.current.reload() }, 500)å»¶è¿Ÿ500mså·¦å³æ‰èƒ½è§¦å‘

<!--
è¯¦ç»†åœ°æè¿°é—®é¢˜ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ’» ç¤ºä¾‹ä»£ç 

```JavaScript
 useEffect(() => {
    setTimeout(() => console.log('actionRef.current.timeout', actionRef.current), 500) // å¯ä»¥è§¦å‘request
    actionRef.current.reload() // ä¸èƒ½è§¦å‘request
  }, [history.location.query])

return <ProTable
        columns={columns}
        actionRef={actionRef}
        manualRequest={true}
        request={(params = {}, sort, filter) => {
          console.log('sort & filter', sort, filter);
          const { current, ...other } = Object.assign({}, params, {
            ...history.location.query,
            current: history.location.query.pageNumber
          })
          const _params = {
            pageNumber: current,
            ...other
          }
          return enterprise.queryList(_params)
            .then(res => {
              return {
                data: res.data.data,
                success: res.success,
                total: res.data.total
              }
            })
        }}
        debounceTime={200}
        rowKey="id"
        pagination={{
          onChange: (pageNumber, pageSize) => {
            history.push({ pathname: history.location.pathname, query: {...history.location.query, pageSize, pageNumber }})
          },
          showSizeChanger: true,
          showQuickJumper: true,
          defaultPageSize: history.location.query.pageSize || 10,
          defaultCurrent: history.location.query.pageNumber || 1
        }}
      />
```

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## JoeyYoung1997

ç»æµ‹è¯•ï¼Œé€šè¿‡å–æ¶ˆmanualRequestæ—¶å¯è§¦å‘requestï¼Œé‚£è¿™æ ·å…¶å®å°±æ˜¯æˆ‘çš„æ€ç»´è¯¯åŒºï¼Œæˆ‘æœ¬æƒ³åœ¨æ¯æ¬¡è·³è½¬é¡µé¢åpush({pathname: 'xx', query: { pageNumberï¼š xx, pageSize: xx }})ï¼Œç„¶åuseEffectä¸­actionRef.current.reload()è°ƒç”¨åè§¦å‘requestï¼Œä»¥æ­¤è¾¾åˆ°è®°å¿†åˆ†é¡µå‚æ•°çš„ç›®çš„ï¼Œç°åœ¨æ¥çœ‹è¿˜æ˜¯è®©proTableè‡ªè¡Œè§¦å‘å§ã€‚ã€‚ã€‚

## studyyiran

> ç»æµ‹è¯•ï¼Œé€šè¿‡å–æ¶ˆmanualRequestæ—¶å¯è§¦å‘requestï¼Œé‚£è¿™æ ·å…¶å®å°±æ˜¯æˆ‘çš„æ€ç»´è¯¯åŒºï¼Œæˆ‘æœ¬æƒ³åœ¨æ¯æ¬¡è·³è½¬é¡µé¢åpush({pathname: 'xx', query: { pageNumberï¼š xx, pageSize: xx }})ï¼Œç„¶åuseEffectä¸­actionRef.current.reload()è°ƒç”¨åè§¦å‘requestï¼Œä»¥æ­¤è¾¾åˆ°è®°å¿†åˆ†é¡µå‚æ•°çš„ç›®çš„ï¼Œç°åœ¨æ¥çœ‹è¿˜æ˜¯è®©proTableè‡ªè¡Œè§¦å‘å§ã€‚ã€‚ã€‚

hello @JoeyYoung1997 ï¼Œæˆ‘è§‰å¾—ä½ è¿™ä¸ªæ€è·¯æ²¡é—®é¢˜å‘€~~
ä½ æ˜¯ç›´æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œç„¶æ˜¯ç»•è¿‡å»äº†

## Dunqing

ProTableæœ‰ä¸ªonLoadäº‹ä»¶åœ¨è¿™é‡Œé‡Œé¢è§¦å‘reload()è¯•è¯•

## JoeyYoung1997

> ProTableæœ‰ä¸ªonLoadäº‹ä»¶åœ¨è¿™é‡Œé‡Œé¢è§¦å‘reload()è¯•è¯•

è¿™ä¸ªæ˜¯æ•°æ®åŠ è½½å®Œæˆåè§¦å‘ï¼Œä½†æ˜¯æˆ‘æ˜¯éœ€è¦å…ˆåŠ è½½æ•°æ®çš„

## JoeyYoung1997

> > ç»æµ‹è¯•ï¼Œé€šè¿‡å–æ¶ˆmanualRequestæ—¶å¯è§¦å‘requestï¼Œé‚£è¿™æ ·å…¶å®å°±æ˜¯æˆ‘çš„æ€ç»´è¯¯åŒºï¼Œæˆ‘æœ¬æƒ³åœ¨æ¯æ¬¡è·³è½¬é¡µé¢åpush({pathname: 'xx', query: { pageNumberï¼š xx, pageSize: xx }})ï¼Œç„¶åuseEffectä¸­actionRef.current.reload()è°ƒç”¨åè§¦å‘requestï¼Œä»¥æ­¤è¾¾åˆ°è®°å¿†åˆ†é¡µå‚æ•°çš„ç›®çš„ï¼Œç°åœ¨æ¥çœ‹è¿˜æ˜¯è®©proTableè‡ªè¡Œè§¦å‘å§ã€‚ã€‚ã€‚
>
> hello @JoeyYoung1997 ï¼Œæˆ‘è§‰å¾—ä½ è¿™ä¸ªæ€è·¯æ²¡é—®é¢˜å‘€~~ ä½ æ˜¯ç›´æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œç„¶æ˜¯ç»•è¿‡å»äº†

æ€è·¯æ˜¯è¿™æ ·ï¼Œå°±æ˜¯åˆšè¿›é¡µé¢useEffectè°ƒç”¨reloadè§¦å‘ä¸äº†requestï¼Œè¦ä¹ˆå»¶è¿Ÿè°ƒç”¨ï¼Œè¦ä¹ˆç­‰ä¸‹ä¸€æ¬¡é¡µé¢è·¯ç”±push

## chenshuai2144

loading çš„æ—¶å€™æ˜¯ä¸èƒ½è§¦å‘çš„ï¼Œè¦ç­‰ç¬¬ä¸€æ¬¡è¯·æ±‚ç»“æŸäº†æ‰è¡Œ
