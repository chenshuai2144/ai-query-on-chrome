# EditableProTable 实时保存的编辑表格拖拽功能

## 问题描述

在使用EditableProTable组件时，发现该组件并不支持拖拽功能。

## 解决方案

可以结合使用react-sortable-hoc库来实现拖拽功能。首先，需要安装react-sortable-hoc库：

```bash
npm install react-sortable-hoc
```

然后，在EditableProTable组件中引入SortableContext和SortableItem，并使用useSortable hook来获取拖拽功能：

```jsx
import React, { useState, useEffect } from "react"
import { useSortable } from "@dnd-kit/sortable"
import { DndContext } from "@dnd-kit/core"
import {
  arrayMove,
  SortableContext,
  verticalListSortingStrategy
} from "@dnd-kit/sortable"
import { restrictToVerticalAxis } from "@dnd-kit/modifiers"
import { MenuOutlined } from "@ant-design/icons"
import { EditableProTable } from '@ant-design/pro-components';
import "./style.less"

function SortableItem(props) {
  const id = props["data-row-key"]
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging
  } = useSortable({
    id
  })

  const dragStyle = {
    transition,
    // transform: CSS.Translate.toString(transform),
    "--translate-x": `${transform?.x ?? 0}px`,
    "--translate-y": `${transform?.y ?? 0}px`
  }

  const { style, className, children, ...rest } = props
  const cls = [className, "dragItem", id && isDragging ? "dragOverlay" : null]
    .filter(c => c)
    .join(" ")

  return (
    <tr
      id={id}
      ref={setNodeRef}
      {...attributes}
      //{...listeners}
      className={cls}
      style={{ ...style, ...dragStyle }}
      {...rest}
      data-cypress="draggable-item"
    >
      {React.Children.map(children, child => {
        if (child.key === "sort") {
          return React.cloneElement(child, {
            additionalProps: {
              ...listeners,
              "data-cypress": "draggable-handle"
            }
          })
        }
        return child
      })}
    </tr>
  )
}

function DraggableTable({ value, onChange, columns, recordCreatorProps,rowKey="
```
