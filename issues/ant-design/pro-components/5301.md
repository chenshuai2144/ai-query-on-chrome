# ğŸ§[é—®é¢˜] å¦‚ä½•å°è£… ProFormText å’Œ ProFormUploadButton ç»„ä»¶

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ§ é—®é¢˜æè¿°

ä½¿ç”¨ ProFormText å’Œ ProFormUploadButton ç»„ä»¶å°è£…çš„ ImageInput åœ¨ä¸Šä¼ å›¾ç‰‡æˆåŠŸåï¼ŒProFormTextè‡ªåŠ¨å¡«å…¥äº†ä¸Šä¼ å›¾ç‰‡çš„é“¾æ¥ï¼Œä½†æäº¤æ—¶ï¼Œè¯¥ ImageInputä¾ç„¶æœªé€šè¿‡å¿…å¡«éªŒè¯ã€‚

### ğŸ’» ç¤ºä¾‹ä»£ç 

```typescript
export const ImageInput = (props: any) => {
  const [value, setValue] = useState('');

  const uploadProps = {
    accept: 'image/*',
    action: '/api/admin/qiniu/upload',
    beforeUpload: (file: any) => {
      const isImage = file.type.startsWith('image');
      if (!isImage) {
        message.error(`${file.name} is not a image file`);
      }
      return isImage || Upload.LIST_IGNORE;
    },
    onChange: (info: any) => {
      if (info.file.status === 'done') {
        setValue(info.file.response.data);
        props.onChange?.(info.file.response.data);
      }
    },
    showUploadList: false,
  };

  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
    const v = e.target.value;
    setValue(v);
    props.onChange?.(v ?? props.value);
  };

  return (
    <div className={styles.imageInput}>
      <ProFormText {...props} value={props.value ?? value} onChange={handleChange} />
      <ProFormUploadButton fieldProps={{ ...uploadProps }} />
    </div>
  );
};
```

```typescript
const AddForm = () => (
  <Collapse>
    <Panel header="å›¾ç‰‡ä¿¡æ¯" key="2">
      <ProForm.Group>
        <ImageInput
          width="md"
          name="logoUrl"
          label="logoUrl"
          tooltip="tooltip"
          placeholder="è¯·è¾“å…¥logoUrl"
        />
      </ProForm.Group>
    </Panel>
  </Collapse>
)

const Page = () => (
  <ModalForm
      visible={addVisible}
      onVisibleChange={setAddVisible}
      title="æ–°å¢"
      onFinish={handleAdd}
      width={1300}
  >
    <AddForm />
  </ModalForm>
)
```

### ğŸš‘ å…¶ä»–ä¿¡æ¯

![imageInput](https://user-images.githubusercontent.com/53958427/170620404-18ad6e82-c296-4068-b646-1c5543351b41.gif)

## Dunqing

https://procomponents.ant.design/components/field-set#proformfields-%E8%A1%A8%E5%8D%95%E9%A1%B9

## abiaqiou

é—®é¢˜å·²è§£å†³ï¼Œå…³é”®æ˜¯è¦é€šè¿‡ setFieldsValue æ¥ç»™ input èµ‹å€¼

## vaynevayne

> é—®é¢˜å·²è§£å†³ï¼Œå…³é”®æ˜¯è¦é€šè¿‡ setFieldsValue æ¥ç»™ input èµ‹å€¼

åŒæ ·çš„é—®é¢˜, è¯·é—® form å¯¹è±¡ä»å“ªé‡Œæ‹¿å‘¢?
