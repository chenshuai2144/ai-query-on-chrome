# 👑 [RFC] ProList 1.0

### 🥰 描述

重新设计 ProList

### 🧐 方案

ProList 的 ListToolBar 还有筛选功能从设计上来说和 ProTable 类似，有一个想法是 ProList 完全按照 ProTable 来设计，甚至从技术上就复用大部分模块，唯一的核心区别可能就是 `columns` 的定义不同。

比如对于 ProTable 来说是：

```js
const columns = [
  {
    title: "创建时间",
    width: 140,
    key: "since",
    dataIndex: "createdAt",
    valueType: "date",
    sorter: (a, b) => a.createdAt - b.createdAt,
  },
  {
    title: "备注",
    dataIndex: "memo",
    ellipsis: true,
    copyable: true,
  },
  {
    title: "操作",
    width: 180,
    key: "option",
    valueType: "option",
    render: () => [
      <a>链路</a>,
      <a>报警</a>,
      <a>监控</a>,
      <a>
        <EllipsisOutlined />
      </a>,
    ],
  },
];

return <ProTable columns={columns} toolBarProps={{}} />;
```

对于 ProList 来说类似的功能：

```js
const metas = [
  {
    position: "title",
    key: "since",
    dataIndex: "createdAt",
    valueType: "date",
    sorter: (a, b) => a.createdAt - b.createdAt,
  },
  {
    position: "description",
    dataIndex: "memo",
    ellipsis: true,
    copyable: true,
  },
  {
    position: "extra",
    key: "option",
    valueType: "option",
    render: () => [
      <a>链路</a>,
      <a>报警</a>,
      <a>监控</a>,
      <a>
        <EllipsisOutlined />
      </a>,
    ],
  },
];

return <ProList metas={metas} toolBarProps={{}} />;
```

ProList metas 的 position 类似 ProTable columns 的 index，指定了对应字段的位置。

ProTable 和 ProList 大部分 API 保持一致，底层复用 ListToolBar、QueryFilter、LightFilter、ProFields，这样后面 CRUD 组件或许可以一键切换 Table 和 List。

## afc163

position 是有限集合，还是这样的语义化更好一点

```jsx
{
  title: { ... },
  description: { ... },
  extra: { ... },
}
```

## afc163

列表做栅格布局（一行两个 items，一行三个 items）时也比 columns 好理解。

## yutingzhao1991

> position 是有限集合，还是这样的语义化更好一点

这个我觉得 OK，TS 的类型也更好定义。

```js
const metas = {
  title: {
    key: "since",
    dataIndex: "createdAt",
    valueType: "date",
    sorter: (a, b) => a.createdAt - b.createdAt,
  },
  description: {
    dataIndex: "memo",
    ellipsis: true,
    copyable: true,
  },
  extra: {
    key: "option",
    valueType: "option",
    render: () => [
      <a>链路</a>,
      <a>报警</a>,
      <a>监控</a>,
      <a>
        <EllipsisOutlined />
      </a>,
    ],
  },
};

return <ProList metas={metas} toolBarProps={{}} />;
```

但是 @afc163 `列表做栅格布局（一行两个 items，一行三个 items）时也比 columns 好理解。` 这个没太明白什么意思。

## afc163

columns 语义上是列，如果 List 不是一行一个，语义就不够清晰了。

## afc163

```diff
- toolBarProps
+ toolbar
```

## chenshuai2144

`sorter: (a, b) => a.createdAt - b.createdAt,`

sort 要放到 title 里面吗?

## afc163

> sort 要放到 title 里面吗?

应该单独提出来，感觉也不需要 sort，没有可交互的地方。

## yutingzhao1991

嗯。sort 没有用就不需要了。

```js
const metas = {
  title: {
    dataIndex: "createdAt",
    valueType: "date",
  },
  description: {
    dataIndex: "memo",
    ellipsis: true,
  },
  extra: {
    valueType: "option",
    render: () => [
      <a>链路</a>,
      <a>报警</a>,
      <a>监控</a>,
      <a>
        <EllipsisOutlined />
      </a>,
    ],
  },
};

return <ProList metas={metas} toolbar={{}} />;
```

那就是这样了。

## little-buddy

我在逐步尝试的时候，先使用了 proTable，columns的配置从表头出发非常易于理解与配置，转而再接触proList的时候，觉得还是columns统一对于粘贴复制会更高效一些😊
