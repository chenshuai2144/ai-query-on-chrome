# ProFormListçš„å­å…ƒç´ çš„rulesæ ¡éªŒä¸ç”Ÿæ•ˆ ğŸ›[BUG]

`form`,`ğŸ“¦  Need to reproduce`

### ğŸ› bug æè¿°

@ant-design/pro-form ä»1.18.3 å‡çº§1.52.0åï¼ŒProFormListçš„å­å…ƒç´ çš„rulesæ ¡éªŒä¸ç”Ÿæ•ˆäº†ï¼Œè¢«è¿«è°ƒæ•´å›æ¥äº†ã€‚

### ğŸ“· å¤ç°æ­¥éª¤

ç¬¬ä¸€æ­¥ï¼špackage.json

```"dependencies": {
    "@ant-design/icons": "^4.7.0",
    "@ant-design/pro-card": "^1.13.0",
    "@ant-design/pro-descriptions": "^1.10.0",
    "@ant-design/pro-form": "^1.52.0",
    "@ant-design/pro-layout": "^6.32.0",
    "@ant-design/pro-table": "^2.61.0",
    "@ant-design/pro-list": "^1.11.0",
    "@umijs/route-utils": "^2.0.0",
```

ç¬¬äºŒæ­¥ï¼šè¡¨å•

```<ProForm form={form} name="basic" layout="vertical" autoComplete="off" submitter={false}>
  <ProFormList
    name="input"
    copyIconProps={false}
    creatorButtonProps={{ creatorButtonText: 'æ–°å¢ä¸€è¡Œ' }}
  >
    <ProFormGroup>
      <ProFormText
        width="md"
        name="name"
        label="å‚æ•°å"
        allowClear={false}
        rules={nameRules}
        tooltip="ä¸èƒ½é‡å¤"
      />
    </ProFormGroup>
  </ProFormList>
</ProForm>
```

ç¬¬ä¸‰æ­¥ï¼šè§¦å‘æ ¡éªŒ
form.validateFields()

### ğŸ æœŸæœ›ç»“æœ

form.validateFields() å¸Œæœ›èƒ½å¤Ÿæ ¡éªŒå‡ºæ¥

## xingzhuJ

@chenshuai2144 æˆ‘ä¹Ÿå‡ºç°äº†ç›¸åŒé—®é¢˜ï½ï½

## JackRoy1992

@chenshuai2144 æ„Ÿè§‰æ˜¯namePathåªèƒ½åˆ°ProFormListçš„nameï¼Œä½†æ˜¯è¦ç²¾å‡†åˆ°ProFormListçš„å­å…ƒç´ çš„nameå°±ä¸çŸ¥é“æ€ä¹ˆå†™namePathäº†

## chenshuai2144

èƒ½æä¾›ä¸€ä¸ªå¤ç°è®©æˆ‘çœ‹çœ‹å—

## JackRoy1992

> èƒ½æä¾›ä¸€ä¸ªå¤ç°è®©æˆ‘çœ‹çœ‹å—
> @chenshuai2144

ç”¨demoç®€å•å†™äº†ä¸ªéœ€æ±‚ï¼ŒçœŸå®éœ€æ±‚æ ¡éªŒæ›´å¤æ‚ï¼Œå°±å¸Œæœ›æœ‰ä¸ªå¤–éƒ¨æŒ‰é’®å»è§¦å‘æ ¡éªŒ

```
import React, { useRef } from 'react'
import {
  ProCard,
  ProForm,
  ProFormGroup,
  ProFormList,
  ProFormText,
  ProFormInstance,
  ProFormDependency
} from '@ant-design/pro-components';
import { Button } from 'antd'

const Demo = () => {
  const formRef = useRef<ProFormInstance>()
  const check = () => {
    // å› ä¸ºæŸäº›åŸå› ï¼Œéœ€è¦åœ¨listé‡Œé¢æ ¡éªŒéƒ¨åˆ†æ•°æ®ï¼Œåªæ ¡éªŒå€¼
    formRef?.current?.validateFields() //TODO: è¿™ä¸ªçš„namePathåº”è¯¥æ€ä¹ˆå†™
  }
  return (
    <>
      <ProForm onFinish={async (e) => console.log(e)} formRef={formRef}>
        <ProFormText name="name" label="å§“å" />
        <ProFormList
          name="users"
          label="ç”¨æˆ·ä¿¡æ¯"
          initialValue={[
            {
              name: '1111',
            },
          ]}
          itemRender={({ listDom, action }, { record }) => {
            return (
              <ProCard
                bordered
                extra={action}
                title={record?.name}
                style={{
                  marginBlockEnd: 8,
                }}
              >
                {listDom}
              </ProCard>
            );
          }}
        >
          <ProFormGroup>
            <ProFormText name="name" label="å§“å" rules={[{
              required: true, message: 'è¯·è¾“å…¥å§“å'
            }]} />
            <ProFormText name="nickName" label="æ˜µç§°" />
          </ProFormGroup>
          <ProFormList
            name="labels"
            label="ç”¨æˆ·ä¿¡æ¯"
            initialValue={[
              {
                value: '333',
                value2: '333',
              },
            ]}
            copyIconProps={{
              tooltipText: 'å¤åˆ¶æ­¤è¡Œåˆ°æœ«å°¾',
            }}
            deleteIconProps={{
              tooltipText: 'ä¸éœ€è¦è¿™è¡Œäº†',
            }}
            itemRender={({ listDom, action }, { record }) => {
              return (
                <ProCard
                  bordered
                  extra={action}
                  title={record?.name}
                  style={{
                    marginBlockEnd: 8,
                  }}
                >
                  <>
                    {listDom}
                    <Button onClick={check}>æ ¡éªŒå€¼</Button>
                  </>
                </ProCard>
              );
            }}
          >
            <ProFormGroup key="group">
              <ProFormDependency name={['value2']}>
                {({ value2 }) => (
                  <ProFormText name="value" label="å€¼1" rules={[{
                    required: true, message: 'è¯·è¾“å…¥å€¼'
                  }, {
                    validator: (_, value) => {
                      if (+value > +value2) {
                        return Promise.reject(new Error(`å€¼1ä¸èƒ½å¤§äºå€¼2`))
                      }
                      return Promise.resolve()
                    }
                  }]} />
                )}
              </ProFormDependency>
             <ProFormText name="value2" label="å€¼2" />
            </ProFormGroup>
          </ProFormList>
        </ProFormList>
      </ProForm>

    </>
  );
};

export default Demo;
```

## chenshuai2144

æä¾›ä¸€ä¸ªèƒ½è¿è¡Œçš„demoè€Œä¸æ˜¯ä»£ç ç‰‡æ®µ
