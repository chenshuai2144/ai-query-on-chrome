# ğŸ‘‘ [éœ€æ±‚]ProFormTreeSelectå¯ä»¥å®ç°æœç´¢ç»“æœçš„å…³é”®å­—é«˜äº®å—

`AI Reply`

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ”© æ‰€å±æ¨¡å—æˆ–ç»„ä»¶

<!--
å¦‚æœä½ çš„åŠŸèƒ½éœ€æ±‚ç‡å±äºæŸä¸ªåŠŸèƒ½æ¨¡å—æˆ–è€…æ˜¯ç»„ä»¶çš„ï¼Œè¯·åœ¨æ­¤å¤„æ ‡æ˜ï¼Œå¦‚å¯¹`table`ç»„ä»¶æœ‰åŠŸèƒ½éœ€æ±‚ï¼Œåˆ™æ³¨æ˜ï¼šç‡å±ç»„ä»¶ï¼šProTable
 -->

### ğŸ¥° éœ€æ±‚æè¿°

ProFormTreeSelectå¯ä»¥å®ç°æœç´¢ç»“æœçš„å…³é”®å­—é«˜äº®å—

### â›° åŠŸèƒ½éœ€æ±‚é€‚ç”¨åœºæ™¯

<!--
è¯·ç®€å•æè¿°ä¸€ä¸‹è¿™ä¸ªæ–°åŠŸèƒ½é€šå¸¸æˆ–å¯ä»¥åº”ç”¨åœ¨å“ªäº›åœºæ™¯ä¸‹
-->

### ğŸ§ è§£å†³æ–¹æ¡ˆ

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

æ„Ÿè°¢æ‚¨çš„é—®é¢˜ï¼

ProFormTreeSelectæ˜¯antdçš„ç»„ä»¶ï¼Œç›®å‰antdçš„TreeSelectå¹¶ä¸æ”¯æŒæœç´¢ç»“æœçš„å…³é”®å­—é«˜äº®ã€‚ä¸è¿‡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è¿›è¡Œè§£å†³ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

1. å®‰è£…ç¬¬ä¸‰æ–¹åº“`react-highlight-words`:

```bash
npm install react-highlight-words --save
```

2. åœ¨ProFormTreeSelectä¸­ä½¿ç”¨`react-highlight-words`ç»„ä»¶ï¼š

```jsx
import { TreeSelect } from "antd";
import Highlighter from "react-highlight-words";

const TreeNode = TreeSelect.TreeNode;

// æ•°æ®æº
const treeData = [
  // ...
];

class ProFormTreeSelect extends React.Component {
  state = {
    searchValue: "",
    expandedKeys: [],
  };

  // å±•å¼€/æ”¶èµ·èŠ‚ç‚¹æ—¶è§¦å‘
  onExpand = (expandedKeys) => {
    this.setState({
      expandedKeys,
    });
  };

  // æ¸²æŸ“æœç´¢ç»“æœ
  renderTreeNodes = (data) =>
    data.map((item) => {
      const { label } = item;
      const { searchValue } = this.state;
      const index = label.indexOf(searchValue);
      const beforeStr = label.substr(0, index);
      const afterStr = label.substr(index + searchValue.length);
      const title =
        index > -1 ? (
          <Highlighter
            highlightStyle={{ backgroundColor: "#ffc069", padding: 0 }}
            searchWords={[searchValue]}
            autoEscape
            textToHighlight={`${beforeStr}${searchValue}${afterStr}`}
          />
        ) : (
          <span>{label}</span>
        );

      if (item.children) {
        return (
          <TreeNode title={title} key={item.key} value={item.value}>
            {this.renderTreeNodes(item.children)}
          </TreeNode>
        );
      }
      return <TreeNode key={item.key} {...item} title={title} />;
    });

  // æœç´¢èŠ‚ç‚¹
  handleTreeSearch = (value) => {
    const expandedKeys = [];
    this.findExpandedKeys(treeData, value, expandedKeys);
    this.setState({
      searchValue: value,
      expandedKeys,
    });
  };

  // ç­›é€‰å‡ºåº”è¯¥å±•å¼€çš„èŠ‚ç‚¹keys
  findExpandedKeys = (data, value, expandedKeys) => {
    data.forEach((item) => {
      const { label } = item;
      if (label.indexOf(value) !== -1) {
        expandedKeys.push(item.key);
      }
      if (item.children) {
        this.findExpandedKeys(item.children, value, expandedKeys);
      }
    });
  };

  render() {
    const { searchValue, expandedKeys } = this.state;

    return (
      <TreeSelect
        showSearch
        style={{ width: "100%" }}
        value={this.props.value}
        dropdownStyle={{ maxHeight: 400, overflow: "auto" }}
        placeholder="è¯·é€‰æ‹©"
        allowClear
        treeDefaultExpandAll
        onSearch={this.handleTreeSearch}
        onSelect={this.props.onChange}
        treeDefaultExpandedKeys={expandedKeys}
        onExpand={this.onExpand}
      >
        {this.renderTreeNodes(treeData)}
      </TreeSelect>
    );
  }
}
```

è¯¥ç¤ºä¾‹ä½¿ç”¨`react-highlight-words`æ¥æ¸²æŸ“æœç´¢ç»“æœé«˜äº®çš„æ–‡æœ¬ï¼ŒåŒæ—¶é’ˆå¯¹æœç´¢å…³é”®å­—å±•å¼€æ ‘èŠ‚ç‚¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

å¯¹äº`react-highlight-words`ç»„ä»¶çš„æ›´å¤šä½¿ç”¨è¯´æ˜å’Œå‚æ•°è®¾ç½®ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š[react-highlight-words](https://www.npmjs.com/package/react-highlight-words)ã€‚

å¸Œæœ›è¿™ä¸ªç¤ºä¾‹å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œå¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ã€‚
