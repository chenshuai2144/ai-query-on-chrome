# ğŸ›[BUG]å»æ‰lessæ–‡ä»¶ä¸­çš„~ alias

`AI Reply`

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ› bug æè¿°

less-loader çš„ ~ aliaså·²ç»åºŸå¼ƒäº†ï¼Œåƒesbuild-plugin-less éƒ½æ˜¯ä¸æ”¯æŒçš„ï¼Œéœ€è¦å»æ‰
![image](https://user-images.githubusercontent.com/9431954/178919849-212444d1-259c-4628-8151-1092c53c3f02.png)

### ğŸ“· å¤ç°æ­¥éª¤

### ğŸ æœŸæœ›ç»“æœ

å»æ‰lessæ–‡ä»¶ä¸­çš„~ alias

### ğŸ’» å¤ç°ä»£ç 

### Â© ç‰ˆæœ¬ä¿¡æ¯

- ProComponents ç‰ˆæœ¬: [e.g. 4.0.0]
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

é’ˆå¯¹è¯¥é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š

1. ä½¿ç”¨ tilde-importer
   å¯ä»¥åœ¨ less-loader ä¸­ä½¿ç”¨ tilde-importer æ’ä»¶ï¼Œè¯¥æ’ä»¶å°† ~ alias è·¯å¾„ä½œä¸ºç»å¯¹è·¯å¾„è¿›è¡Œè§£æï¼Œä»è€Œé¿å…äº†åœ¨ esbuild-plugin-less ä¸­çš„é—®é¢˜ã€‚å®‰è£… tilde-importer:

```
npm install -D less-loader@5.0.0-rc.5
npm install -D less-tilde-importer
```

åœ¨ webpack.config.js ä¸­é…ç½®ï¼š

```
module.exports = {
  // ...
  module: {
    rules: [
      {
        test: /\.less$/,
        use: [
          {
            loader: 'style-loader',
          },
          {
            loader: 'css-loader',
            options: {
              importLoaders: 1,
            },
          },
          {
            loader: 'less-loader',
            options: {
              lessOptions: {
                javascriptEnabled: true,
              },
              webpackImporter: false,
              // less-tilde-importer æ’ä»¶ä¼šè§£æ ~ è·¯å¾„
              // ç„¶åå°†å®ƒè½¬æ¢ä¸ºç»å¯¹è·¯å¾„
              plugins: [new (require('less-tilde-importer'))()],
            },
          },
        ],
      },
    ],
  },
};
```

2. è§£æè·¯å¾„ä¸­çš„ ~
   å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°† ~ alias è·¯å¾„ä¸Šçš„ ~ å»æ‰ï¼Œä¾‹å¦‚ï¼š

```
const path = require('path');
const lessRegex = /\.less$/;

// ...

{
  test: lessRegex,
  include: path.resolve(__dirname, 'src'),
  use: [
    ...
    {
      loader: 'less-loader',
      options: {
        lessOptions: {
          // å¦‚æœè®¾ç½®ä¸º trueï¼Œ~ è·¯å¾„å°†è¢«è§£æä¸ºæ¨¡å—è·¯å¾„
          // è¯·é¿å…ä½¿ç”¨ ~ alias
          javascriptEnabled: true,
        },
        // è§£æ ~ è·¯å¾„
        modifyVars: {},
        paths: [
          // less çš„è‡ªå®šä¹‰å‡½æ•°ï¼Œéœ€è¦æ”¾åœ¨ paths ä¸­
          path.resolve(__dirname, 'src/common/styles/mixins.less'),
          path.resolve(__dirname, 'src'),
          `!${path.resolve(__dirname, 'src/styles/color.less')}`,
        ],

        // å°† ~ å‰ç¼€å»æ‰
        modifyVars: {
          hack: `true; @import "${path.resolve(__dirname, 'src/common/styles/variables.less').replace(/~/g, '')}";`,
        }
      },
    },
  ],
},
```

3. æ”¹ç”¨ Sass
   å¦‚æœä½¿ç”¨ Sass çš„è¯ï¼Œå°±ä¸ä¼šé‡åˆ°è¿™ä¸ª ~ alias çš„é—®é¢˜äº†ã€‚éœ€è¦å®‰è£… sass-loader å’Œ node-sassï¼š

```
npm install sass-loader node-sass -D
```

webpack.config.js ä¸­çš„é…ç½®ç±»ä¼¼ï¼š

```
{
  test: /\.scss$/,
  use: [
    {
      loader: 'style-loader',
    },
    {
      loader: 'css-loader',
      options: {
        importLoaders: 1,
      },
    },
    {
      loader: 'sass-loader',
    },
  ],
},
```

ä»¥ä¸Šè§£å†³æ–¹æ¡ˆå¯ä»¥å¸®åŠ©ä½ å»æ‰ less æ–‡ä»¶ä¸­çš„ ~ aliasï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜å¯ä»¥å†æå‡ºæ¥å“¦ã€‚
