# 🐛[BUG] ProFormTreeSelect没有使用request获取数据而是使用fieldProps.treeData筛选会出现失效

`⭕️   bug`,`form`,`AI Reply`

fieldProps中是否设定fieldNames和treeNodeFilterProp效果都没有出现
![image](https://user-images.githubusercontent.com/46487804/181155484-1de0f420-e5ed-4527-9a04-34d7aacc802f.png)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

你好，根据你提供的问题描述和截图，可以看出你遇到了使用Ant Design Pro组件库中的ProFormTreeSelect组件时出现失效的问题。该问题可能出现在使用fieldProps.treeData筛选选择内容时，但是没有从后台获取数据。

解决方案：
你可以尝试使用request异步从后台获取数据，然后再渲染ProFormTreeSelect组件。下面是一个简单的示例代码。

```javascript
import { request } from "umi";
import { ProFormTreeSelect } from "@ant-design/pro-form";

const MyForm = () => {
  const [options, setOptions] = useState([]);

  useEffect(() => {
    // 异步请求从后端获取数据
    request("/api/options").then((data) => {
      setOptions(data);
    });
  }, []);

  return (
    <ProFormTreeSelect
      request={async () => options}
      treeData={options}
      // 其他props
    />
  );
};
```

在上面的代码中，使用了useState和useEffect来管理ProFormTreeSelect所需要的options数据。在useEffect中，使用request异步从后台获取数据，然后将数据设置为组件状态中的options。在ProFormTreeSelect中，使用request来请求options数据，然后传递给treeData属性。这样做，可以确保每次都从后台获取数据，相比于使用fieldProps.treeData设置默认数据，能更好地避免出现失效的情况。

另外，如果你需要进一步了解ProFormTreeSelect组件的使用，可以参考Ant Design Pro官方文档的相关章节：
https://procomponents.ant.design/components/form-tree-select/#API

希望对你有所帮助。
