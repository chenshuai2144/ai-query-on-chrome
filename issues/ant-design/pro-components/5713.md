# 🐛[BUG] BetaSchemaForm 支持 水平布局，或者Embed 模式支持 FormList渲染

`form`,`🎖️  featrue`,`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

BetaSchemaForm 不支持水平布局，希望通过Embed模式解决，但Embed模式又无法渲染FormList
https://codesandbox.io/s/bqvsqg?file=/App.tsx

<!--
详细地描述 bug，让大家都能理解
-->

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

### 🏞 期望结果

期望BetaSchemaForm支持水平布局，或者有替代方案

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

- ProComponents 版本: [e.g. 4.0.0]
- umi 版本 3.5
- 浏览器环境 Chrome 最新
- 开发环境 macOS

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

Hi there，感谢提问。根据您的描述，我可以推断出您的问题是希望在 BetaSchemaForm 中支持水平布局或通过 Embed 模式支持 FormList 渲染，但似乎遇到了阻碍。我将尽力为您提供解决方案。

关于 BetaSchemaForm 水平布局，官方的文档中并未提及，但可以通过 antd 的 Form 组件来实现水平布局。具体实现方式可以参考 antd 的官方文档：https://ant.design/components/form-cn/#components-form-demo-horizontal-login。

示例代码如下所示：

```jsx
import { Form, Input, Button, Checkbox } from "antd";

<Form
  labelCol={{ span: 6 }}
  wrapperCol={{ span: 14 }}
  layout="horizontal"
  initialValues={{ remember: true }}
  onFinish={onFinish}
>
  <Form.Item
    label="Username"
    name="username"
    rules={[{ required: true, message: "Please input your username!" }]}
  >
    <Input />
  </Form.Item>

  <Form.Item
    label="Password"
    name="password"
    rules={[{ required: true, message: "Please input your password!" }]}
  >
    <Input.Password />
  </Form.Item>

  <Form.Item
    name="remember"
    valuePropName="checked"
    wrapperCol={{ offset: 6, span: 14 }}
  >
    <Checkbox>Remember me</Checkbox>
  </Form.Item>

  <Form.Item wrapperCol={{ offset: 6, span: 14 }}>
    <Button type="primary" htmlType="submit">
      Submit
    </Button>
  </Form.Item>
</Form>;
```

关于 Embed 模式支持 FormList 渲染，您可以根据以下步骤实现：

1. 在 BetaSchemaForm 中定义 FormList 并设置其 name。

   ```jsx
   <BetaSchemaForm
     {...formLayout}
     data={data}
     schema={schema}
     onFinish={onFinish}
     embed
     prefixCls="test"
   >
     <BetaSchemaField
       name="items"
       type="list"
       render={(fieldProps) =>
         // 将 FormList 渲染组件 returned 出去
         this.renderFormList(fieldProps, [
           {
             title: "姓名",
             name: "name",
             type: "string",
           },
           {
             title: "年龄",
             name: "age",
             type: "number",
           },
           {
             title: "邮箱",
             name: "email",
             type: "string",
           },
         ])
       }
     />
   </BetaSchemaForm>
   ```

2. 定义 renderFormList 方法。

   ```jsx
   /**
    * 渲染 FormList 组件
    */
   renderFormList(fieldProps: any, schema: any[]) {
     const { value = [], onChange } = fieldProps;

     // 点击添加按钮，新增一行
     const handleAdd = () => {
       onChange([...value, {}]);
     };

     // 点击删除按钮，删除当前行
     const handleRemove = (index: number) => {
       onChange(value.filter((_, i) => i !== index));
     };

     return (
       <div className="form-list">
         <div className="form-list--header">
           {schema.map((item) => (
             <div key={item.name} className="form-list--header-item">
               {item.title}
             </div>
           ))}
           <div className="form-list--header-item">操作</div>
         </div>
         {value.map((item, index) => (
           <div key={index} className="form-list--item">
             {schema.map(({ name, type }) => (
               <div key={name} className="form-list--item-field">
                 <BetaSchemaField
                   name={`items[${index}].${name}`}
                   type={type}
                   fieldProps={{
                     initialValue: item[name],
                   }}
                 />
               </div>
             ))}
             <div className="form-list--item-action">
               <Button onClick={() => handleRemove(index)}>删除</Button>
             </div>
           </div>
         ))}
         <div className="form-list--add-btn">
           <Button onClick={handleAdd} type="primary">
             添加
           </Button>
         </div>
       </div>
     );
   }
   ```

以上是将 FormList 加入到 BetaSchemaForm 中的示例代码。如果您使用的是别的组件库，可能会有差异。希望这些信息能够对您有所帮助，如果还有其它的问题或疑问，请随时与我联系。

## chenshuai2144

支持啦
