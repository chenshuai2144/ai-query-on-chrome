# 🐛[BUG] EditableProTable 设置了name属性后，新增一条数据会立即在表单field的值中更新这条数据，预期应该是在保存后再新增数据

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

EditableProTable 设置了 name 属性后，新增一条数据会立即在表单field的值中更新这条数据，即使是取消这条数据；这样不符合预期，需要去手动处理这条空数据。

相反，如果不使用自带的 name 属性作为表单 filed ，而是在外层 使用 Form.Item 包裹则是符合预期的，新增一条数据是在保存后再新增到 field 中去

<!--
详细地描述 bug，让大家都能理解
-->

### 📷 复现步骤

新增一条数据，不保存 or 取消的情况下，查看对应的Field的值

复现： https://codesandbox.io/s/yu-formitem-pei-he-forked-uvrk8v?file=/App.tsx
官网的 《与 FormItem 配合》 这个例子也可以复现

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

### 🏞 期望结果

期望是新增数据时，是在保存后表单field的值才变更，而不是新增后就插入了无效的数据

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

复现： https://codesandbox.io/s/yu-formitem-pei-he-forked-uvrk8v?file=/App.tsx
官网的 《与 FormItem 配合》 这个例子也可以复现

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

- ProComponents 版本: 2.3.20
- umi 版本： 3.x
- 浏览器环境：Chrome
- 开发环境 mac OS

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

配置了name，可编辑表格的数据就被 form 托管了，设计就是这样的。你可以配置 rule 或者自己洗一下数据

## WuJiY

> 配置了name，可编辑表格的数据就被 form 托管了，设计就是这样的。你可以配置 rule 或者自己洗一下数据

我遇到了另外个问题，我在做sku表格，一个规格variant 用的是formlist 根据规格生成editableTable的sku表格，然后每次修改formList里的数据都会改变editableTablel里的数据，如果editabletable 的cloumn 设置 formItemPorps的rule属性 会影响生成的数据被置空了

## VicoHu

> 配置了name，可编辑表格的数据就被 form 托管了，设计就是这样的。你可以配置 rule 或者自己洗一下数据

@chenshuai2144 实际开发中，确实是需要后端校验是否保存的，比如数据库重复键校验，或者由于后端接口的异常导致的错误而没有持久化数据成功，这些都不是前端的规则校验可以完成的。
不知道有没有要计划要在这进行调整哈

## chenshuai2144

每次重新刷新所有的数据就能解决这个问题了，数据一致性的问题太难解决了
