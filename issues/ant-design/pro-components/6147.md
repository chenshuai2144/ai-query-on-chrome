# ğŸ›[BUG] ProFormListåµŒå¥—ä¸¤å±‚ä»¥ä¸Šï¼Œç¬¬äºŒå±‚ä½¿ç”¨actionRef.current?.getList();æ— æ³•è·å–åˆ—è¡¨æ•°æ®

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ› bug æè¿°

ProFormListåµŒå¥—ä¸¤å±‚ä»¥ä¸Šï¼Œç¬¬ä¸€å±‚ä½¿ç”¨actionRef.current?.getList();å¯ä»¥è·å–åˆ—è¡¨æ•°æ®ï¼Œç¬¬äºŒå±‚ä½¿ç”¨actionRef.current?.getList();æ— æ³•è·å–åˆ—è¡¨æ•°æ®

### ğŸ“· å¤ç°æ­¥éª¤

å¤ç°ä»£ç ï¼šhttps://codesandbox.io/s/proform-list-forked-2u6xt9?file=/App.tsx:0-1484

![image](https://user-images.githubusercontent.com/103124359/198945302-708125b5-fb0c-4261-9226-6f772adf88fe.png)

### ğŸ æœŸæœ›ç»“æœ

ProFormListåµŒå¥—ä¸¤å±‚ä»¥ä¸Šï¼Œç¬¬ä¸€å±‚ä½¿ç”¨actionRef.current?.getList();å¯ä»¥è·å–åˆ—è¡¨æ•°æ®ï¼Œç¬¬äºŒå±‚ä½¿ç”¨actionRef.current?.getList();ä¹Ÿèƒ½è·å–åˆ—è¡¨æ•°æ®

### ğŸ’» å¤ç°ä»£ç 

```js
import React, { useRef } from "react";
import ProForm, {
  ProFormList,
  ProFormText,
  ProFormInstance,
} from "@ant-design/pro-form";

const Demo = () => {
  const ProFormListRef1 = useRef();
  const actionGuard1 = {
    beforeAddRow: async () => {
      const row = ProFormListRef1.current?.getList();
      console.log("row1", row);
      return new Promise((resolve) => {
        resolve(true);
      });
    },
  };

  const ProFormListRef2 = useRef();
  const actionGuard2 = {
    beforeAddRow: async () => {
      const row = ProFormListRef2.current?.getList();
      console.log("row2", row);
      return new Promise((resolve) => {
        resolve(true);
      });
    },
  };

  return (
    <ProForm>
      <ProFormList
        name="lv1"
        label="ç¬¬ä¸€å±‚"
        actionRef={ProFormListRef1}
        actionGuard={actionGuard1}
      >
        {(_, idxLv1) => {
          return (
            <>
              <ProFormText name="lv1Name" label="å§“å1" />
              <ProFormList
                style={{ paddingLeft: "50px" }}
                name="lv2"
                label="ç¬¬äºŒå±‚"
                actionRef={ProFormListRef2}
                actionGuard={actionGuard2}
              >
                {(f, idxLv2, action) => {
                  return <ProFormText name="lv2Name" label="å§“å2" />;
                }}
              </ProFormList>
              <hr />
            </>
          );
        }}
      </ProFormList>
    </ProForm>
  );
};

export default Demo;
```

### Â© ç‰ˆæœ¬ä¿¡æ¯

@ant-design/pro-formç‰ˆæœ¬: [2.2.14]
umi ç‰ˆæœ¬: 3.5.25
æµè§ˆå™¨ç¯å¢ƒ
å¼€å‘ç¯å¢ƒ [windows10]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

ä¿®å¤äº†ï¼Œå¯ä»¥æ›´æ–°ç‰ˆæœ¬è¯•è¯•

## chaihuangqi

> ä¿®å¤äº†ï¼Œå¯ä»¥æ›´æ–°ç‰ˆæœ¬è¯•è¯•

æ›´æ–°åˆ°å“ªä¸ªç‰ˆæœ¬ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ

## Yaya-20

@ant-design/pro-form 2.11.7 åµŒå¥—ä¸¤å±‚åï¼Œé‡Œé¢ä¸€å±‚ç”¨ getListè·å–ä¸åˆ°å€¼
