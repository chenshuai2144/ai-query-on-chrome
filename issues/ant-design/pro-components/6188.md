# 🐛[BUG] [ProLayout] 点击右侧的灰色区域时无法收起菜单

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

<!--
详细地描述 bug，让大家都能理解
-->

见官方文档上的[Demo](https://procomponents.ant.design/~demos/layout-customizemenu)，在2.3.26版本上，点击右侧灰色区域，可以收起菜单的，但是之后的版本就不能了，希望能恢复此功能～

<img width="576" alt="image" src="https://user-images.githubusercontent.com/16148054/200979544-fa110641-fc9d-46e2-9be9-8b51ddf82792.png">

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

### 🏞 期望结果

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

- ProComponents 版本: [e.g. 4.0.0] 2.3.30
- umi 版本
- 浏览器环境 chrome 107.0.5304.87
- 开发环境 [e.g. mac OS] macos

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## xXAvoraXx

这个问题有什么解决办法吗？

## mashirozx

在initialState里面设置一个Boolean变量，传给ProLayout的collapse选项以控制菜单展开，最后自己写一个z-index=999的全屏元素，点击时触发收起菜单

## xXAvoraXx

"在initialState里面设置一个Boolean变量，传给ProLayout的collapse选项以控制菜单展开" <-- 我照你说的做了。
"最后自己写一个z-index=999的全屏元素，点击时触发收起菜单" <--- 我不明白这部分。

## mashirozx

就是自己写一个元素占在灰色区域

## xXAvoraXx

定义layout的部分没有maskClosable属性，怎么写点击灰色区域应该关闭呢？

```
export const layout: RunTimeLayoutConfig = ({ initialState, setInitialState }) => {
  const { collapsed } = initialState ?? {};

  return {
    rightContentRender: () => <RightContent />,
    waterMarkProps: {
      content: initialState?.currentUser?.name,
    },
    collapsed: collapsed,
    onCollapse: (val) => {
      setInitialState((preInitialState) => ({
        ...preInitialState,
        collapsed: val,
      }));
    },
    collapsedButtonRender: (col?, defaultDom?) => {
      return (
        <Button
          onClick={() => {
            setInitialState((preInitialState) => ({
              ...preInitialState,
              collapsed: !col,
            }));
          }}
        >
          {collapsed ? <MenuUnfoldOutlined /> : <MenuFoldOutlined />}
        </Button>
      );
    },
    footerRender: () => <Footer />,
    onPageChange: () => {
      const { location } = history;
      // 如果没有登录，重定向到 login
      if (!initialState?.currentUser && location.pathname !== loginPath) {
        history.push(loginPath);
      }
    },
    menuHeaderRender: undefined,
    // 自定义 403 页面
    // unAccessible: <div>unAccessible</div>,
    // 增加一个 loading 的状态
    childrenRender: (children, props) => {
      // if (initialState?.loading) return <PageLoading />;
      return (
        <>
          {children}
          {!props.location?.pathname?.includes('/login') && (
            <SettingDrawer
              disableUrlParams
              enableDarkTheme
              settings={initialState?.settings}
              onSettingChange={(settings) => {
                setInitialState((preInitialState) => ({
                  ...preInitialState,
                  settings,
                }));
              }}
            />
          )}
        </>
      );
    },
    ...initialState?.settings,
  };
};
```

## mashirozx

我意思就是不要它的，自己写一个点击区域呀
<img width="1624" alt="image" src="https://user-images.githubusercontent.com/16148054/203981025-db441ce3-d7d4-4277-b9bc-92322a004a01.png">

<img width="535" alt="image" src="https://user-images.githubusercontent.com/16148054/203981136-c28676cf-9aa9-4e85-8906-19a2163a599c.png">

## hinego

有解决方案了吗

## xXAvoraXx

> 有解决方案了吗
> 我找不到解决方案，所以我将使用旧主题。
> I couldn't find a solution so I'm going with the old theme.

## mashirozx

我帖的不就是解决方案么…

## xXAvoraXx

> 我帖的不就是解决方案么…

这不是描述性的。

## mashirozx

就差把项目源码给你了🐑
