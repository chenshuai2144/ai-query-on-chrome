# 🐛[BUG]可编辑表格的日期列，获取格式化数据时没按照指定的日期格式

`form`,`📦  Need to reproduce`,`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

可编辑表格的日期列，用fieldProps.format指定了日期格式，但是使用form的getFieldsFormatValue和table的getRowsData获取数据时，拿到的都是标准时间格式的数据，不是指定的日期格式

### 📷 复现步骤

样例代码中，点击“获取table数据”查看提示信息、点击“提交”查看控制台

### 🏞 期望结果

日期列updDate按照指定的日期格式进行格式化

### 💻 复现代码

import { useRef } from 'react';
import { message, Button } from 'antd';
import type { ProFormInstance} from '@ant-design/pro-form';
import { ProForm } from '@ant-design/pro-form';
import type { EditableFormInstance, ProColumns } from '@ant-design/pro-table';
import { EditableProTable } from '@ant-design/pro-table';

const BasicTest: React.FC = () => {
const formRef = useRef<ProFormInstance>();

// 可维护列表
type TestModel = {
rowIndex: number;
code: string;
name: string;
updDate?: string;
desc: string;
};
const columns: ProColumns<TestModel>[] = [
{
title: '代码',
dataIndex: 'code',
formItemProps: {
rules: [{ required: true }],
},
},
{
title: '名称',
dataIndex: 'name',
},
{
title: '修改日期',
dataIndex: 'updDate',
valueType: 'date',
fieldProps: {
format: 'YYYYMMDD',
}
},
{
title: '说明',
dataIndex: 'desc',
},
{
title: '操作',
valueType: 'option',
width: 200,
render: (\_1, record, \_2, action) => [
<a
key="editable"
onClick={() => {
const obj: any = action;
if (obj.editableKeys.length <= 0) {
action?.startEditable?.(record.rowIndex || 0);
} else {
message.warning('存在正在编辑行，请完成正在编辑行');
}
}}
>
编辑
</a>,
],
},
];
const dataSource: TestModel[] = [
{ rowIndex: 2, code: 'code1', name: 'name1', desc: 'desc1' },
{ rowIndex: 3, code: 'code2', name: 'name2', desc: 'desc2' },
];
// 可编辑表格form使用样例
const editorFormRef = useRef<EditableFormInstance<TestModel>>();

return (
<ProForm<{
table: TestModel[];
}>
initialValues={{
                table: dataSource,
              }}
validateTrigger="onBlur"
formRef={formRef}
onFinish={async () => {
console.log(formRef.current?.getFieldsFormatValue?.());
}} >
<EditableProTable<TestModel>
name="table"
rowKey="rowIndex"
toolBarRender={() => [
<Button
key="rows"
onClick={() => {
const rows = editorFormRef.current?.getRowsData?.();
alert(JSON.stringify(rows));
}}
>
获取 table 的数据
</Button>,
]}
columns={columns}
editableFormRef={editorFormRef}
recordCreatorProps={{
                  record: () => {
                    return {
                      rowIndex: Date.now(),
                    } as unknown as TestModel;
                  },
                }}
editable={{
                  saveText: '确定',
                }}
/>
</ProForm>
);
};

export default BasicTest;

### © 版本信息

- ProComponents 版本:2.3.46
- umi 版本
- 浏览器环境
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

## chenshuai2144

修复了，因为dayjs 的版本重复导致的
