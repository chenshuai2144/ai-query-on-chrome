# üßê[ÈóÆÈ¢ò]EditableProTable‰ΩøÁî®ÊêúÁ¥¢ÁöÑÈóÆÈ¢òÔºàreadonlyÂíåËá™ÂÆö‰πâÊêúÁ¥¢Ë°®ÂçïÔºâ

### üßê ÈóÆÈ¢òÊèèËø∞

1. ‰ΩøÁî®EditableProTableÊó∂columnsÂèÇÊï∞readonly: trueÊó∂ÔºåÊêúÁ¥¢‰ºöÊòæÁ§∫-ÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÊêúÁ¥¢ËøòÊòØÊÉ≥Ë¶ÅÁîüÊàêÊ≠£Â∏∏ÁöÑÊó∂Èó¥ÈÄâÊã©Âô®Â∫îËØ•Â¶Ç‰ΩïÈÖçÁΩÆÂë¢ÔºüÂ∏åÊúõÁöÑÊòØÂàóË°®‰∏≠ÁöÑÂ§±ÊïàÊó∂Èó¥Êñ∞Â¢ûÂíåÁºñËæëÊó∂‰∏çÂèØ‰øÆÊîπÔºåÂπ∂ÂèØ‰ª•Ê≠£Â∏∏Ê∏≤ÊüìÊêúÁ¥¢Ë°®ÂçïÈ°π
2. ‰ΩøÁî®EditableProTableÊó∂Â¶ÇÊûúË°®Ê†º‰∏≠ÁºñËæëÁöÑË°®ÂçïÈ°π‰∏∫dateTimeÂ¶Ç‰ΩïÂú®ÊêúÁ¥¢Ë°®ÂçïËá™ÂÆö‰πâ‰∏∫Êó•ÊúüÂå∫Èó¥ÊêúÁ¥¢Âë¢ÔºüÊúâÊÄùËÄÉËøá‰ΩøÁî®renderFormItemÔºå‰ΩÜrenderFormItem‰ºöÂêåÊó∂ÂΩ±ÂìçË°®Ê†º‰∏≠ÁöÑË°®ÂçïÈ°πÂíåÊêúÁ¥¢ÁöÑË°®Âçï

### üíª Á§∫‰æã‰ª£Á†Å

> [![Edit on CodeSandbox](https://camo.githubusercontent.com/90808661433696bc57dce8d4ad732307b5cec6270e6b846f114dcd7ee7f9458a/68747470733a2f2f636f646573616e64626f782e696f2f7374617469632f696d672f706c61792d636f646573616e64626f782e737667)](https://codesandbox.io/s/editableprotablesou-suo-shi-li-forked-0mc4w8)

```import type { ProColumns } from '@ant-design/pro-components';
import { EditableProTable } from '@ant-design/pro-components';
import React, { useState } from 'react';
import { requiredValidator } from '@/utils/validators';
import { cityArray } from '@/constants/pca';
import {
  deliverAddressListApi,
  deliverAddressPostApi,
  deliverAddressPatchApi,
} from './api';
import TableAction from '@/components/Table/TableAction';
import { Popconfirm } from 'antd';
import ImportButton from '@/components/ImportButton';

const DeliverAddress: React.FC<unknown> = () => {
  const [editableKeys, setEditableRowKeys] = useState<React.Key[]>([]);

  const editableSave = async (data: any, row: any) => {
    const params = {
      ...data,
      province: data.region[0],
      city: data.region[1],
      county: data.region[2],
    };
    const api = row.vendorId ? deliverAddressPatchApi : deliverAddressPostApi;
    return await api({
      ...params,
    });
  };

  const columns: ProColumns<any>[] = [
    {
      title: 'Vendor ID',
      dataIndex: 'vendorId',
      formItemProps: requiredValidator(),
    },
    {
      title: 'ÂèëË¥ßÁúÅÂ∏ÇÂå∫',
      dataIndex: 'region',
      valueType: 'cascader',
      fieldProps: {
        options: cityArray,
      },
      render: (_, record) =>
        record.region
          ? record.region.join('/')
          : `${record.province}/${record.city}/${record.county}`,
    },
    {
      title: 'ÂèëË¥ßÂú∞ÂùÄ',
      dataIndex: 'address',
      hideInSearch: true,
      valueType: 'text',
    },
    {
      title: 'ÁîüÊïàÊó∂Èó¥',
      dataIndex: 'createdAt',
      valueType: 'dateTime',
      readonly: true,
      width: '15%',
    },
    {
      title: 'Â§±ÊïàÊó∂Èó¥',
      dataIndex: 'disabledAt',
      valueType: 'dateTime',
      width: '15%',
    },
    {
      title: 'Êìç‰Ωú',
      valueType: 'option',
      width: 200,
      render: (text, record, _, action) => (
        <TableAction
          editClick={() => {
            record.region = [record.province, record.city, record.county];
            action?.startEditable?.(record.id);
          }}
          deleteClick={() => {}}
          action={
            <Popconfirm
              title="ÂÅúÁî®Ê≠§ÂèëË¥ßÂú∞Ôºü"
              onConfirm={() => {
                console.log('ÂÅúÁî®');
              }}
            >
              <a>ÂÅúÁî®</a>
            </Popconfirm>
          }
        ></TableAction>
      ),
    },
  ];

  return (
    <>
      <EditableProTable<any>
        controlled
        search={{ filterType: 'query' }}
        rowKey="id"
        headerTitle="ÂèëË¥ßÂú∞ÁÆ°ÁêÜ"
        recordCreatorProps={{
          position: 'top',
          record: () => ({ id: Date.now() }),
        }}
        loading={false}
        columns={columns}
        pagination={{}}
        dateFormatter="string"
        request={async (params) => {
          const res = await deliverAddressListApi(params);
          return {
            total: res.meta.total,
            data: res.data,
            success: res.success,
          };
        }}
        toolbar={{
          actions: [<ImportButton key="button" />],
        }}
        editable={{
          type: 'multiple',
          editableKeys,
          onSave: async (rowKey, data, row) => {
            await editableSave(data, row);
          },
          onChange: setEditableRowKeys,
        }}
      />
    </>
  );
};

export default DeliverAddress;
```

### üöë ÂÖ∂‰ªñ‰ø°ÊÅØ

![image](https://user-images.githubusercontent.com/30310735/210513616-612f800f-81c3-4b67-964b-6d5865734064.png)

## Gip886

Ëá™ÂÆö‰πâÊ∏≤ÊüìÂêß
![image](https://user-images.githubusercontent.com/49873054/210527949-3907e8fb-86d7-40ef-8830-97d220bf38c5.png)

## 0131LWG

> Ëá™ÂÆö‰πâÊ∏≤ÊüìÂêß ![image](https://user-images.githubusercontent.com/49873054/210527949-3907e8fb-86d7-40ef-8830-97d220bf38c5.png)

Ë∞¢Ë∞¢ÂèØ‰ª•‰∫Ü
