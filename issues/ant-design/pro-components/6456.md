# 🐛[BUG] BetaSchemaForm 在配置request属性时，会导致columns中renderFormItem第三个参数为空对象

`⭕️   bug`,`form`,`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

<!--
详细地描述 bug，让大家都能理解
-->

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

```
import React from "react";
import { BetaSchemaForm } from "@ant-design/pro-components";

export default () => {
  const columns = [
    {
      title: "test",
      key: "test",
      dataIndex: "test",
      valueType: "text",
      renderFormItem: (_a, _b, from) => {
        console.log(from, "renderFormItem");
        return <div>123</div>;
      }
    }
  ];
  return <BetaSchemaForm columns={columns} title="RFI" request={true} />;
};
```

只要request不为false或undefined，第二次打印form时，form为空对象
第一次打印
{getFieldValue: ƒ, getFieldsValue: ƒ, getFieldError: ƒ, getFieldWarning: ƒ, getFieldsError: ƒ, …},'renderFormItem'
第二次打印
{},'renderFormItem'
当request为true时,打印2次
![image](https://user-images.githubusercontent.com/24764561/210522803-c2763b6c-28d9-48e9-8cb0-0a44bf82d5e9.png)
当request为false时,打印3次
![image](https://user-images.githubusercontent.com/24764561/210523675-b4e7a58e-12a0-42e4-8c92-349e48bd52a6.png)

### 🏞 期望结果

renderFormItem中form保持不变
由于大量依赖了1.1.x版本的pro-components，升级2.x代价较大，希望能够修复下这个问题。
根据排查从1.1.17版本开始有这个问题的。

### 💻 复现代码

[codesandbox](https://codesandbox.io/s/schema-biao-dan-forked-6fjx7s?file=/App.tsx)

### © 版本信息

- ProComponents 版本: 1.1.25
- 浏览器环境 Chrome 108.0.5359.124
- 开发环境 mac OS

### 🚑 其他信息

![image](https://user-images.githubusercontent.com/24764561/210536338-91e34caf-29af-4fd4-8d01-457ebbd42b02.png)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

根据您提供的信息，症状是每次打印 `renderFormItem` 的时候 form 都会变为空对象。经过查阅 ProComponents 的文档，它的 `BetaSchemaForm` 默认传递的 `request` 属性是 `typeof request === 'undefined' ? true : request`, 所以可以考虑在调用的时候不传递 `request` 属性，或者传递一个显式的 `false` 值。

如果实际业务中需要传递 `request`, 可以考虑升级 `ProComponents` 的版本，或者查看是否有替代的属性来达成同样的效果，或者联系组件作者寻求帮助。

如果以上建议仍无法解决问题，可以考虑提供完整可执行的代码和复现步骤，以便其他人帮助您解决问题。

## chenshuai2144

修复啦，时机问题，再试试
