# ğŸ§[é—®é¢˜] Protable é‡Œçš„ Column Config/Selection å˜åŒ–å, æœ‰å›è°ƒå‡½æ•°å—ï¼Ÿæˆ‘æƒ³ä¿å­˜å·²ç»é€‰æ‹©çš„åˆ—ã€‚

`AI Reply`

### ğŸ§ é—®é¢˜æè¿°

ç”¨æˆ·é€‰æ‹©äº†Protable é‡Œçš„ Column Config/Selectionå,
æˆ‘ä»¬æƒ³ä¿å­˜å·²ç»é€‰æ‹©çš„åˆ—ã€‚

## Gip886

![image](https://user-images.githubusercontent.com/49873054/217735738-4b2bad02-7fad-4195-afd8-57a7ab6afbf7.png)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

### ğŸŒµ å›ç­”

åœ¨Protableä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨onColumnsStateChangeäº‹ä»¶æ¥è·å–columnsçš„çŠ¶æ€æ›´æ”¹ï¼Œä¿å­˜æ‰€é€‰æ‹©çš„åˆ—ã€‚åœ¨ä½¿ç”¨onColumnsStateChangeäº‹ä»¶ä¹‹å‰ï¼Œéœ€è¦å°†columnsä¸­çš„æ¯ä¸€é¡¹çš„hideInTableå±æ€§å€¼è®¾ç½®ä¸ºfalseã€‚

å…·ä½“å®ç°å¦‚ä¸‹ï¼š

```jsx
import React, { useState } from "react";
import { Table } from "antd";
import ProTable, { TableDropdown } from "@ant-design/pro-table";

const dataSource = [
  {
    key: "1",
    name: "Mike",
    age: 32,
    address: "10 Downing Street",
  },
  {
    key: "2",
    name: "John",
    age: 42,
    address: "10 Downing Street",
  },
];

const columns = [
  {
    title: "Name",
    dataIndex: "name",
    key: "name",
  },
  {
    title: "Age",
    dataIndex: "age",
    key: "age",
    hideInTable: false,
  },
  {
    title: "Address",
    dataIndex: "address",
    key: "address",
    hideInTable: false,
  },
  {
    title: "",
    key: "option",
    valueType: "option",
    render: () => [
      <TableDropdown
        key="edit"
        onSelect={() => ({})}
        menus={[
          {
            key: "copy",
            name: "Copy",
          },
          {
            key: "delete",
            name: "Delete",
          },
        ]}
      />,
    ],
  },
];

export default () => {
  const [selectedColumns, setSelectedColumns] = useState([]);

  const handleColumnsStateChange = (val) => {
    // Map all selected columns and get the key
    const selected = Object.keys(val).filter((item) => !!val[item]);
    setSelectedColumns(selected);
  };

  return (
    <ProTable
      dataSource={dataSource}
      columns={columns}
      options={{
        search: true,
        setting: true,
        fullScreen: true,
      }}
      onColumnsStateChange={handleColumnsStateChange}
    />
  );
};
```

æˆ‘ä»¬åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½¿ç”¨äº†useState Hookä¸­çš„selectedColumnsæ¥ä¿å­˜æ‰€é€‰æ‹©çš„åˆ—keyã€‚åœ¨handleColumnsStateChangeæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Object.keyså’Œfilteræ¥ä»valä¸­è·å–æ‰€æœ‰å·²é€‰ä¸­çš„åˆ—çš„keyå€¼ï¼Œç„¶åå°†å…¶ä¿å­˜åœ¨å˜é‡selectedä¸­ï¼Œå¹¶èµ‹å€¼ç»™selectedColumnsã€‚

å¦å¤–ï¼ŒonColumnsStateChangeè¿˜å¯ä»¥åœ¨columnsçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°æ¥è·å–å½“å‰çš„stateçŠ¶æ€ã€‚è¯¥å›è°ƒå‡½æ•°æ¥å—ä¸€ä¸ªå›è°ƒå€¼ä½œä¸ºå‚æ•°ï¼Œè¯¥å›è°ƒå€¼åŒ…å«äº†å½“å‰columnsçš„çŠ¶æ€ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨åˆ—çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œç«‹å³æ‰§è¡Œç›¸å…³é€»è¾‘ï¼Œä»è€Œåšåˆ°å®Œç¾çš„é€‚åº”ã€‚æ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š

```jsx
const handleColumnsStateChange = (val) => {
  // Map all selected columns and get the key
  const selected = Object.keys(val).filter((item) => !!val[item]);
  setSelectedColumns(selected);

  // Print current columns status
  console.log(val);
};
```

### ğŸ“š å‚è€ƒæ–‡æ¡£

- ProTable onColumnsStateChangeï¼šhttps://procomponents.ant.design/components/table/#onColumnsStateChange
