# ğŸ›[BUG] å®˜æ–¹å®ä¾‹ä¸­ProFormListï¼Œå½“ä¸¤ä¸ªProFormListä¸ºçˆ¶å­å…³ç³»æ—¶ï¼Œå­ProFormListå†… transform ä¸ç”Ÿæ•ˆ

`â­•ï¸   bug`,`form`,`ğŸ¤·ğŸ¼ How to use`,`AI Reply`

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ› bug æè¿°

å½“ä¸¤ä¸ªProFormListä¸ºçˆ¶å­å…³ç³»æ—¶ï¼Œå­ProFormListå†… transform ä¸ç”Ÿæ•ˆ

### ğŸ“· å¤ç°æ­¥éª¤

<!--
æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜ï¼Œå¦‚æœå¯èƒ½ï¼Œå°½é‡æä¾›å¯æ‰§è¡Œä»£ç ï¼Œ
å¦‚ï¼šhttps://codesandbox.io/ åœ¨æ­¤å¤„åˆ›å»ºä¸€ä¸ª codesandboxï¼Œæ–¹ä¾¿æˆ‘ä»¬æ›´å¿«çš„æ’æŸ¥å’Œå¤ç°é—®é¢˜
-->

### ğŸ’» å¤ç°ä»£ç 

```

import React from 'react';
import {
  ProCard,
  ProForm,
  ProFormGroup,
  ProFormList,
  ProFormText,
} from '@ant-design/pro-components';

const Scene: React.FC<{}> = () => {
  return (
    <ProForm onFinish={async (e) => console.log(e)}>
      <ProFormText name="name" label="å§“å"/>
      <ProFormList
        name="users"
        label="ç”¨æˆ·ä¿¡æ¯"
        initialValue={[
          {
            name: '1111',
          },
        ]}
        itemRender={({listDom, action}, {record}) => {
          return (
            <ProCard
              bordered
              extra={action}
              title={record?.name}
              style={{
                marginBlockEnd: 8,
              }}
            >
              {listDom}
            </ProCard>
          );
        }}
      >
        <ProFormGroup>
          <ProFormText name="name" label="å§“å" transform={(value) => {
            console.log('users name =>', value);
            return value
          }}/>
          <ProFormText name="nickName" label="æ˜µç§°" transform={(value) => {
            console.log('users nickName =>', value);
            return value
          }}/>
        </ProFormGroup>
        <ProFormList
          name="labels"
          label="ç”¨æˆ·ä¿¡æ¯"
          initialValue={[
            {
              value: '333',
              label: '333',
            },
          ]}
          copyIconProps={{
            tooltipText: 'å¤åˆ¶æ­¤è¡Œåˆ°æœ«å°¾',
          }}
          deleteIconProps={{
            tooltipText: 'ä¸éœ€è¦è¿™è¡Œäº†',
          }}
        >
          <ProFormGroup key="group">
            <ProFormText name="value" label="å€¼" transform={(value) => {
              console.log('labels value =>', value);
              return value
            }}/>
            <ProFormText name="label" label="æ˜¾ç¤ºåç§°" transform={(value) => {
              console.log('labels label =>', value);
              return value
            }}/>
          </ProFormGroup>
        </ProFormList>
      </ProFormList>
    </ProForm>
  );
};
export default Scene;

```

### Â© ç‰ˆæœ¬ä¿¡æ¯

- ProComponents ç‰ˆæœ¬: [e.g. 4.0.0]
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

è¾“å‡ºç»“æœï¼š
users name => 1111
users nickName => 1111
users name => 2222
users nickName => 2222
{
"users": [
{
"name": "1111",
"labels": [
{
"value": "333",
"label": "333"
},
{
"value": "444",
"label": "444"
}
],
"nickName": "1111"
},
{
"labels": [
{
"value": "555",
"label": "555"
},
{
"value": "666",
"label": "666"
}
],
"name": "2222",
"nickName": "2222"
}
]
}

## cjm61177

console.log('labels value =>', value); å¹¶æ— æ‰§è¡Œ

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

ç»è¿‡æµ‹è¯•ï¼Œåœ¨ ProFormList åµŒå¥—ä¸­çš„ ProForm ä¸æ”¯æŒ transformï¼Œå¯ä»¥ä½¿ç”¨ form.getFieldValue è·å–åˆ°è½¬æ¢åçš„å€¼ã€‚

å› æ­¤ï¼Œä½ å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼ä¿®æ”¹ä»£ç ï¼š

```jsx
import React from 'react';
import {
  ProCard,
  ProForm,
  ProFormGroup,
  ProFormList,
  ProFormText,
} from '@ant-design/pro-components';

const Scene: React.FC<{}> = () => {
  const [form] = useForm();

  const onFinish = (values: any) => {
    console.log(values);
  };

  return (
    <Form form={form} onFinish={onFinish}>
      <ProForm.Item name="name" label="å§“å" rules={[{ required: true }]}>
        <Input />
      </ProForm.Item>
      <ProFormList
        name="users"
        label="ç”¨æˆ·ä¿¡æ¯"
        itemRender={({ listDom, action }, { record }) => {
          return (
            <ProCard
              bordered
              extra={action}
              title={record?.name}
              style={{
                marginBlockEnd: 8,
              }}
            >
              {listDom}
            </ProCard>
          );
        }}
      >
        {(fields) => {
          return fields.map((field) => (
            <ProFormGroup key={field.key}>
              <ProFormText
                name={[field.name, 'name']}
                label="å§“å"
                fieldProps={{
                  name: [field.name, 'name'],
                  rules: [{ required: true }],
                }}
              />
              <ProFormText
                name={[field.name, 'nickName']}
                label="æ˜µç§°"
                fieldProps={{
                  name: [field.name, 'nickName'],
                  rules: [{ required: true }],
                }}
              />
              <ProFormList
                name={[field.name, 'labels']}
                label="æ ‡ç­¾åˆ—è¡¨"
                rules={[{ required: true }]}
              >
                {(fields2) => {
                  return fields2.map((field2) => (
                    <ProFormGroup key={field2.key}>
                      <ProFormText
                        name={[field2.name, 'value']}
                        label="å€¼"
                        fieldProps={{
                          name: [field2.name, 'value'],
                          rules: [{ required: true }],
                        }}
                      />
                      <ProFormText
                        name={[field2.name, 'label']}
                        label="æ˜¾ç¤ºåç§°"
                        fieldProps={{
                          name: [field2.name, 'label'],
                          rules: [{ required: true }],
                        }}
                      />
                    </ProFormGroup>
                  ));
                }}
              </ProFormList>
            </ProFormGroup>
          ));
        }}
      </ProFormList>
      <Button htmlType="submit">æäº¤</Button>
    </Form>
  );
};
export default Scene;

```

è¿™é‡Œå…ˆä½¿ç”¨ useForm ç”Ÿæˆ formï¼Œä½¿å¾—åœ¨è·å–å†…åµŒè¡¨å•ä¸­çš„å­—æ®µå€¼æ—¶æ›´ä¸ºä¾¿æ·ã€‚

ç„¶åæˆ‘ä»¬å†ä½¿ç”¨ ProFormGroup ä¸­åŒ…å«å­è¡¨å• ProFormList çš„æ–¹å¼ï¼Œé€šè¿‡ fields.map å–å‡ºåˆ—è¡¨ä¸­æ¯ä¸ªå­—æ®µï¼Œæ¸²æŸ“å‡ºå¯¹åº”çš„è¡¨å•é¡¹ã€‚åœ¨è¿™é‡Œæ³¨æ„éœ€è¦é…åˆ field.name ç”Ÿæˆå¯¹åº”çš„ name å±æ€§ã€‚

å¦å¤–ï¼Œå¯¹äºå­è¡¨å•åˆ—è¡¨ä¸­çš„è¡¨å•é¡¹è·å–å€¼ï¼Œéœ€è¦åœ¨ onFinish å›è°ƒä¸­ä½¿ç”¨ `form.getFieldValue` æ¥è·å–åˆ°è½¬æ¢åçš„å€¼ã€‚

## kaneruan

å»ºè®®æ”¯æŒä¸‹
