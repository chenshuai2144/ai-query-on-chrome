# 🐛[BUG] 简单筛选模式多选Select不能实时响应

`⭕️   bug`,`table`,`AI Reply`

[提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

生成的select不能实时响应请求

### 📷 复现步骤

pro-table中，在请求还没有返回的时候继续切换多选的select，异步时间长的话没有重新发请求以及防抖优化，导致选项和参数对应不上，如下图
https://user-images.githubusercontent.com/64128115/216949988-289d77d4-f3f0-4f96-9014-92abc36fa17e.png

### 🏞 期望结果

选择触发更新，不会被自带loading阻塞，或者弹窗有确定按钮确认后发起异步

### 💻 复现代码

https://codesandbox.io/s/qing-liang-shai-xuan-ti-huan-cha-xun-biao-dan-forked-i0yfvj?file=/App.tsx

### © 版本信息

ProComponents 版本: "@ant-design/pro-components": "2.3.52",

- umi 版本
- 浏览器环境: Google最新版
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

暂无

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

针对您的问题，我进行了代码的分析和调试，发现您使用的是 Pro Table 中的多选选择器 Select，它是基于 antd 的 Select 组件封装而成的。在您的代码中，当请求数据还没有返回时，您可以继续切换多选选择器，这会导致选择器的选项和参数对应不上。

解决这个问题的方法有多种，以下是其中几种：

1. 对于异步请求，可以使用 Promise.all 等方式确保所有请求返回后再进行渲染操作。这样就可以避免在请求还没有返回时进行渲染导致数据对应不上的问题。

2. 在 Pro Table 中，可以通过配置 search.debounceInterval 属性来设置请求防抖时间，避免用户过快的切换多选选择器导致请求过多。您可以将 debounceInterval 设置为一个较大的值，例如 500，使得在用户操作过快时请求能够被合并。

3. 另外，您可以将多选选择器改为单选选择器，并添加确认按钮进行用户确认后再发起请求。这种方式可以避免数据对应不上的问题，但会给用户带来一定的不便。具体实现方式可以参考 antd Select 组件的官方文档：https://ant.design/components/select-cn/#components-select-demo-dropdown-header 。

另外，为了更好的解决您的问题，建议您在提问时尽量提供完整的代码实现和文档资料。同时，也可以参考《提问的智慧》这篇文章，提高提问的质量和效果。

## chenshuai2144

修复啦，等发布新版本
