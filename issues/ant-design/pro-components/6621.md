# 🧐[问题]浮层表单不生效

`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🧐 问题描述

我使用**ant design pro**，按照官网的流程新增页面，并将“使用 open 和 onOpenChange”例子的代码粘贴到新页面，按钮样式出现了，但是点击后没有弹出模态框，无响应，**控制台也无具体报错**。

### 💻 示例代码

**具体代码如下：**

```
import { PlusOutlined } from '@ant-design/icons';
import {
  DrawerForm,
  ModalForm,
  ProForm,
  ProFormDateRangePicker,
  ProFormSelect,
  ProFormText,
} from '@ant-design/pro-components';
import { Button, message, Space } from 'antd';
import { useState } from 'react';

export default () => {
  const [modalVisit, setModalVisit] = useState(false);
  const [drawerVisit, setDrawerVisit] = useState(false);
  return (
    <>
      <Space>
        <Button
          type="primary"
          onClick={() => {
            setModalVisit(true);
          }}
        >
          <PlusOutlined />
          Modal 展示
        </Button>
        <Button
          type="primary"
          onClick={() => {
            setDrawerVisit(true);
          }}
        >
          <PlusOutlined />
          Drawer 展示
        </Button>
      </Space>
      <ModalForm
        title="新建表单"
        open={modalVisit}
        onFinish={async () => {
          message.success('提交成功');
          return true;
        }}
        onOpenChange={setModalVisit}
      >
        <ProForm.Group>
          <ProFormText
            width="md"
            name="name"
            label="签约客户名称"
            tooltip="最长为 24 位"
            placeholder="请输入名称"
          />

          <ProFormText width="md" name="company" label="我方公司名称" placeholder="请输入名称" />
        </ProForm.Group>
        <ProForm.Group>
          <ProFormText width="md" name="contract" label="合同名称" placeholder="请输入名称" />
          <ProFormDateRangePicker name="contractTime" label="合同生效时间" />
        </ProForm.Group>
        <ProForm.Group>
          <ProFormSelect
            options={[
              {
                value: 'chapter',
                label: '盖章后生效',
              },
            ]}
            width="xs"
            name="useMode"
            label="合同约定生效方式"
          />
          <ProFormSelect
            width="xs"
            options={[
              {
                value: 'time',
                label: '履行完终止',
              },
            ]}
            name="unusedMode"
            label="合同约定失效效方式"
          />
        </ProForm.Group>
        <ProFormText width="sm" name="id" label="主合同编号" />
        <ProFormText name="project" disabled label="项目名称" initialValue="xxxx项目" />
        <ProFormText width="xs" name="mangerName" disabled label="商务经理" initialValue="启途" />
      </ModalForm>
      <DrawerForm
        onOpenChange={setDrawerVisit}
        title="新建表单"
        open={drawerVisit}
        onFinish={async () => {
          message.success('提交成功');
          return true;
        }}
      >
        <ProForm.Group>
          <ProFormText
            width="md"
            name="name"
            label="签约客户名称"
            tooltip="最长为 24 位"
            placeholder="请输入名称"
          />

          <ProFormText width="md" name="company" label="我方公司名称" placeholder="请输入名称" />
        </ProForm.Group>
        <ProForm.Group>
          <ProFormText width="md" name="contract" label="合同名称" placeholder="请输入名称" />
          <ProFormDateRangePicker name="contractTime" label="合同生效时间" />
        </ProForm.Group>
        <ProForm.Group>
          <ProFormSelect
            options={[
              {
                value: 'chapter',
                label: '盖章后生效',
              },
            ]}
            width="xs"
            name="useMode"
            label="合同约定生效方式"
          />
          <ProFormSelect
            width="xs"
            options={[
              {
                value: 'time',
                label: '履行完终止',
              },
            ]}
            name="unusedMode"
            label="合同约定失效效方式"
          />
        </ProForm.Group>
        <ProFormText width="sm" name="id" label="主合同编号" />
        <ProFormText name="project" disabled label="项目名称" initialValue="xxxx项目" />
        <ProFormText width="xs" name="mangerName" disabled label="商务经理" initialValue="启途" />
      </DrawerForm>
    </>
  );
};

```

### 🚑 其他信息

**我的浏览器版本**： Chrome Version 104.0.5112.81 (Official Build) (64-bit)
**我的文件夹结构：**
![image](https://user-images.githubusercontent.com/30246133/219313028-579f221b-11af-4664-8225-0860f43fd1df.png)
index.tsx中为实例代码，index.less为空。
**页面效果：**
![image](https://user-images.githubusercontent.com/30246133/219313332-3bf01f34-dbbc-4165-98d5-4c45fb89b950.png)

**控制台信息：**
![image](https://user-images.githubusercontent.com/30246133/219313790-9e3c5fcb-8603-4635-8c7b-c33fbc1c5383.png)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

你好，根据你提供的信息，我看到你在使用 ant design pro 的 ModalForm 和 DrawerForm 组件，在你的代码中这两个组件书写格式正确，所以可以排除书写错误的可能性。

鉴于控制台没有报错信息，我怀疑是 ant design pro 的组件没有正确引入。

可以试着检查下你的 package.json 中是否已经引入 "@ant-design/pro-components" 以及 "@ant-design/icons" 这两个包，如果没有，可以手动安装：

```sh
# 使用 npm 安装
npm install @ant-design/pro-components @ant-design/icons --save

# 使用 yarn 安装
yarn add @ant-design/pro-components @ant-design/icons
```

如果这个问题不是因为缺少这两个包引起的，请提供更多的信息，比如你的 react 版本，可以让我更好的为你解决问题。

希望我的回答对你有帮助，如有不合适的地方，请谅解并指出。

## chenshuai2144

antd的版本太低了，升级一下就好了
