# ğŸ›[BUG]å‡çº§Antd5ä¹‹åï¼ŒProTable è‡ªå¸¦æœç´¢Formï¼Œæ—¥æœŸæ ¼å¼æœªæ ¼å¼åŒ–

`â­•ï¸   bug`,`form`,`AI Reply`

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ› bug æè¿°

<!--
å‡çº§Antd5ä¹‹åï¼ŒProTable è‡ªå¸¦æœç´¢Formï¼Œæ—¥æœŸæ ¼å¼æœªæ ¼å¼åŒ–
-->

### ğŸ“· å¤ç°æ­¥éª¤

![image](https://user-images.githubusercontent.com/30116184/220857800-57a4593f-48b8-43cc-89b6-a2c3cee8d945.png)

<!--
æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜ï¼Œå¦‚æœå¯èƒ½ï¼Œå°½é‡æä¾›å¯æ‰§è¡Œä»£ç ï¼Œ
å¦‚ï¼šhttps://codesandbox.io/ åœ¨æ­¤å¤„åˆ›å»ºä¸€ä¸ª codesandboxï¼Œæ–¹ä¾¿æˆ‘ä»¬æ›´å¿«çš„æ’æŸ¥å’Œå¤ç°é—®é¢˜
-->

### ğŸ æœŸæœ›ç»“æœ

æ ¼å¼åŒ–æ—¥æœŸæ ¼å¼ï¼Œä¸ä¹‹å‰ä¸€æ ·ï¼Œé»˜è®¤YYYY-MM-DD

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
-->

### ğŸ’» å¤ç°ä»£ç 

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
-->

### Â© ç‰ˆæœ¬ä¿¡æ¯

- ProComponents ç‰ˆæœ¬: [e.g. 4.0.0]
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## zoro-r

ä¸ä»…æ²¡æœ‰æ ¼å¼åŒ– è¿˜ä¸¢å¤±äº†ç»§æ‰¿çš„æ–¹æ³•

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

æ„Ÿè°¢æ‚¨æä¾›äº†è¿™ä»½bugæè¿°ã€‚æ ¹æ®æ‚¨çš„æè¿°ï¼Œæˆ‘äº†è§£åˆ°æ‚¨å‡çº§äº†Antd5åï¼Œå‘ç°ProTable è‡ªå¸¦æœç´¢Formçš„æ—¥æœŸæ ¼å¼æœªæ ¼å¼åŒ–ä¸”ä¸¢å¤±äº†ç»§æ‰¿çš„æ–¹æ³•ã€‚ä¸‹é¢ï¼Œæˆ‘å°†æä¾›ä¸€äº›å¯èƒ½è§£å†³æ‚¨é—®é¢˜çš„æ–¹æ³•ã€‚

1. æ ¼å¼åŒ–æ—¥æœŸæ ¼å¼

æ‚¨å¯ä»¥å°è¯•åœ¨å­—æ®µé…ç½®å¤„æ·»åŠ  `valueType` å±æ€§é…ç½®æ—¥æœŸæ ¼å¼ï¼Œä¾‹å¦‚å°†å…¶é…ç½®ä¸º `date`ï¼Œå³å¯è®©ProTableè‡ªå¸¦æœç´¢Formä¸­çš„æ—¥æœŸè¾“å‡ºä¸ºé»˜è®¤æ ¼å¼(YYYY-MM-DD)ï¼š

```jsx
// columns é…ç½®
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  valueType: 'date',
}

// æˆ–è€…

// form é…ç½®
{
  type: 'date',
}

// å¦‚æœæ‚¨æƒ³æ ¼å¼åŒ–æ—¥æœŸè¾“å‡ºçš„æ ¼å¼:
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  valueType: 'date',
  valueEnum: timeEnum,
  fieldProps: {
    format: 'YYYY-MM-DD',
  },
},
```

å…³äºvalueTypeå±æ€§çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·æŸ¥é˜…antdå®˜æ–¹æ–‡æ¡£ï¼š[é…ç½® valueã€valueEnum ç­‰å€¼çš„ç±»å‹](https://ant.design/components/form-cn/#%E9%85%8D%E7%BD%AE-value-valueenum-%E7%AD%89%E5%80%BC%E7%9A%84%E7%B1%BB%E5%9E%8B)ã€‚

2. ç»§æ‰¿ä¸¢å¤±

åœ¨å‡çº§Antd5åï¼Œç”±äºéƒ¨åˆ†APIåŠç»„ä»¶å±æ€§é…ç½®çš„å˜åŒ–ï¼Œå¯èƒ½å¯¼è‡´ProTableè‡ªå¸¦å¸¦æœç´¢Formçš„æŸäº›å±æ€§æ— æ³•æ­£ç¡®ç»§æ‰¿ã€‚æ‚¨å¯ä»¥å°è¯•æŸ¥çœ‹[ProTableçš„APIæ–‡æ¡£](https://procomponents.ant.design/components/table)ï¼Œçœ‹çœ‹å®˜æ–¹æ˜¯å¦å·²ç»æ›´æ–°APIè¯´æ˜ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ›´æ”¹å³å¯ã€‚

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œå¯ä»¥å°†æ‚¨çš„é—®é¢˜ä¸æ‚¨çš„ä»£ç ä¸€èµ·æäº¤åˆ°ProTableçš„[issue](https://github.com/ant-design/pro-components/issues)ä¸­ï¼Œå¹¶ç­‰å¾…å®˜æ–¹çš„è§£ç­”ã€‚

å¸Œæœ›ä»¥ä¸Šå†…å®¹èƒ½å¤Ÿå¸®åŠ©åˆ°æ‚¨ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–éœ€è¦æ›´å¤šå¸®åŠ©ï¼Œè¯·éšæ—¶åœ¨githubçš„issueä¸­æå‡ºã€‚

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹å‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

è¡¥å……ä¸€äº›å¸®åŠ©æ‚¨è¿›ä¸€æ­¥è°ƒè¯•é—®é¢˜çš„æ–¹å¼ï¼š

1. æ£€æŸ¥å­—æ®µç±»å‹æ˜¯å¦æ­£ç¡®

åœ¨å‡çº§ Antd5 åï¼Œå¦‚æœæ‚¨çš„è¡¨æ ¼æ•°æ®çš„ç±»å‹å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯èƒ½ä¼šå¯¼è‡´ProTableæ— æ³•æ­£ç¡®åœ°æ ¼å¼åŒ–æ—¥æœŸç­‰æ•°æ®ç±»å‹ã€‚è¯·ç¡®ä¿æ‚¨çš„æ•°æ®ç±»å‹ä¸æ‚¨çš„é¡µé¢é…ç½®åŒ¹é…ã€‚

2. ä½¿ç”¨æ§åˆ¶å°è¿›è¡Œè°ƒè¯•

æ‚¨å¯ä»¥åœ¨æ§åˆ¶å°å…ˆå°†éœ€è¦çš„å†…å®¹è§£æ„å‡ºæ¥ï¼Œæ£€æŸ¥æ•°æ®ç»“æ„æ˜¯å¦æ­£ç¡®ã€‚åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨consoleè¯­å¥è¿›è¡Œè°ƒè¯•:

```javascript
import { useState } from "react";
import ProTable from "@ant-design/pro-table";

export default function App(props) {
  const [data, setData] = useState([]);

  const columns = [
    {
      title: "å•†å“åç§°",
      dataIndex: "name",
    },
    {
      title: "æ—¥æœŸ",
      dataIndex: "date",
      valueType: "date",
      fieldProps: {
        format: "YYYY-MM-DD",
      },
    },
  ];

  return (
    <ProTable
      columns={columns}
      request={() => {
        fetch("/api/getData")
          .then((result) => result.json())
          .then((result) => setData(result.data));
      }}
      dataSource={data}
      rowKey="id"
      dateFormatter="string"
      search={{
        layout: "vertical",
      }}
      options={{ search: true }}
    />
  );
}
```

åœ¨è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥ç¼–è¾‘ç±»å‹ã€æ ¼å¼ã€æœç´¢é…ç½®ç­‰ï¼Œä»¥æ£€æŸ¥æ˜¯å¦æœ‰ä»»ä½•é”™è¯¯ã€‚å¦å¤–ï¼Œæ‚¨è¿˜å¯ä»¥æ¢ç´¢Protableçš„é…ç½®é€‰é¡¹ï¼Œå¦‚ `formStyle`, `toolBarRender` å’Œ`loading`, ç­‰ç­‰ï¼Œè¿™äº›é€‰é¡¹ä¹Ÿå¯èƒ½å½±å“æœç´¢è¡¨å•çš„åŠŸèƒ½ã€‚

3. æŸ¥çœ‹Antd æ–‡æ¡£å’Œä¾‹å­

Antd åšä¸ºä¸€ä¸ªä¼˜ç§€çš„UIç»„ä»¶åº“ï¼Œæœ‰å®Œæ•´çš„æ–‡æ¡£æ”¯æŒï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹[Antdçš„æ—¥æœŸé€‰æ‹©](https://ant.design/components/date-picker-cn/)å’Œ[ProTableçš„ä¾‹å­](https://procomponents.ant.design/components/table)è·å–æ›´å¤šæ”¯æŒã€‚

å¸Œæœ›è¿™äº›æç¤ºå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼

## dongtao0725

1ã€dateFormatter=â€˜string'æ— æ•ˆï¼Œ
2ã€columnsè®¾ç½®valueType: 'dateRange',æ— æ³•ç”ŸæˆYYYY-MM-DDæ ¼å¼
3ã€è®¾ç½®fieldProps: {
format: 'YYYY-MM-DD',
}ä¹Ÿæ— æ•ˆ

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

æ„Ÿè°¢æ‚¨çš„åé¦ˆã€‚å…³äºæ‚¨æå‡ºçš„è¿™å‡ ç‚¹é—®é¢˜ï¼Œå¯ä»¥é’ˆå¯¹æ€§åœ°ç»™å‡ºä»¥ä¸‹è§£å†³æ–¹æ¡ˆã€‚

1. dateFormatter='string'æ— æ•ˆ

åœ¨ProTableç»„ä»¶ä¸­ï¼Œ`dateFormatter='string'`æ˜¯ç”¨æ¥æ§åˆ¶æ•°æ®æºä¸­æ—¥æœŸæ•°æ®çš„è½¬åŒ–æ ¼å¼ã€‚å¦‚æœæ‚¨çš„APIè¿”å›çš„æ•°æ®æºæ ¼å¼æ˜¯ISOæ ¼å¼ï¼Œæ‚¨å¯ä»¥å°è¯•å°†`dateFormatter`é…ç½®ä¸º `YYYY-MM-DD` æˆ– `YYYY-MM-DD HH:mm:ss`ï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨momentæˆ–dayjsç­‰å·¥å…·åº“å°†å…¶è½¬åŒ–ä¸ºJSæ—¥æœŸå¯¹è±¡ï¼Œå¹¶æŒ‰ç…§æ‚¨æ‰€éœ€çš„æ ¼å¼è¿›è¡Œæ¸²æŸ“ã€‚

ä¾‹å¦‚ï¼š

```jsx
import moment from 'moment';

// columnsé…ç½®
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  render: (value) => moment(value).format('YYYY-MM-DD'),
}

// æˆ–è€…ä½¿ç”¨valueTypeå±æ€§
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  valueType: 'date',
}

// requestè¯·æ±‚
request={async () => {
  const resData = await getData();
  return resData.map(item => {
    item.date = moment(item.date).format('YYYY-MM-DD');
    return item;
  });
}}
```

å¯¹äºå…¶ä»–å¯é€‰çš„æ ¼å¼ï¼Œè¯·å‚è€ƒmomentæˆ–dayjsæ–‡æ¡£ã€‚

2. columnsè®¾ç½®valueType: 'dateRange'ï¼Œæ— æ³•ç”ŸæˆYYYY-MM-DDæ ¼å¼

`valueType: 'dateRange'` æ˜¯ç”¨æ¥æŒ‡å®šæ—¥æœŸåŒºé—´ç±»å‹çš„ã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼ï¼Œå¯ä»¥è®¾ç½®`valueType`å’Œ`fieldProps: { ... }`ä»¥è¦†ç›–é»˜è®¤çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼š

```jsx
//columnsé…ç½®
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  valueType: 'dateRange',
  fieldProps: {
    format: 'YYYY-MM-DD'
  }
}
```

æ­¤å¤–ï¼Œç”±äºAnt Designçš„é™åˆ¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨Moment.jsï¼ˆ>= 2.22.xç‰ˆæœ¬ï¼‰æˆ– dayjsï¼ˆ>= 1.8.xç‰ˆæœ¬ï¼‰æ¥å¤„ç†æ—¥æœŸæ•°æ®çš„ç›¸å…³å±æ€§ã€‚

3. è®¾ç½®fieldProps: {format: 'YYYY-MM-DD'}ä¹Ÿæ— æ•ˆ

å¦‚æœä½¿ç”¨fieldPropsçš„æ–¹å¼æ— æ³•æ”¹å˜æ—¥æœŸæ ¼å¼ï¼Œå»ºè®®é€šè¿‡ `render` å±æ€§æ¥æ‰‹åŠ¨æ§åˆ¶æ—¥æœŸçš„æ˜¾ç¤ºæ ¼å¼ã€‚ä¾‹å¦‚ï¼š

```jsx
//columnsé…ç½®
{
  title: 'æ—¥æœŸ',
  dataIndex: 'date',
  render: (text) => moment(text).format('YYYY-MM-DD'),
}
```

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸èƒ½å¸®åŠ©æ‚¨ä¿®æ”¹æ—¥æœŸæ ¼å¼ï¼Œå¯èƒ½éœ€è¦æŸ¥çœ‹Antdå’ŒProTableçš„å®˜æ–¹æ–‡æ¡£ï¼Œä»¥äº†è§£æ—¥æœŸæ ¼å¼çš„åŒ…è£…æ–¹æ³•ã€‚

å¸Œæœ›è¿™äº›è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå¸®åŠ©æ‚¨è§£å†³é—®é¢˜ã€‚å¦‚æœæ‚¨ä»æœ‰ç–‘é—®ï¼Œè¯·éšæ—¶æ›´æ–°æ‚¨çš„é—®é¢˜ã€‚

## amusiq

![image](https://github.com/ant-design/pro-components/assets/28551646/2ff5c09e-6de0-438d-8097-e09f432a7d3e)
æˆ‘ä¹Ÿå‡ºç°äº†

## Aliveing

æˆ‘ä¹Ÿæœ‰ç±»ä¼¼æƒ…å†µï¼Œå…·ä½“åŸå› ä¸å¤ªäº†è§£ï¼Œæˆ‘æ˜¯æ‰§è¡Œ `rm -r src/.umi* node_modules yarn.lock` åå† `yarn install` å°±å¥½äº†ï¼Œæœ‰æ—¶åªåˆ é™¤ `src/.umi*` å°±å¯ä»¥ï¼ŒçŒœæµ‹å¯èƒ½å’Œ mfsu çš„ç¼–è¯‘ç¼“å­˜æœ‰å…³ç³»ã€‚

## chenshuai2144

æ˜¯ dayjs çš„ç‰ˆæœ¬é—®é¢˜ï¼Œå¤§å®¶æ³¨æ„ä¸‹ ä¸å¥½å®‰è£…ä¸¤ä»½ dayjs

## lovewinders

> æ˜¯ dayjs çš„ç‰ˆæœ¬é—®é¢˜ï¼Œå¤§å®¶æ³¨æ„ä¸‹ ä¸å¥½å®‰è£…ä¸¤ä»½ dayjs

å¦‚æœè‡ªå·±é¡¹ç›®ä¸­å®‰è£…è¿‡ä¸åŒç‰ˆæœ¬dayjsï¼Œæœ‰å‡ ç‡ä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ—¶åˆ é™¤package.jsonä¸­çš„dayjsåº”è¯¥èƒ½è§£å†³
