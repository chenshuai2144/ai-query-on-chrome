# 🧐[问题]Protable如何实时更新？

`AI Reply`

### 🧐 问题描述

服务端通过websocket实时的发送新的数据到Protable的表格里，但是如何实时刷新呢？

## tnngo

表格实时刷新意义不大，表格数据有分页，又有多列横向滚动条等等，数据混杂，实时刷新你也不知道哪条数据变了，根本看不过来。
建议和产品经理在天台上私下解决。

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

非常感谢您的建议。不过，如果确实有这样的需求，我们可以通过以下方式实现Protable实时更新：

1. 在组件的state中使用一个变量来存储表格的数据。

```javascript
state = {
  dataSource: [],
};
```

2. 在`componentDidMount()`中使用websocket来监听新数据的到来。在数据到来时，使用`setState()`方法将新数据更新到`dataSource`变量中。

```javascript
componentDidMount() {
  const socket = new WebSocket('ws://yourwebsocketservice.com');
  socket.onmessage = (event) => {
    const newData = JSON.parse(event.data);
    this.setState({
      dataSource: [...this.state.dataSource, newData],
    });
  }
}
```

3. 在表格组件中，将数据源指定为存储在`dataSource`变量中的数据，并在`columns`中定义表格的列。如果有需要，可以使用其他的Protable属性来配置表格的样式和功能。

```javascript
<Protable
  dataSource={this.state.dataSource}
  columns={columns}
  options={options}
/>
```

这样就可以实现表格的实时更新了。但需要注意的是，数据的更新会带来性能上的开销，如果数据量过大，需要对更新频率和数据量进行相应的控制。另外，也建议在视觉上对更新进行一些提示，比如在更新时显示一个loading的状态，以提升用户体验。

## TangMonk

@chenshuai2144 牛逼啊

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

感谢夸奖，如有其他问题也欢迎随时提出。
