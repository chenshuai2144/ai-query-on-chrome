# 👑 [需求]希望proLayout菜单token能提供二级菜单颜色配置参数

`layout`,`🎖️  featrue`,`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🔩 所属模块或组件 proLayout

<!--
如果你的功能需求率属于某个功能模块或者是组件的，请在此处标明，如对`table`组件有功能需求，则注明：率属组件：ProTable
 -->

### 🥰 需求描述

proLayout菜单token能提供二级菜单颜色配置参数，同一级菜单配置一样，有参数可以配置，类似于可以配置二级菜单的参数API colorTextMenuSecondary<html>

<body>
<!--StartFragment-->

| colorTextMenuSecondary | menu 的二级字体颜色，比如 footer 和 action 的 icon |
| ---------------------- | -------------------------------------------------- |

<!--EndFragment-->
</body>
</html>

<!--
详细地描述需求，让大家都能理解
-->

### ⛰ 功能需求适用场景

一级菜单的颜色要区别于二级菜单的颜色

<!--
请简单描述一下这个新功能通常或可以应用在哪些场景下
-->

### 🧐 解决方案

<!--
如果你有解决方案，在这里清晰地阐述
-->

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方员会在一定时间后继续继续处理。

针对本需求，我们可以借助 antd 的菜单(Menu)组件实现二级菜单颜色配置参数的功能。

首先，在 ProLayout 组件中，我们需要定义一个新的主题配置项 `secondaryMenuColor`，用来设置二级菜单的颜色。

```jsx
const themes = {
  dark: darkTheme,
  light: lightTheme,
};

// 新增一个主题选项
const newTheme = {
  ...themes[theme],
  secondaryMenuColor: "#1890ff",
};

return (
  <ProLayout
    theme={newTheme}
    menuDataRender={() => menuData} // 根据需要自行定义菜单数据
  >
    {props.children}
  </ProLayout>
);
```

接下来，在菜单数据中，我们添加一个 `color` 属性，用来设置每个菜单项的颜色。

但是，在 `Menu` 组件中，并没有实现 `color` 属性的功能，因此我们需要借助自定义 `MenuItem` 组件来实现这个功能。

```jsx
import { Menu } from "antd";

// 自定义 MenuItem 组件，将 color 属性作为 style 添加进去
const CustomMenuItem = ({ children, color, ...rest }) => (
  <Menu.Item style={{ color, ...rest.style }}>{children}</Menu.Item>
);

const CustomMenu = (menuProps) => {
  const { mode, menuData, ...rest } = menuProps;

  // 遍历菜单数据，设置相应的颜色
  const loopMenuItem = (data) =>
    data.map((item) => {
      const { children, ...restItem } = item;
      let newRestItem = restItem;

      if (children) {
        newRestItem = {
          ...newRestItem,
          children: loopMenuItem(children),
        };
      }

      return (
        <CustomMenuItem key={restItem.key} color={restItem.color}>
          {React.createElement(sectionIcon[restItem.icon])}
          <span>{restItem.name}</span>
        </CustomMenuItem>
      );
    });

  return (
    <Menu mode={mode} {...rest}>
      {loopMenuItem(menuData)}
    </Menu>
  );
};
```

可以看到，我们在 `CustomMenuItem` 组件中，添加了一个 `color` 属性，并将其作为 `style` 的一部分添加进去，从而实现了菜单项颜色的设置。

最后，在 ProLayout 组件中，我们将默认的 `Menu` 组件替换成我们自定义的 `CustomMenu` 组件即可。

```jsx
<ProLayout
  theme={newTheme}
  menuDataRender={() => menuData} // 根据需要自行定义菜单数据
  // 用自定义的 CustomMenu 组件替换默认的 Menu 组件
  menuItemRender={(item) => <CustomMenu {...item} />}
>
  {props.children}
</ProLayout>
```

这样，我们就实现了 ProLayout 菜单 token 提供二级菜单颜色配置参数的需求。

## chenshuai2144

不是很推荐这么高，我们还是希望样式不要太离谱，
