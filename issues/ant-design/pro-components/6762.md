# ğŸ§[é—®é¢˜] editableProtable ç¼–è¾‘æ—¶å¦‚ä½•ç›‘å¬åˆ°å½“å‰ç¼–è¾‘æ˜¯é‚£ä¸ªinputæ¡†

`AI Reply`

éœ€è¦æ˜¯ç¼–è¾‘æ—¶æœ‰ä¸¤ä¸ªinputç¼–è¾‘æ¡†ï¼Œç¬¬ä¸€ä¸ªinputæ¡†å€¼ä¿®æ”¹è‡ªåŠ¨è®¡ç®—ç¬¬äºŒä¸ªæ¡†ï¼Œç¬¬äºŒä¸ªæ¡†ä¿®æ”¹è‡ªåŠ¨è®¡ç®—ç¬¬ä¸€ä¸ªæ¡†ï¼Œæ‰¾äº†ä¸€äº›æ–¹æ³•è¿˜æ²¡æœ‰å‘ç°è¿™ä¸ªåŠŸèƒ½ï¼Œè¯·æ•™ä¸‹å¦‚ä½•å®ç°

## zozopen

![image](https://user-images.githubusercontent.com/23204297/224474701-56f146f5-5207-48aa-b916-115379dc204c.png)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

å¯ä»¥ä½¿ç”¨ `EditableProTable` æä¾›çš„ `editable` å±æ€§ä¸­çš„ `onValuesChange` æ–¹æ³•æ¥ç›‘å¬è¡¨æ ¼æ•°æ®çš„å˜åŒ–ï¼Œåˆ©ç”¨ `Table.Column` ä¸­çš„ `render` æ–¹æ³•æ¥å®ç° input è¾“å…¥æ¡†çš„è®¡ç®—é€»è¾‘ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼š

```jsx
import React, { useState } from "react";
import { EditableProTable } from "@ant-design/pro-table";

const Demo = () => {
  const [dataSource, setDataSource] = useState([
    {
      id: 1,
      col1: "1",
      col2: "2",
    },
    {
      id: 2,
      col1: "2",
      col2: "3",
    },
  ]);

  const handleValuesChange = (_, values) => {
    // ç›‘å¬æ•°æ®å˜åŒ–ï¼Œæ›´æ–°è¡¨æ ¼æ•°æ®
    setDataSource(values);
  };

  return (
    <EditableProTable
      rowKey="id"
      columns={[
        {
          title: "Col1",
          dataIndex: "col1",
          formItemProps: {
            rules: [{ required: true }],
          },
          render: (_, record) => {
            // åˆ©ç”¨ render æ–¹æ³•æ·»åŠ  input è¾“å…¥æ¡†ï¼Œå¹¶è®¡ç®— col2 çš„å€¼
            return (
              <input
                type="text"
                value={record.col1}
                onChange={(e) => {
                  const newValue = e.target.value;
                  const newRecord = {
                    ...record,
                    col1: newValue,
                    col2: String(Number(newValue) + 1),
                  };
                  handleValuesChange(
                    null,
                    dataSource.map((d) =>
                      d.id === newRecord.id ? newRecord : d,
                    ),
                  );
                }}
              />
            );
          },
        },
        {
          title: "Col2",
          dataIndex: "col2",
          formItemProps: {
            rules: [{ required: true }],
          },
          render: (_, record) => {
            // åˆ©ç”¨ render æ–¹æ³•æ·»åŠ  input è¾“å…¥æ¡†ï¼Œå¹¶è®¡ç®— col1 çš„å€¼
            return (
              <input
                type="text"
                value={record.col2}
                onChange={(e) => {
                  const newValue = e.target.value;
                  const newRecord = {
                    ...record,
                    col2: newValue,
                    col1: String(Number(newValue) - 1),
                  };
                  handleValuesChange(
                    null,
                    dataSource.map((d) =>
                      d.id === newRecord.id ? newRecord : d,
                    ),
                  );
                }}
              />
            );
          },
        },
      ]}
      request={async () => ({
        data: dataSource,
        success: true,
      })}
      editable={{
        editableKeys: dataSource.map((item) => item.id),
        // ç›‘å¬æ•°æ®å˜åŒ–
        onValuesChange: handleValuesChange,
      }}
      onChange={(_, data) => setDataSource(data)}
    />
  );
};

export default Demo;
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ `handleValuesChange` æ–¹æ³•ç›‘å¬äº†æ•°æ®å˜åŒ–äº‹ä»¶ï¼Œå½“ç”¨æˆ·ä¿®æ”¹ input è¾“å…¥æ¡†çš„å€¼æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡è®¡ç®—å¾—åˆ°å¦ä¸€ä¸ª input è¾“å…¥æ¡†çš„å€¼ï¼Œå¹¶ä¸€èµ·æ›´æ–°è¡¨æ ¼æ•°æ®ã€‚åœ¨ `Table.Column` ä¸­çš„ `render` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª input è¾“å…¥æ¡†ï¼Œå¹¶é€šè¿‡ `handleValuesChange` æ–¹æ³•æ›´æ–°è¡¨æ ¼æ•°æ®ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `Table.Column` ä¸­çš„ `formItemProps` å±æ€§ä¸­æ·»åŠ  `rules` è§„åˆ™æ¥é™åˆ¶è¾“å…¥æ¡†çš„è¾“å…¥ã€‚

## chenshuai2144

AI çš„åŠæ³•æ˜¯æœ€å¥½çš„è§£æ³•ï¼Œæˆ–è€…è¯•è¯•

https://github.com/ant-design/pro-components/blob/d8d1e6efea124241ac46b2381a339d84a6ba68cf/packages/table/src/components/EditableTable/demos/form-linkage.tsx
