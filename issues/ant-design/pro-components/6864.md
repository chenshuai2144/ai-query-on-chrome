# 🐛[BUG]EditableProTable 通过表单自定义组件的回调函数中通过actionRef.current?.addEditRecord?增加一行没有反应

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

EditableProTable 通过表单自定义组件的回调函数中增加一行没有反应

<!--
详细地描述 bug，让大家都能理解
-->

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

### 🏞 期望结果

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

<!--
提供可复现的代码，仓库，或线上示例
-->

const columns: ProColumns<OrderDetail>[] = [
{
title: '商品名称',
dataIndex: 'goodsId',
width: '30%',
renderFormItem: () => {
return (
<!--通过表单自定义组件的回调函数中增加一行没有反应 -->
<GoodsSuggest
onChange={(value) => {
console.log(value);
actionRef.current?.addEditRecord?.({
id: (Math.random() * 1000000).toFixed(0),
});
}}
/>
)
}
},
{
title: '规格',
key: 'spec',
dataIndex: 'spec',
renderFormItem: (_, { record }) => {
return record?.spec;
}
},
{
title: '数量',
dataIndex: 'labels',
width: '20%',
valueType: 'digit',
},
];

<PageContainer>
            <!通过按钮方法可以新增一行 -->
            <Button
                type="primary"
                onClick={() => {
                    actionRef.current?.addEditRecord?.({
                        id: (Math.random() * 1000000).toFixed(0),
                    });
                }}
            >
                新建一行
            </Button>
            <ProForm<{ table: OrderDetail[] }>
                formRef={formRef}
                initialValues={{
                    table: defaultData,
                }}
                validateTrigger="onBlur"
            >
                <EditableProTable<OrderDetail>
                    rowKey="id"
                    scroll={{
                        x: 960,
                    }}
                    editableFormRef={editorFormRef}
                    actionRef={actionRef}
                    headerTitle="可编辑表格"
                    maxLength={5}
                    name="table"
                    recordCreatorProps={false}
                    columns={columns}
                    editable={{
                        type: 'multiple',
                        editableKeys,
                        onChange: setEditableRowKeys,
                    }}
                />
                <ProForm.Item>
                    <ProCard title="表格数据" headerBordered collapsible defaultCollapsed>
                        <ProFormDependency name={['table']}>
                            {({ table }) => {
                                return (
                                    <ProFormField
                                        ignoreFormItem
                                        fieldProps={{
                                            style: {
                                                width: '100%',
                                            },
                                        }}
                                        mode="read"
                                        valueType="jsonCode"
                                        text={JSON.stringify(table)}
                                    />
                                );
                            }}
                        </ProFormDependency>
                    </ProCard>
                </ProForm.Item>
            </ProForm>
        </PageContainer>

### © 版本信息

- ProComponents 版本: [e.g. 4.0.0]
- umi 版本
- 浏览器环境
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

![image](https://user-images.githubusercontent.com/43694709/228170264-874ef7cc-5025-44a1-8722-1848fd2f458c.png)

![image](https://user-images.githubusercontent.com/43694709/228171236-a74e80eb-78d0-4ca4-91e3-bbf65a221f12.png)
