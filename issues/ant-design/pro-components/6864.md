# ğŸ›[BUG]EditableProTable é€šè¿‡è¡¨å•è‡ªå®šä¹‰ç»„ä»¶çš„å›è°ƒå‡½æ•°ä¸­é€šè¿‡actionRef.current?.addEditRecord?å¢åŠ ä¸€è¡Œæ²¡æœ‰ååº”

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ› bug æè¿°

EditableProTable é€šè¿‡è¡¨å•è‡ªå®šä¹‰ç»„ä»¶çš„å›è°ƒå‡½æ•°ä¸­å¢åŠ ä¸€è¡Œæ²¡æœ‰ååº”

<!--
è¯¦ç»†åœ°æè¿° bugï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ“· å¤ç°æ­¥éª¤

<!--
æ¸…æ™°æè¿°å¤ç°æ­¥éª¤ï¼Œè®©åˆ«äººä¹Ÿèƒ½çœ‹åˆ°é—®é¢˜ï¼Œå¦‚æœå¯èƒ½ï¼Œå°½é‡æä¾›å¯æ‰§è¡Œä»£ç ï¼Œ
å¦‚ï¼šhttps://codesandbox.io/ åœ¨æ­¤å¤„åˆ›å»ºä¸€ä¸ª codesandboxï¼Œæ–¹ä¾¿æˆ‘ä»¬æ›´å¿«çš„æ’æŸ¥å’Œå¤ç°é—®é¢˜
-->

### ğŸ æœŸæœ›ç»“æœ

<!--
æè¿°ä½ åŸæœ¬æœŸæœ›çœ‹åˆ°çš„ç»“æœ
-->

### ğŸ’» å¤ç°ä»£ç 

<!--
æä¾›å¯å¤ç°çš„ä»£ç ï¼Œä»“åº“ï¼Œæˆ–çº¿ä¸Šç¤ºä¾‹
-->

const columns: ProColumns<OrderDetail>[] = [
{
title: 'å•†å“åç§°',
dataIndex: 'goodsId',
width: '30%',
renderFormItem: () => {
return (
<!--é€šè¿‡è¡¨å•è‡ªå®šä¹‰ç»„ä»¶çš„å›è°ƒå‡½æ•°ä¸­å¢åŠ ä¸€è¡Œæ²¡æœ‰ååº” -->
<GoodsSuggest
onChange={(value) => {
console.log(value);
actionRef.current?.addEditRecord?.({
id: (Math.random() * 1000000).toFixed(0),
});
}}
/>
)
}
},
{
title: 'è§„æ ¼',
key: 'spec',
dataIndex: 'spec',
renderFormItem: (_, { record }) => {
return record?.spec;
}
},
{
title: 'æ•°é‡',
dataIndex: 'labels',
width: '20%',
valueType: 'digit',
},
];

<PageContainer>
            <!é€šè¿‡æŒ‰é’®æ–¹æ³•å¯ä»¥æ–°å¢ä¸€è¡Œ -->
            <Button
                type="primary"
                onClick={() => {
                    actionRef.current?.addEditRecord?.({
                        id: (Math.random() * 1000000).toFixed(0),
                    });
                }}
            >
                æ–°å»ºä¸€è¡Œ
            </Button>
            <ProForm<{ table: OrderDetail[] }>
                formRef={formRef}
                initialValues={{
                    table: defaultData,
                }}
                validateTrigger="onBlur"
            >
                <EditableProTable<OrderDetail>
                    rowKey="id"
                    scroll={{
                        x: 960,
                    }}
                    editableFormRef={editorFormRef}
                    actionRef={actionRef}
                    headerTitle="å¯ç¼–è¾‘è¡¨æ ¼"
                    maxLength={5}
                    name="table"
                    recordCreatorProps={false}
                    columns={columns}
                    editable={{
                        type: 'multiple',
                        editableKeys,
                        onChange: setEditableRowKeys,
                    }}
                />
                <ProForm.Item>
                    <ProCard title="è¡¨æ ¼æ•°æ®" headerBordered collapsible defaultCollapsed>
                        <ProFormDependency name={['table']}>
                            {({ table }) => {
                                return (
                                    <ProFormField
                                        ignoreFormItem
                                        fieldProps={{
                                            style: {
                                                width: '100%',
                                            },
                                        }}
                                        mode="read"
                                        valueType="jsonCode"
                                        text={JSON.stringify(table)}
                                    />
                                );
                            }}
                        </ProFormDependency>
                    </ProCard>
                </ProForm.Item>
            </ProForm>
        </PageContainer>

### Â© ç‰ˆæœ¬ä¿¡æ¯

- ProComponents ç‰ˆæœ¬: [e.g. 4.0.0]
- umi ç‰ˆæœ¬
- æµè§ˆå™¨ç¯å¢ƒ
- å¼€å‘ç¯å¢ƒ [e.g. mac OS]

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

![image](https://user-images.githubusercontent.com/43694709/228170264-874ef7cc-5025-44a1-8722-1848fd2f458c.png)

![image](https://user-images.githubusercontent.com/43694709/228171236-a74e80eb-78d0-4ca4-91e3-bbf65a221f12.png)
