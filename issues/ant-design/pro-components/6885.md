# 🧐[问题]ProLayout在动态加载qiankun路由时无法配置layout: false

`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🧐 问题描述

ProLayout 组件 在动态加载 qiankun 路由时无法配置 layout: false

请问有什么方法可以实现让子应用不使用 ProLayout 吗

### 💻 示例代码

```ts
export const qiankun = () => {
  return {
    // 注册子应用信息
    apps: [
      {
        name: "demo",
        // entry: "/demo/",
        entry: "//localhost:3000/",
        activeRule: "demo",
        container: "111",
        props: {
          hello: "你好，世界～",
          base: "/demo",
        },
      },
    ],
    routes: [
      {
        path: "/demo",
        microApp: "demo",
        layout: false,
        microAppProps: {
          autoSetLoading: true,
          className: "userContainer",
          wrapperClassName: "userWrapper",
        },
        routes: [
          {
            layout: false,
            path: "/demo",
          },
          {
            path: "/user",
          },
        ],
      },
    ],
    // 完整生命周期钩子请看 https://qiankun.umijs.org/zh/api/#registermicroapps-apps-lifecycles
    lifeCycles: {
      bootstrap(props: any) {
        // setCreateHistoryOptions({basename: props?.base || '/'})
      },
      beforeLoad: (app: any) => {
        // console.log('app before load', app);
      },
      afterMount: (app: any) => {
        // console.log('app after mount', app);
      },
    },
    // 支持更多的其他配置，详细看这里 https://qiankun.umijs.org/zh/api/#start-opts
  };
};
```

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

### 📝 解决方案

在 `ProLayout` 的文档中，`layout` 属性是用来控制是否需要在该路由下展示布局，而非控制是否使用 `ProLayout`，具体使用方式可以参考 ProLayout 的文档：https://procomponents.ant.design/components/layout/

如果需要让子应用不使用 `ProLayout`，可以尝试在子应用中自定义一个 Layout 组件，然后在 routes 配置中使用该自定义组件，示例代码如下：

```tsx
import { Route } from "react-router-dom";

export const MyLayout: React.FC = ({ children }) => {
  return (
    <div>
      My layout
      {children}
    </div>
  );
};

export const qiankun = () => {
  return {
    apps: [
      // 子应用信息
      // ...
    ],
    routes: [
      {
        path: "/demo",
        microApp: "demo",
        layout: false,
        microAppProps: {
          autoSetLoading: true,
          className: "userContainer",
          wrapperClassName: "userWrapper",
        },
        routes: [
          {
            path: "/demo",
            // 在子应用中使用自定义 Layout 组件
            element: (
              <MyLayout>
                {/* 子路由 */}
                <Route path="/demo" />
                <Route path="/user" />
              </MyLayout>
            ),
          },
        ],
      },
    ],
    // 生命周期钩子
    // ...
  };
};
```

在子应用中，路由配置中使用了 `element` 属性，将 `MyLayout` 组件作为子路由的外层组件。这样子应用就可以不使用 `ProLayout`。

希望这个方案能够帮助到你，如果还有其他问题欢迎继续提问。

## chenshuai2144

layout 是 umi 实现的，你可以抄一下代码同样实现一下
