# ğŸ§[é—®é¢˜]ProTable å¤šåˆ—æ’åº

`AI Reply`

### ğŸ§ é—®é¢˜æè¿°

åœ¨ä½¿ç”¨ProTableï¼Œå¯¹å¤šåˆ—å¼€å¯æ’åºåŠŸèƒ½ï¼Œå¦‚åˆ›å»ºæ—¶é—´ã€åŠ å…¥ç¾¤çš„æ•°é‡ã€äº’åŠ¨æ—¶é—´ï¼Œéƒ½è®¾ç½®äº†sorter: trueï¼Œ å³ä½¿ç”¨äº†æœåŠ¡ç«¯æ’åºã€‚
ä½†å½“æŸä¸€åˆ—å¦‚åˆ›å»ºæ—¶é—´æ’åºçš„çŠ¶æ€ï¼ˆå‡åº/é™åºï¼‰ï¼Œç‚¹å‡»å¦å¤–ä¸€åˆ—ï¼Œå¦‚åŠ å…¥çš„ç¾¤æ•°é‡ï¼Œä¸€ç›´æ˜¾ç¤ºåœ¨å‡åºçš„çŠ¶æ€ï¼Œæ— æ³•å˜æˆé™åºæˆ–è€…å–æ¶ˆæ’åºã€‚
å¹¶ä¸”å¯¹äºsortOrderæ§ä»¶çŠ¶æ€ï¼Œä½¿ç”¨äº†umiçš„useRequest paramså‚æ•°ä¸­å¯¹åº”çš„æ’åºçŠ¶æ€å€¼æ¥æ§åˆ¶ã€‚

### ğŸ’» ç¤ºä¾‹ä»£ç 

<img width="839" alt="image" src="https://user-images.githubusercontent.com/23149314/230758052-a2ebedef-ba30-4418-8345-d3d3db983b04.png">

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## hexiaomin496

è¯·é—®å¦‚ä½•è§£å†³æ— æ³•åŒæ—¶è¿›è¡Œå¤šåˆ—ä¸”ä¸ºæœåŠ¡ç«¯æ’åºçš„é—®é¢˜

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

åœ¨ä½¿ç”¨ `ProTable` å¤„ç†å¤šåˆ—ä¸”ä½¿ç”¨æœåŠ¡ç«¯æ’åºæ—¶ï¼Œéœ€è¦æ³¨æ„å½“ä¸€ä¸ªåˆ—å¤„äºæ’åºçŠ¶æ€æ—¶ï¼Œç‚¹å‡»å…¶ä»–åˆ—æ—¶éœ€è¦æ­£ç¡®ä¿®æ”¹ `sortOrder` å’Œ `sortType` è¿™ä¸¤ä¸ªçŠ¶æ€å€¼ã€‚

æ ¹æ®æ‚¨çš„ä»£ç æˆªå›¾ï¼Œ`sortOrder` å’Œ `sortType` æ˜¯ç”± `useRequest` é’©å­çš„ `params` å¯¹è±¡æ§åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ­£ç¡®ä¿®æ”¹ `params.sorter` å¯¹è±¡æ¥å®ç°å¤šåˆ—æ’åºã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼Œè¯·æ ¹æ®æ‚¨çš„å…·ä½“æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼š

```typescript
import React, { useRef } from 'react';
import ProTable, { ProColumns } from '@ant-design/pro-table';
import { useRequest } from 'umi';

export default function Demo() {
  const tableRef = useRef();
  const { data, params, run } = useRequest(
    ({ pageSize, current: page, sorter }) => {
      const { field, order } = sorter || {};

      // å°†å¤šåˆ—æ’åºçš„ç›¸å…³ä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯
      const multiSorter = [];
      if (field) {
        multiSorter.push({
          field,
          order,
        });
      }
      if (params.sorter) {
        params.sorter.forEach(item => {
          if (item.field !== field) {
            multiSorter.push(item);
          }
        });
      }

      return service.fetch({
        pageSize,
        page,
        multiSorter,
      });
    },
    {
      paginated: true,
      defaultPageSize: 20,
    }
  );

  const columns: ProColumns<DataType>[] = [
    {
      title: 'åˆ›å»ºæ—¶é—´',
      dataIndex: 'createdAt',
      sorter: true,
    },
    {
      title: 'åŠ å…¥çš„ç¾¤æ•°é‡',
      dataIndex: 'groupCount',
      sorter: true,
    },
    {
      title: 'äº’åŠ¨æ—¶é—´',
      dataIndex: 'interactionTime',
      sorter: true,
    },
  ];

  const handleTableChange = (pagination, filters, sorter) => {
    // æ›´æ–° `params` å¯¹è±¡
    const newParams = {
      ...params,
      sorter: [],
    };
    if (sorter.field) {
      newParams.sorter.push({
        field: sorter.field,
        order: sorter.order,
      });
    }
    tableRef.current.setParams(newParams);

    run({
      // åˆ†é¡µä¿¡æ¯
      pageSize: pagination.pageSize,
      current: pagination.current,
      // æ’åºä¿¡æ¯
      sorter,
    });
  };

  return (
    <ProTable
      columns={columns}
      dataSource={data?.list}
      pagination={{
        ...data?.pagination,
        showQuickJumper: true,
        showSizeChanger: true,
      }}
      onChange={handleTableChange}
      search={false}
      options={{
        reloadBtn: true,
        fullScreen: true,
      }}
      tableAlertRender={false}
      rowKey="id"
      ref={tableRef}
    />
  );
}
```

è¿™é‡Œæˆ‘ä»¬åœ¨è¯·æ±‚æ•°æ®æ—¶ï¼Œé€šè¿‡ `multiSorter` å¯¹è±¡å°†æœåŠ¡ç«¯éœ€è¦ä½¿ç”¨çš„å¤šåˆ—æ’åºä¿¡æ¯å‘é€å‡ºå»ï¼Œä¿®æ”¹è¡¨æ ¼çŠ¶æ€æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨å¤šåˆ—æ’åºä¿¡æ¯æ¥åˆ¤æ–­å½“å‰çŠ¶æ€ã€‚ä¿®æ”¹ `params` å¯¹è±¡é‡‡ç”¨äº†æµ…æ‹·è´çš„æ–¹å¼ï¼Œä¿è¯äº†å¯¹åŸå§‹ `params` çš„ä¿®æ”¹ä¸ä¼šç ´åå…¶å®ƒçŠ¶æ€ã€‚ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸é€‚ç”¨äºåç«¯ä¸æ”¯æŒå¤šåˆ—æ’åºçš„æƒ…å†µã€‚

å¸Œæœ›è¿™ä¸ªè§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå¸®åˆ°ä½ ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è®¨è®ºï¼

## hexiaomin496

> > TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> > æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚
>
> åœ¨ä½¿ç”¨ `ProTable` å¤„ç†å¤šåˆ—ä¸”ä½¿ç”¨æœåŠ¡ç«¯æ’åºæ—¶ï¼Œéœ€è¦æ³¨æ„å½“ä¸€ä¸ªåˆ—å¤„äºæ’åºçŠ¶æ€æ—¶ï¼Œç‚¹å‡»å…¶ä»–åˆ—æ—¶éœ€è¦æ­£ç¡®ä¿®æ”¹ `sortOrder` å’Œ `sortType` è¿™ä¸¤ä¸ªçŠ¶æ€å€¼ã€‚
>
> æ ¹æ®æ‚¨çš„ä»£ç æˆªå›¾ï¼Œ`sortOrder` å’Œ `sortType` æ˜¯ç”± `useRequest` é’©å­çš„ `params` å¯¹è±¡æ§åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ­£ç¡®ä¿®æ”¹ `params.sorter` å¯¹è±¡æ¥å®ç°å¤šåˆ—æ’åºã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼Œè¯·æ ¹æ®æ‚¨çš„å…·ä½“æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼š
>
> ```ts
> import React, { useRef } from 'react';
> import ProTable, { ProColumns } from '@ant-design/pro-table';
> import { useRequest } from 'umi';
>
> export default function Demo() {
>   const tableRef = useRef();
>   const { data, params, run } = useRequest(
>     ({ pageSize, current: page, sorter }) => {
>       const { field, order } = sorter || {};
>
>       // å°†å¤šåˆ—æ’åºçš„ç›¸å…³ä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯
>       const multiSorter = [];
>       if (field) {
>         multiSorter.push({
>           field,
>           order,
>         });
>       }
>       if (params.sorter) {
>         params.sorter.forEach(item => {
>           if (item.field !== field) {
>             multiSorter.push(item);
>           }
>         });
>       }
>
>       return service.fetch({
>         pageSize,
>         page,
>         multiSorter,
>       });
>     },
>     {
>       paginated: true,
>       defaultPageSize: 20,
>     }
>   );
>
>   const columns: ProColumns<DataType>[] = [
>     {
>       title: 'åˆ›å»ºæ—¶é—´',
>       dataIndex: 'createdAt',
>       sorter: true,
>     },
>     {
>       title: 'åŠ å…¥çš„ç¾¤æ•°é‡',
>       dataIndex: 'groupCount',
>       sorter: true,
>     },
>     {
>       title: 'äº’åŠ¨æ—¶é—´',
>       dataIndex: 'interactionTime',
>       sorter: true,
>     },
>   ];
>
>   const handleTableChange = (pagination, filters, sorter) => {
>     // æ›´æ–° `params` å¯¹è±¡
>     const newParams = {
>       ...params,
>       sorter: [],
>     };
>     if (sorter.field) {
>       newParams.sorter.push({
>         field: sorter.field,
>         order: sorter.order,
>       });
>     }
>     tableRef.current.setParams(newParams);
>
>     run({
>       // åˆ†é¡µä¿¡æ¯
>       pageSize: pagination.pageSize,
>       current: pagination.current,
>       // æ’åºä¿¡æ¯
>       sorter,
>     });
>   };
>
>   return (
>     <ProTable
>       columns={columns}
>       dataSource={data?.list}
>       pagination={{
>         ...data?.pagination,
>         showQuickJumper: true,
>         showSizeChanger: true,
>       }}
>       onChange={handleTableChange}
>       search={false}
>       options={{
>         reloadBtn: true,
>         fullScreen: true,
>       }}
>       tableAlertRender={false}
>       rowKey="id"
>       ref={tableRef}
>     />
>   );
> }
> ```
>
> è¿™é‡Œæˆ‘ä»¬åœ¨è¯·æ±‚æ•°æ®æ—¶ï¼Œé€šè¿‡ `multiSorter` å¯¹è±¡å°†æœåŠ¡ç«¯éœ€è¦ä½¿ç”¨çš„å¤šåˆ—æ’åºä¿¡æ¯å‘é€å‡ºå»ï¼Œä¿®æ”¹è¡¨æ ¼çŠ¶æ€æ—¶ä¹Ÿéœ€è¦ä½¿ç”¨å¤šåˆ—æ’åºä¿¡æ¯æ¥åˆ¤æ–­å½“å‰çŠ¶æ€ã€‚ä¿®æ”¹ `params` å¯¹è±¡é‡‡ç”¨äº†æµ…æ‹·è´çš„æ–¹å¼ï¼Œä¿è¯äº†å¯¹åŸå§‹ `params` çš„ä¿®æ”¹ä¸ä¼šç ´åå…¶å®ƒçŠ¶æ€ã€‚ä¸è¿‡éœ€è¦æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸é€‚ç”¨äºåç«¯ä¸æ”¯æŒå¤šåˆ—æ’åºçš„æƒ…å†µã€‚
>
> å¸Œæœ›è¿™ä¸ªè§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå¸®åˆ°ä½ ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿è®¨è®ºï¼

å¥½çš„ è°¢è°¢~æˆ‘è¿™å°±å»å®è·µä¸€ä¸‹ï¼æ„Ÿè°¢æ‚¨

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

ä¸å®¢æ°”ï¼Œç¥æ‚¨å®è·µæ„‰å¿«ï¼å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶å†æ¥è¯¢é—®ã€‚

## chenshuai2144

<img width="818" alt="image" src="https://github.com/ant-design/pro-components/assets/8186664/537bbf3f-62ed-4407-9184-478ac1bc4803">

å¯¹æŸä¸€åˆ—æ•°æ®è¿›è¡Œç­›é€‰ï¼Œä½¿ç”¨åˆ—çš„ filters å±æ€§æ¥æŒ‡å®šéœ€è¦ç­›é€‰èœå•çš„åˆ—ï¼ŒonFilter ç”¨äºç­›é€‰å½“å‰æ•°æ®ï¼ŒfilterMultiple ç”¨äºæŒ‡å®šå¤šé€‰å’Œå•é€‰ã€‚
å¯¹æŸä¸€åˆ—æ•°æ®è¿›è¡Œæ’åºï¼Œé€šè¿‡æŒ‡å®šåˆ—çš„ sorter å‡½æ•°å³å¯å¯åŠ¨æ’åºæŒ‰é’®ã€‚sorter: function(rowA, rowB) { ... }ï¼Œ rowAã€rowB ä¸ºæ¯”è¾ƒçš„ä¸¤ä¸ªè¡Œæ•°æ®ã€‚
sortDirections: ['ascend' | 'descend']æ”¹å˜æ¯åˆ—å¯ç”¨çš„æ’åºæ–¹å¼ï¼Œåˆ‡æ¢æ’åºæ—¶æŒ‰æ•°ç»„å†…å®¹ä¾æ¬¡åˆ‡æ¢ï¼Œè®¾ç½®åœ¨ table props ä¸Šæ—¶å¯¹æ‰€æœ‰åˆ—ç”Ÿæ•ˆã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® ['ascend', 'descend', 'ascend'] ç¦æ­¢æ’åºæ¢å¤åˆ°é»˜è®¤çŠ¶æ€ã€‚
ä½¿ç”¨ defaultSortOrder å±æ€§ï¼Œè®¾ç½®åˆ—çš„é»˜è®¤æ’åºé¡ºåºã€‚
