# 👑 [需求] 请问可以开放components官网的动态切换主题按钮的组件吗？

`AI Reply`

官网地址：https://procomponents.ant.design/

希望能开放出右上角动态切换主题按钮！

## Wxh16144

官网用主题包，你可以参考 [NativeSelect](https://github.com/arvinxx/dumi-theme-antd-style/tree/c9cd790d72cdcb391893fb2423085c7257ccec6d/src/components/NativeSelect) 组件，利用 antd-style 实现一份

## tnngo

> 官网用主题包，你可以参考 [NativeSelect](https://github.com/arvinxx/dumi-theme-antd-style/tree/c9cd790d72cdcb391893fb2423085c7257ccec6d/src/components/NativeSelect) 组件，利用 antd-style 实现一份

非常感谢，我试一下

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

不客气，如果您在使用过程中有任何问题，可以随时向我咨询。

以下是一份示例代码，可以作为参考：

```jsx
import React from "react";
import { Select } from "antd";
import { useAntdTheme } from "antd-theme";
import { SketchPicker } from "react-color";

const { Option } = Select;

const ThemeSwitcher = () => {
  const [theme, setTheme] = useAntdTheme();
  const [colorPickerVisible, setColorPickerVisible] = React.useState(false);

  const handleChange = (newTheme) => {
    setTheme(newTheme);
  };

  const handleColorChange = (newColor) => {
    setTheme({
      ...theme,
      "@primary-color": newColor.hex,
    });
  };

  return (
    <div className="theme-switcher">
      <Select value={theme.name} onChange={handleChange} style={{ width: 120 }}>
        <Option value="default">默认</Option>
        <Option value="dark">暗黑</Option>
        <Option value="compact">紧凑</Option>
      </Select>
      <div
        className="color-picker"
        style={{
          backgroundColor: theme["@primary-color"],
        }}
        onClick={() => setColorPickerVisible(true)}
      />
      {colorPickerVisible && (
        <div className="popover">
          <div className="cover" onClick={() => setColorPickerVisible(false)} />
          <SketchPicker
            color={theme["@primary-color"]}
            onChange={handleColorChange}
          />
        </div>
      )}
      <style jsx global>{`
        .theme-switcher {
          display: flex;
          align-items: center;
        }
        .color-picker {
          width: 20px;
          height: 20px;
          margin-left: 8px;
          cursor: pointer;
          transition: background 0.3s;
          border-radius: 50%;
        }
        .popover {
          position: absolute;
          z-index: 2;
          top: 30px;
          left: -12px;
        }
        .cover {
          position: fixed;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
        }
      `}</style>
    </div>
  );
};

export default ThemeSwitcher;
```

其中，`useAntdTheme` 是一个用于获取和更改当前 antd 主题的自定义 hook，具体使用文档见[这里](https://github.com/7rulnik/antd-theme/blob/master/README.zh-CN.md)。

右上角的颜色选择器使用的是 `react-color` 的 `SketchPicker` 组件。

此外，为了使选择器可以在其他元素之上显示，我们使用了 zIndex 和 fixed 定位。
