# 🐛[BUG] pnpm8 install安装出多个antd版本

### 🐛 bug 描述

<!--
详细地描述 bug，让大家都能理解
-->

pnpm 8.6.0：pnpm install会安装出2个antd版本，这样会因版本导致下图很多报错

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

#### 在antd-pro v6 demo

```
pnpm install // pnpm版本 8.6.0
```

#### .npmrc

```
engine-strict=true
shamefully-hoist=true
resolution-mode=highest
registry="https://registry.npmjs.org/"
```

#### 根目录package.json

```
"dependencies": {
    "@ant-design/icons": "^4.8.0",
    "@ant-design/pro-components": "^2.5.5",
    "@umijs/route-utils": "^4.0.1",
    "antd": "^5.5.1"
  },
```

#### 启动服务:pnpm run start

### 🏞 期望结果

<!--
描述你原本期望看到的结果
-->

期望pnpm 8.6.0执行：pnpm install后只安装1个最新antd版本

### 💻 复现代码

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

- ProComponents 版本: "^2.5.5"
- umi 版本："@umijs/max": "^4.0.70",
- 浏览器环境：常见浏览器
- 开发环境 mac OS

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->
<img width="1522" alt="image" src="https://github.com/ant-design/pro-components/assets/22837419/3cc4aed5-7246-482c-85f5-33f57522862e">

![image](https://github.com/ant-design/pro-components/assets/22837419/e989db6e-bee3-413a-8e76-592684f83063)

![image](https://github.com/ant-design/pro-components/assets/22837419/3444b1ce-855f-4b79-9f22-e36f69993d33)

![image](https://github.com/ant-design/pro-components/assets/22837419/3e8d84ce-1731-4b63-bb70-17ec77e50812)

## chenshuai2144

pro 组件都是 peerDependencies 的，pnpm 有什么特殊的规则吗

## lovewinders

> pro 组件都是 peerDependencies 的，pnpm 有什么特殊的规则吗

@chenshuai2144 感觉pnpm8是多个大版本冲突以低版本那个为准，或是umijs max的锅
<img width="1437" alt="image" src="https://github.com/ant-design/pro-components/assets/22837419/69e60cbf-3d45-429d-9007-450050d56266">

## lovewinders

我找到问题所在了，就是umijs/max的问题，它的依赖版本是"antd": "^4.20.6",这个umijs太坑了
![image](https://github.com/ant-design/pro-components/assets/22837419/d2ea7c37-88e8-4694-8e9f-dd78038feaef)
