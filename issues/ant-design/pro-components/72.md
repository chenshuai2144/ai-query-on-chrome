# ğŸ‘‘ [éœ€æ±‚]ProTableåˆ é™¤æœ€åä¸€é¡µå”¯ä¸€ä¸€æ¡æ•°æ®

`enhancement`,`table`

### ğŸ¥° éœ€æ±‚æè¿°

ç›®å‰åˆ é™¤æœ€åä¸€é¡µå”¯ä¸€ä¸€æ¡æ•°æ®åï¼Œè¡¨æ ¼æ˜¾ç¤ºä¸ºç©ºï¼Ÿ

<!--
è¯¦ç»†åœ°æè¿°éœ€æ±‚ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ§ è§£å†³æ–¹æ¡ˆ

åˆ¤æ–­æ˜¯å¦ä¸ºè¯¥é¡µå”¯ä¸€ä¸€æ¡æ•°æ®ï¼Œè‹¥æ˜¯ï¼Œåˆ é™¤æ•°æ®ä¹‹åè‡ªåŠ¨å›åˆ°ä¸Šä¸€é¡µ

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

ä½ éœ€è¦è‡ªå·±æ§åˆ¶ä¸€ä¸‹äº†ï¼Œæˆ‘ä»¬ä¸ä¼šåšè¿™ä¹ˆé­”æ³•çš„äº‹æƒ…ã€‚
ä½ å¯ä»¥æ ¹æ®é¡µç å’Œ total åšä¸€ä¸‹åˆ¤æ–­

## isseptember

> ä½ éœ€è¦è‡ªå·±æ§åˆ¶ä¸€ä¸‹äº†ï¼Œæˆ‘ä»¬ä¸ä¼šåšè¿™ä¹ˆé­”æ³•çš„äº‹æƒ…ã€‚
> ä½ å¯ä»¥æ ¹æ®é¡µç å’Œ total åšä¸€ä¸‹åˆ¤æ–­

æ‚¨å¥½ï¼Œå…³äºè¿™ä¸ªé—®é¢˜ï¼Œæœ‰å‡ ä¸ªä¸è§£ä¹‹å¤„å‘æ‚¨è¯·æ•™ï¼š

1ã€è®¾ç½®äº†ä¸¤ä¸ªçŠ¶æ€
![image](https://user-images.githubusercontent.com/54738906/89121522-3be10c00-d4f2-11ea-9693-e67fcfd2c8ff.png)
2ã€ProTable çš„ pagination å±æ€§
![image](https://user-images.githubusercontent.com/54738906/89121580-9e3a0c80-d4f2-11ea-90a3-93f3cc1b8457.png)
3ã€ProTable çš„ toolBarRender å±æ€§ï¼Œâ€œæ‰¹é‡åˆ é™¤â€ç‚¹å‡»äº‹ä»¶
![image](https://user-images.githubusercontent.com/54738906/89121602-c164bc00-d4f2-11ea-8864-b3aea60518d3.png)
4ã€è·å– DataSourceï¼ˆè®¾å®š total ä¸º101ï¼‰
![image](https://user-images.githubusercontent.com/54738906/89121622-f244f100-d4f2-11ea-8789-0c7996954912.png)
**5ã€ç°è±¡**ï¼šç¿»é¡µè‡³æœ€åä¸€é¡µï¼ˆå¦‚ç¬¬6é¡µï¼‰ï¼Œä¸”è¯¥é¡µåªæœ‰ä¸€æ¡æ•°æ®ï¼Œåˆ é™¤è¯¥æ•°æ®ä¹‹åï¼Œè¡¨æ ¼é¡µé¢ä½äºç¬¬5é¡µï¼Œä½†æ˜¯ pagination æ˜¾ç¤ºä¸æ­£ç¡®
**åˆ é™¤å‰**
![image](https://user-images.githubusercontent.com/54738906/89121741-19e88900-d4f4-11ea-926a-40a6e43121a4.png)
**åˆ é™¤å**
![image](https://user-images.githubusercontent.com/54738906/89121752-3b497500-d4f4-11ea-8c21-b9127f0a0fde.png)
**6ã€é—®é¢˜**ï¼špagination çš„ `showTotal` å±æ€§åœ¨æ­¤æ²¡æœ‰ç”Ÿæ•ˆï¼Ÿè¯·æ±‚æ•°æ®å‰çš„ `setPageNumber(pageNo -1)` ä¹Ÿæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆï¼Œåº”è¯¥è¿›è¡Œä»€ä¹ˆæ“ä½œä½¿ pagination æ˜¾ç¤ºæ­£å¸¸å‘¢ï¼ŸæœŸå¾…æ‚¨çš„å›ç­”ï¼Œæ„Ÿè°¢~

## superAo005

æˆ‘ä¹Ÿé‡åˆ°åŒæ ·çš„é—®é¢˜ è¯·é—®è§£å†³äº†å—

## wjf40390

æˆ‘è‡ªå·±å†™äº†ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼š

```
/**
 * reloadTable å…¼å®¹tableåˆ é™¤æœ€åä¸€é¡µçš„å…¨éƒ¨æ•°æ®ï¼Œtable.reload()å›é€€åˆ°ä¸Šä¸€é¡µ
 * @param {*} tableRef tableRef
 * @param {*} deleteNum åˆ é™¤çš„ä»»åŠ¡æ•°
 */
export const reloadTable = (
  tableRef: React.MutableRefObject<ActionType | undefined>,
  deleteNum: number,
) => {
  const cur = tableRef?.current;
  if (!cur || !cur.pageInfo) {
    return;
  }
  const {
    pageInfo: { current, total, pageSize },
  } = cur;
  // æ€»é¡µæ•°
  const pageNum = Math.ceil(total / pageSize);
  // æœ€åä¸€é¡µä»»åŠ¡æ•°
  const taskNum = total - (pageNum - 1) * pageSize;
  // åˆ é™¤çš„æ˜¯æœ€åä¸€é¡µçš„ä»»åŠ¡ï¼Œå¹¶ä¸”å…¨éƒ¨åˆ é™¤
  const lastPageIsEmpey = current === pageNum && deleteNum === taskNum && current !== 1;
  if (lastPageIsEmpey) {
    // é‡ç½®ä¸ºä¸Šä¸€é¡µçš„é¡µç å¹¶åˆ·æ–°
    cur.setPageInfo!({
      ...cur.pageInfo,
      current: current - 1,
      total: total - deleteNum,
    });
    cur.reload();
  } else {
    cur.reload();
  }
};
```

åœ¨åˆ é™¤æˆåŠŸåè°ƒç”¨è¯¥æ–¹æ³•å³å¯ã€‚

![1677033081004](https://user-images.githubusercontent.com/41931794/220505881-5bb85ca0-8c7b-4a2b-a925-e63fc0464974.jpg)

ActionRef å‚ç…§https://procomponents.ant.design/components/table?current=1&pageSize=5#actionref-%E6%89%8B%E5%8A%A8%E8%A7%A6%E5%8F%91

## ChenZiyi921

å¤§ä½¬ï¼Œæ²¡æœ‰å…¶ä»–åŠæ³•äº†å—
