# ğŸ§[é—®é¢˜] ProLayout å’Œ UMIä¸€èµ·ä½¿ç”¨ï¼Œåœ¨umi app.tsx çš„ layoutä¸­å®šåˆ¶ prolayout çš„ token å¦‚ä½•å°†æ ·å¼è®¾ç½®ä¸ºåŠ¨æ€çš„ token

<img width="656" alt="image" src="https://github.com/ant-design/pro-components/assets/21010051/8141bfd2-d1e8-444b-a8ee-5c72188023eb">

æˆ‘å¸Œæœ›è¿™äº›æ ·å¼éƒ½æ˜¯ä»å½“å‰ä¸»é¢˜ä¸­è¯»å–çš„é¢œè‰²ï¼Œä»¥ä¾¿æˆ‘åœ¨åˆ‡æ¢æš—é»‘çš„æ—¶å€™ï¼Œèƒ½åŠ¨æ€çš„å»å˜åŒ–ï¼Œæˆ‘è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ
ç›®å‰æˆ‘åªèƒ½é€šè¿‡å…³é—­ umi çš„ layout ç„¶åè‡ªå·±é…ç½®å…¨å±€å¸ƒå±€æ¥å®ç°ï¼Œå¯ä»¥ç›´æ¥åœ¨ umi çš„ app.tsx è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ä¸­å®ç°å—ï¼Ÿ

## chenshuai2144

https://umijs.org/docs/max/data-flow#%E5%85%A8%E5%B1%80%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81

@umi/max å†…ç½®äº†å…¨å±€åˆå§‹çŠ¶æ€ç®¡ç†[æ’ä»¶](https://github.com/umijs/umi/blob/master/packages/plugins/src/initial-state.ts)ï¼Œå…è®¸æ‚¨å¿«é€Ÿæ„å»ºå¹¶åœ¨ç»„ä»¶å†…è·å– Umi é¡¹ç›®å…¨å±€çš„åˆå§‹çŠ¶æ€ã€‚

å…¨å±€åˆå§‹çŠ¶æ€æ˜¯ä¸€ç§ç‰¹æ®Šçš„ Modelã€‚

å…¨å±€åˆå§‹çŠ¶æ€åœ¨æ•´ä¸ª Umi é¡¹ç›®çš„æœ€å¼€å§‹åˆ›å»ºã€‚ç¼–å†™ src/app.ts çš„å¯¼å‡ºæ–¹æ³• getInitialState()ï¼Œå…¶è¿”å›å€¼å°†æˆä¸ºå…¨å±€åˆå§‹çŠ¶æ€ã€‚ä¾‹å¦‚ï¼š

```

// src/app.ts
import { fetchInitialData } from '@/services/initial';

export async function getInitialState() {
  const initialData = await fetchInitialData();
  return initialData;
}
```

åœ¨ app.tsx é‡Œé¢å¯ä»¥

```
// src/app.ts
const  layout = (initialState)=>LayoutProps
```
