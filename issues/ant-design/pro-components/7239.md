# 🐛[BUG]EditableProTable 多行编辑 渲染次数过多，页面异常卡顿，设置shouldCellUpdate未生效

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

EditableProTable 多行编辑，对datasource进行任意操作，都会导致表格多次渲染，页面异常卡顿。

<!--
详细地描述 bug，让大家都能理解
-->

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

[codesandbox](https://codesandbox.io/embed/shi-shi-bao-cun-de-bian-ji-biao-ge-forked-3hdrsv?fontsize=14&hidenavigation=1&theme=dark)

1. 打开控制台查看console
2. 改变状态列的任意一行，eg：第一行从未解决改为已解决
3. 第一列console打印了21次，与添加`shouldCellUpdate`前渲染次数一样多。

### 🏞 期望结果

改变任意行的任意列，只重新渲染被改变的任意行任意列。在官方示例中，有20行x4列。意味着随便改变一个input，会产生80次渲染，很耗费性能，无法承载数据量稍微大一点的表格。

<!--
描述你原本期望看到的结果
-->

### 💻 复现代码

部分列配置如下：

```js
    {
      title: "活动名称",
      dataIndex: "title",
      width: "30%",
      shouldCellUpdate: (record, prevRecord) => {
        console.count(`shouldCellUpdate title`);
        return record.title !== prevRecord.title;
      },
      formItemProps: {
        rules: [
          {
            required: true,
            whitespace: true,
            message: "此项是必填项"
          },
          {
            message: "必须包含数字",
            pattern: /[0-9]/
          },
          {
            max: 16,
            whitespace: true,
            message: "最长为 16 位"
          },
          {
            min: 6,
            whitespace: true,
            message: "最小为 6 位"
          }
        ]
      },
      renderFormItem: () => {
        console.count(`render title`);
        return <Input />;
      }
    },
```

<!--
提供可复现的代码，仓库，或线上示例
-->

### © 版本信息

- ProComponents 版本: [2.5.10]
- umi 版本
- 浏览器环境
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

shouldCellUpdate 拦不住的，因为是 form 直接的设置的，你应该使用 formItem 的 shouldupdate

## TaurusWood

@chenshuai2144
我用shouldupdate依然会渲染，也没有生效。

https://codesandbox.io/s/shi-shi-bao-cun-de-bian-ji-biao-ge-forked-3hdrsv?from-embed=&file=/App.tsx
