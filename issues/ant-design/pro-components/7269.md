# ä¸‹æ‹‰ç­›é€‰çš„ValueEnumå¦‚ä½•è®¾ç½®ğŸ§[é—®é¢˜]

`AI Reply`

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ§ é—®é¢˜æè¿°

æ­£åœ¨ä½¿ç”¨`ProTable`ï¼Œå…¶ä¸­`columns`å®šä¹‰çš„æŸä¸€é¡¹ä¸­ä½¿ç”¨äº†`renderFormItem`å’Œ`render`ï¼Œæˆ‘å¸Œæœ›èƒ½åŸºäº`render`ä¸­çš„`key`è¿›è¡Œç­›é€‰ã€‚

<!--
è¯¦ç»†åœ°æè¿°é—®é¢˜ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ’» ç¤ºä¾‹ä»£ç 

ä»¥ä¸‹æ˜¯æˆ‘çš„ç¤ºä¾‹ä»£ç 

```typescript
// æ•°æ®ç±»
type UserItem = {
    ...
    role: {
        name: string;
        color: string;
    }[];
};

const columns: ProColumns<UserItem>[] = [
// æŸä¸€ä¸ªcolumnçš„å®šä¹‰
{
        disable: true,
        title: 'è§’è‰²',
        dataIndex: 'role',
        // search: false,
        renderFormItem: (_, { defaultRender }) => {
            return defaultRender(_);
        },
        render: (_, record:UserItem) => (
            <Space>
                {record.role.map(({ name, color }) => (
                    <Tag role={name} color={color} key={name}>
                        {name}
                    </Tag>
                ))}
            </Space>
        ),
        filters: true,
        onFilter: true,
        // https://procomponents.ant.design/components/schema#valueenum
        valueType: 'select',
        valueEnum: {
            all:{
                text:"å…¨éƒ¨"
            },
            admin:{
                text:"admin"
            },
            user:{
                text:"user"
            }
        }
        ),
    },
];

export default () => {
    const actionRef = useRef<ActionType>();
    return (
        <ProTable<UserItem>
            columns={columns}
            actionRef={actionRef}
            cardBordered
            request={async (params = {}, sort, filter) => {
                console.log(sort, filter);
                await waitTime(2000);
                return request<{
                    data: UserItem[];
                }>('/api/v1/manage/queryAllUserList', {
                    params,
                });
            }}
            editable={{
                type: 'multiple',
            }}
            columnsState={{
                persistenceKey: 'pro-table-singe-demos',
                persistenceType: 'localStorage',
                onChange(value) {
                    console.log('value: ', value);
                },
            }}
            rowKey="id"
            search={{
                labelWidth: 'auto',
            }}
            options={{
                setting: {
                    listsHeight: 800,
                },
            }}
            form={{
                // ç”±äºé…ç½®äº† transformï¼Œæäº¤çš„å‚ä¸ä¸å®šä¹‰çš„ä¸åŒè¿™é‡Œéœ€è¦è½¬åŒ–ä¸€ä¸‹
                syncToUrl: (values, type) => {
                    if (type === 'get') {
                        return {
                            ...values,
                            created_at: [values.startTime, values.endTime],
                        };
                    }
                    return values;
                },
            }}
            pagination={{
                pageSize: 10,
                onChange: (page) => console.log(page),
            }}
            dateFormatter="string"
            headerTitle="å½“å‰ç”¨æˆ·"
            toolBarRender={() => [
                <Button
                    key="button"
                    icon={<PlusOutlined />}
                    onClick={() => {
                        actionRef.current?.reload();
                    }}
                    type="primary"
                >
                    æ·»åŠ ç”¨æˆ·
                </Button>,
            ]}
            onSubmit={(params)=>{
                alert("submit");
                console.log("submit:", params);
            }}
        />
    );
};
```

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## LabBaxMX-0219

æˆ‘å‚è€ƒçš„æ¨¡æ¿: https://procomponents.ant.design/components/table?tab=api&current=1&pageSize=5#packages-table-src-components-table-tab-api-demo-single

æˆ‘çš„responseéƒ¨åˆ†çš„ç”¨æˆ·æ•°æ®å¦‚ä¸‹ï¼š

```json
{
            "id": "0af0316f-4068-495d-82cd-bd0662985d1a",
            "avater": "https://avatars.githubusercontent.com/u/69057311",
            "phone": "+86 148-0914-8200",
            "created_at": "2023-06-24T14:26:46.275Z",
            "updated_at": "2023-06-24T16:19:24.021Z",
            "locked_at": "2023-06-25T01:18:29.496Z",
            "role": [
                {
                    "name": "user",
                    "color": "default"
                }
            ],
            "user": "Ena_Rosenbaum@hotmail.com",
            "state": "locked"
        },
```

é—®é¢˜æˆªå›¾å¦‚ä¸‹

![èƒ½å¤Ÿæ­£å¸¸è·å–åˆ°æ¨¡æ‹Ÿæ•°æ®](https://github.com/ant-design/pro-components/assets/70470574/ce9b570d-1051-49d0-af4e-d41c33ee90a3)

![è¿›è¡Œç­›é€‰æ—¶æ— æ³•è·å¾—å¯¹åº”çš„æ•°æ®](https://github.com/ant-design/pro-components/assets/70470574/93edc42d-3ed2-4126-8be3-bc397712cea4)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> æ­¤å›å¤åŸºäº ChatGPT è‡ªåŠ¨ç”Ÿæˆï¼Œå¯ä»¥å°è¯•ä¸‹æ–¹æ¡ˆï¼Œå®˜æ–¹äººå‘˜ä¼šåœ¨ä¸€å®šæ—¶é—´åç»§ç»­ç»§ç»­å¤„ç†ã€‚

ä½ çš„é—®é¢˜æ˜¯å¸Œæœ›åŸºäº`render`ä¸­çš„`key`è¿›è¡Œä¸‹æ‹‰ç­›é€‰çš„ValueEnumè®¾ç½®ã€‚æ ¹æ®ä½ æä¾›çš„ä¿¡æ¯å’Œä»£ç ï¼Œæˆ‘æ³¨æ„åˆ°ä½ å·²ç»æ­£ç¡®è®¾ç½®äº†`valueEnum`ã€‚ä¸è¿‡ï¼Œè¦ä½¿åŸºäº`render`ä¸­çš„`key`è¿›è¡Œç­›é€‰ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦åœ¨`onFilter`å›è°ƒå‡½æ•°ä¸­å¯¹ç­›é€‰æ¡ä»¶è¿›è¡Œå¤„ç†ã€‚

åœ¨ä½ çš„ä»£ç ä¸­ï¼Œ`onFilter`å±æ€§è®¾ç½®ä¸º`true`ï¼Œè¿™ä½¿å¾—`ProTable`å†…éƒ¨ä¼šæ ¹æ®`valueEnum`è‡ªåŠ¨å¤„ç†ç­›é€‰é€»è¾‘ã€‚ç„¶è€Œï¼Œç”±äºä½ çš„`render`æ–¹æ³•ä¸­ä½¿ç”¨äº†ä¸€ä¸ª`Array.map`å¾ªç¯ï¼Œæ¯ä¸ª`Tag`ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„`key`ï¼Œæ‰€ä»¥åœ¨ç­›é€‰æ—¶éœ€è¦ä½¿ç”¨`filter`å‚æ•°è¿›è¡ŒåŒ¹é…ã€‚

ä¸‹é¢æ˜¯ä½ éœ€è¦è¿›è¡Œçš„ä¿®æ”¹:

1. åœ¨`onFilter`çš„å›è°ƒå‡½æ•°ä¸­ï¼Œå°†`record.role.map(({ name }) => name)`æ”¹ä¸º`record.role.map(({ name }) => name).includes(filter.toString())`ï¼Œè¿™ä¼šæ£€æŸ¥`filter`å‚æ•°æ˜¯å¦åŒ…å«åœ¨`name`æ•°ç»„ä¸­ã€‚

ä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹ï¼š

```typescript
// æ•°æ®ç±»
type UserItem = {
    ...
    role: {
        name: string;
        color: string;
    }[];
};

const columns: ProColumns<UserItem>[] = [
// æŸä¸€ä¸ªcolumnçš„å®šä¹‰
{
    ...
    onFilter: (_, record) => record.role.map(({ name }) => name).includes(_.toString()),
    ...
    valueEnum: {
        all: {
            text: "å…¨éƒ¨"
        },
        admin: {
            text: "admin"
        },
        user: {
            text: "user"
        }
    },
},
];
```

è¿™æ ·ä¿®æ”¹åï¼Œä½ åº”è¯¥èƒ½å¤Ÿé€šè¿‡ä¸‹æ‹‰ç­›é€‰åŸºäº`render`ä¸­çš„`key`è¿›è¡Œç­›é€‰ã€‚

å¸Œæœ›è¿™èƒ½è§£å†³ä½ çš„é—®é¢˜ï¼å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶é—®æˆ‘ã€‚
