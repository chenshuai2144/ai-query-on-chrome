# 🐛[BUG]： EditTable 自定义 FormItemRender 会导致两层 rules 规则提示

`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

自定义了 FormItemRender 后，如果把默认的 defaultRender 也加入进去渲染，就会出现 rules 走了两层逻辑

https://codesandbox.io/s/yu-formitem-pei-he-forked-hrgryl

![image](https://github.com/ant-design/pro-components/assets/52664827/55a26cf8-f3d1-4070-86c8-34fd6953f63d)

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

你好！

根据你的描述和代码示例，问题出在自定义的 `FormItemRender` 组件中，当你同时添加了默认的 `defaultRender` 渲染时，`rules` 规则会出现两层逻辑。这可能是因为在渲染过程中，`defaultRender` 会再次应用 `rules` 规则，导致重复提示。

解决这个问题，你可以在自定义的 `FormItemRender` 组件中，不再使用默认的 `defaultRender` 渲染，而是自己进行表单项的渲染和验证。以下是一个示例代码：

```jsx
import { Form, Input } from "antd";

const MyFormItemRender = ({ value, onChange }) => {
  const handleInputChange = (e) => {
    onChange(e.target.value);
  };

  return (
    <Form.Item rules={[{ required: true, message: "请输入值" }]}>
      <Input value={value} onChange={handleInputChange} />
    </Form.Item>
  );
};

export default MyFormItemRender;
```

在这个示例中，我们使用了 Ant Design 的 `Form.Item` 和 `Input` 组件来自定义一个表单项的渲染。通过传入 `value` 和 `onChange` 属性，我们可以对表单项的值进行控制和改变。同时，我们也使用了 `rules` 属性来定义表单项的验证规则。

使用这个自定义的 `FormItemRender` 组件替代原来的 `defaultRender`，可以避免出现两层 `rules` 规则提示的问题。

另外，以下是 Ant Design 官方文档中关于自定义表单项的指南，供你参考和了解更多信息：

- [表单](https://ant.design/components/form-cn/)
- [自定义表单控件和样式](https://ant.design/components/form-cn/#components-form-demo-customized-form-controls)

希望以上解决方案能帮助到你！如有其他问题，请随时提问。
