# 🧐[问题] ProTable中使用options里的setting来显示隐藏表头时的报错【急】

`AI Reply`

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🧐 问题描述

<!--
详细地描述问题，让大家都能理解
-->

你好, 这里有一个比较紧急的问题，当我使用 options 的 setting 功能的时候, 一切功能都很好
唯独当我使用 fixed功能 也就是 pin to right 或者 pin to left后 点击外部屏幕的时候会报错, 如果点击小齿轮icon就不会报错
不使用fixed功能也不会报错 代码中都是正常使用ProTable

![image](https://github.com/ant-design/pro-components/assets/54296803/844ab881-1cb2-4dfb-9e5d-8aae0708e37f)

急

### 💻 示例代码

<!--
如果你有解决方案，在这里清晰地阐述
-->

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

## chenshuai2144

> TAutomatically replying with ChatGPT can be attempted, but it cannot be guaranteed to be completely accurate and may not fully address all issues. Please feel free to reply if you have any further questions or concerns.
> 此回复基于 ChatGPT 自动生成，可以尝试下方案，官方人员会在一定时间后继续继续处理。

你好！

根据你的描述，问题可能出现在使用 ProTable 组件的 options 配置项的 setting 属性上。当你设置 pin to right 或者 pin to left 时，点击外部屏幕会导致报错。

为了解决这个问题，你可以尝试以下几个步骤：

1. 确保你正在使用 ProTable 的最新版本。如果不是最新版本，尝试升级到最新版本，因为可能存在已知的问题已经得到修复。

2. 检查你的配置项是否正确。确保你正确设置了 pin to right 或者 pin to left。你可以参考 Ant Design Pro Table 的官方文档，了解如何正确配置这些选项：https://procomponents.ant.design/components/table/#options-props

3. 尝试在点击外部屏幕时，先判断是否处于 pin 的状态，然后再执行相应的操作。你可以在点击事件处理函数中加入逻辑判断，根据组件的状态来执行相应的操作。

下面是示例代码，你可以根据自己的实际情况进行调整：

```jsx
import { ProTable } from "@ant-design/pro-table";
import { useState } from "react";

const columns = [
  // 列配置...
];

const YourComponent = () => {
  const [fixedColumns, setFixedColumns] = useState([]);

  const handleClickOutside = () => {
    if (fixedColumns.length > 0) {
      // 执行相应的操作
      setFixedColumns([]);
    }
  };

  return (
    <div onClick={handleClickOutside}>
      <ProTable
        columns={columns}
        options={{
          setting: {
            onSettingChange: (_, setting) => {
              setFixedColumns(setting.fixedColumns);
            },
          },
        }}
        // 其他配置...
      />
    </div>
  );
};
```

请注意，这只是一个示例代码，你需要根据实际情况进行调整。

希望这些信息能帮助你解决问题。如果还有其他问题，请随时提问。
