# ğŸ§[é—®é¢˜]ProFormUploadButtonèƒ½è·å–å½“å‰ProFormçš„modeæ¨¡å¼

### ğŸ§ é—®é¢˜æè¿°

åœ¨ProFormè¡¨å•ä¸­ï¼Œè‡ªå®šä¹‰åµŒå¥—å¤šå±‚å­ç»„ä»¶ï¼Œæœ«ç«¯å­ç»„ä»¶ä½¿ç”¨ProFormUploadButtonå¿…é¡»é€šè¿‡props å±‚å±‚ä¼ é€’readonlyå±æ€§æ‰èƒ½åŠ¨æ€æ§åˆ¶ä¸Šä¼ ç»„ä»¶ åªè¯»æ¨¡å¼ ä¸æ˜¾ç¤º åˆ é™¤å›¾æ ‡æŒ‰é’®ï¼Œå®å±ä¸é›…ï¼›

ProFormUploadButtonèƒ½è·å–å½“å‰ProFormçš„modeæˆ–readonlyçš„å€¼ï¼Ÿ
æ–¹æ¡ˆä¸€ï¼šä¾‹å¦‚è·å–modeçš„å€¼ä¸º edit / readï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿è®¾ç½®ProFormUploadButton -> fieldProps -> showUploadList: mode === 'edit' ï¼›
æ–¹æ¡ˆäºŒï¼šä¾‹å¦‚è·å–readonlyçš„å€¼booleanä¹Ÿè¡Œ

<!--
è¯¦ç»†åœ°æè¿°é—®é¢˜ï¼Œè®©å¤§å®¶éƒ½èƒ½ç†è§£
-->

### ğŸ’» ç¤ºä¾‹ä»£ç 

ä¹‹å‰æˆ‘ä½¿ç”¨æ–¹æ¡ˆï¼š
import { EditOrReadOnlyContext } from '@ant-design/pro-form/es/BaseForm/EditOrReadOnlyContext';

const modeContext = useContext(EditOrReadOnlyContext);
// å½“å‰è¡¨å•å¤„äºç¼–è¾‘è¿˜æ˜¯åªè¯»
const mode = modeContext.mode === 'edit'

<!--
å¦‚æœä½ æœ‰è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œæ¸…æ™°åœ°é˜è¿°
-->

å› ä¸ºç°åœ¨æ¨èimport { \*\*\* } from '@ant-design/pro-components'
æ‰€ä»¥èƒ½å¦æŠŠEditOrReadOnlyContext æš´æ¼åˆ° @ant-design/pro-componentsï¼Ÿ

### ğŸš‘ å…¶ä»–ä¿¡æ¯

<!--
å¦‚æˆªå›¾ç­‰å…¶ä»–ä¿¡æ¯å¯ä»¥è´´åœ¨è¿™é‡Œ
-->

## chenshuai2144

export çš„ï¼Œ ä½ ç›´æ¥ä»æ–‡ä»¶é‡Œé¢æ‹¿å§ã€‚

fileList çš„ readony ä¸æ˜¯å¾ˆå¥½åšï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ä¼šåš

## lovewinders

> export çš„ï¼Œ ä½ ç›´æ¥ä»æ–‡ä»¶é‡Œé¢æ‹¿å§ã€‚
>
> fileList çš„ readony ä¸æ˜¯å¾ˆå¥½åšï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ä¼šåš

@ant-design/pro-componentsä¸Šæ²¡æœ‰å¯¼å…¥çš„EditOrReadOnlyContextï¼Œæ‰€ä»¥å–ä¸åˆ°å•Š

## chenshuai2144

pro form é‡Œé¢æœ‰ï¼Œç”¨æ–‡ä»¶æ‹¿ä¸€ä¸‹

## lovewinders

> pro form é‡Œé¢æœ‰ï¼Œç”¨æ–‡ä»¶æ‹¿ä¸€ä¸‹

pnpmæ˜¯æ— æ³•è·å–åˆ°æ–‡ä»¶çš„ï¼šCannot find module '@ant-design/pro-form' or its corresponding type declarations.
<img width="1744" alt="image" src="https://github.com/ant-design/pro-components/assets/22837419/cfbbc2cb-b91a-4921-a596-2f761a753201">

## chenshuai2144

ä½ å†å®‰è£…ä¸€ä¸‹å‘¢ï¼Ÿ

## lovewinders

> ä½ å†å®‰è£…ä¸€ä¸‹å‘¢ï¼Ÿ

@chenshuai2144 åˆšçœ‹äº†pro-components@2.6.7ç‰ˆæœ¬æ”¹åŠ¨åœ°æ–¹ç¡®å®å¯ä»¥ï¼Œä½†ä¸æ˜¯æœ€ä½³æ–¹æ¡ˆã€‚å¦‚åç»­å›¾æ–‡å±äºä¸ªäººå»ºè®®æ”¹è¿›æ–¹æ¡ˆ
![image](https://github.com/ant-design/pro-components/assets/22837419/9f117d9e-e19b-42ad-ad85-ac97396eee72)

## ä¸ªäººæ¨è export { EditOrReadOnlyContext } æºç æ”¾åˆ°packages/form/src/index.tsxå†…ä½ç½®æ›´ä½³ï¼š

### æ¨èåŸå› ï¼š

> 1.EditOrReadOnlyContextå±äºBaseFormçš„ï¼Œä¾‹å¦‚ProFormã€ModalFormã€StepForméƒ½å¯ä»¥ç”¨åˆ°ï¼Œå¦‚æœä»…æŒ‚åˆ°ProFormä¸Šæ˜¯ä¸æ˜¯æœ‰ç‚¹èŒƒå›´è¿‡çª„ï¼Ÿ

> 2.packages/form/src/index.tsxæœ¬èº«å·²ç»export å‡ºProFormContextã€FormListContextã€FieldContextï¼Œè¿™ä¸ªåœ°æ–¹å†åŠ EditOrReadOnlyContextå†…èšæ›´ä½³

![image](https://github.com/ant-design/pro-components/assets/22837419/e6c3f367-871a-4267-9674-75c8df8b7c00)

## chenshuai2144

å…¨éƒ¨èµ° proform ç”¨å°±å¥½äº† åªæ˜¯æä¾›ä¸€ä¸ªå¯¼å‡ºçš„åœ°æ–¹ è¿™ä¸ªå†…éƒ¨ api æœ¬æ¥å°±ä¸æ¨èç”¨ å°±æ˜¯ç»™ä½ ä¸ªåé—¨è€Œå·²

## lovewinders

> å…¨éƒ¨èµ° proform ç”¨å°±å¥½äº† åªæ˜¯æä¾›ä¸€ä¸ªå¯¼å‡ºçš„åœ°æ–¹ è¿™ä¸ªå†…éƒ¨ api æœ¬æ¥å°±ä¸æ¨èç”¨ å°±æ˜¯ç»™ä½ ä¸ªåé—¨è€Œå·²

å¥½çš„
