# ğŸ›[BUG] StepsForm ä¸­çš„StepsForm.StepFormæ·»åŠ requestä¼šå¯¼è‡´formRef.currentä¸ºç©º

####é£å¸¸éªŒè¯çš„é—®é¢˜å‘€ï¼Œå¿«æ¥ä¸ªå¤§ä½¬æŒ‡ç‚¹ä¸€ä¸‹

### ğŸ› bug æè¿°

StepsForm.StepForm ä¸­æ·»åŠ requestè¯·æ±‚åï¼Œä¼šå¯¼è‡´formRef.currentä¸ºç©º

### ğŸ“· å¤ç°æ­¥éª¤

å¤åˆ¶å¤ç°ä»£ç ï¼Œç‚¹å‡» 1 æŒ‰é’®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

### ğŸ æœŸæœ›ç»“æœ

formRef.currentåº”è¯¥æ˜¯å½“å‰çš„è¡¨å•å€¼å‘€~

### ğŸ’» å¤ç°ä»£ç 

import type { ProFormInstance } from "@ant-design/pro-components";
import {
ProCard,
ProForm,
ProFormCheckbox,
ProFormDatePicker,
ProFormDateRangePicker,
ProFormText,
ProFormTextArea,
StepsForm
} from "@ant-design/pro-components";
import { message, Button } from "antd";
import { useRef } from "react";

const waitTime = (time: number = 100) => {
return new Promise((resolve) => {
setTimeout(() => {
resolve(true);
}, time);
});
};

export default () => {
const formRef = useRef<ProFormInstance>();

return (
<ProCard>
<StepsForm<{
name: string;
}>
stepsProps={{
          direction: "vertical"
        }}
formRef={formRef}
onFinish={async () => {
await waitTime(1000);
message.success("æäº¤æˆåŠŸ");
}}
formProps={{
          validateMessages: {
            required: "æ­¤é¡¹ä¸ºå¿…å¡«é¡¹"
          }
        }} >
<StepsForm.StepForm<{
name: string;
}>
name="base"
title="åˆ›å»ºå®éªŒ"
stepProps={{
            description: "è¿™é‡Œå¡«å…¥çš„éƒ½æ˜¯åŸºæœ¬ä¿¡æ¯"
          }}
request={async () => {
console.log(formRef.current?.getFieldsValue());
return new Promise((k,l) => {
return l({});
});
}}
onFinish={async () => {
console.log(formRef.current?.getFieldsValue());
await waitTime(2000);
return true;
}} >
<Button
onClick={() => {
console.log(formRef.current);
}} >
ç‚¹å‡»æŸ¥çœ‹
</Button>
<ProFormText
name="name"
label="å®éªŒåç§°"
width="md"
tooltip="æœ€é•¿ä¸º 24 ä½ï¼Œç”¨äºæ ‡å®šçš„å”¯ä¸€ id"
placeholder="è¯·è¾“å…¥åç§°"
rules={[{ required: true }]}
/>
<ProFormDatePicker name="date" label="æ—¥æœŸ" />
<ProFormDateRangePicker name="dateTime" label="æ—¶é—´åŒºé—´" />
<ProFormTextArea
            name="remark"
            label="å¤‡æ³¨"
            width="lg"
            placeholder="è¯·è¾“å…¥å¤‡æ³¨"
          />
</StepsForm.StepForm>
</StepsForm>
</ProCard>
);
};

### Â© ç‰ˆæœ¬ä¿¡æ¯

æ‰€æœ‰ç»„ä»¶ä¸ºæœ€æ–°ç‰ˆæœ¬

### ğŸš‘ å…¶ä»–ä¿¡æ¯

å½“ç§»é™¤requestæ—¶ï¼Œç‚¹å‡»æ˜¾ç¤ºæ­£å¸¸
![image](https://github.com/ant-design/pro-components/assets/49111598/8bad8403-1e98-4d61-9fc8-c3b6cdeeb3c6)
å½“æ·»åŠ requeståï¼Œç‚¹å‡»ä¸ºç©º
![image](https://github.com/ant-design/pro-components/assets/49111598/bad591da-338b-4384-a6f8-de4f0b10c7bd)

## zzzzyp

same problem

## zzzzyp

same problem

## AccerYou

ä¸è¦å¤ªä¾èµ–äºpro-componentsï¼Œå½“ç»„ä»¶æ— æ³•è¾¾åˆ°æ•ˆæœæ—¶ï¼Œå¯ä»¥è€ƒè™‘é€šè¿‡antdesignæ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚
