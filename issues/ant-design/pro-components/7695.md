# 🐛[BUG]@ant-design/pro-layout@7.17.1 设置 contentWidth: 'Fluid'，宽度依然限死在 1152px

提问前先看看：

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### 🐛 bug 描述

<!--
详细地描述 bug，让大家都能理解
-->

在 `app.tsx` 中设置 contentWidth: 'Fluid'不生效，关联 pro-components@2.6.20 中的更新日志：

- fix(layout): default set contentWidth=Fixed. [065524d](https://github.com/ant-design/pro-components/commit/065524d)

1. 其中 `packages/layout/src/components/GridContent/index.tsx` [28行](https://github.com/ant-design/pro-components/commit/065524d#diff-ffe184efab0d361b91e8470087aabbb690fff2704069fe9557a7ab91e296cd00R28) 给 `propsContentWidth` 设置了无值时的默认值 `Fixed`
2. 那 [35行](https://github.com/ant-design/pro-components/commit/065524d#diff-ffe184efab0d361b91e8470087aabbb690fff2704069fe9557a7ab91e296cd00R35) 写 `const contentWidth = propsContentWidth ||value.contentWidth;` 就没有任何意义
3. `contentWidth` 肯定是 `propsContentWidth` 的值，导致在 `app.tsx` 中设置 contentWidth: 'Fluid'不生效

### 📷 复现步骤

<!--
清晰描述复现步骤，让别人也能看到问题，如果可能，尽量提供可执行代码，
如：https://codesandbox.io/ 在此处创建一个 codesandbox，方便我们更快的排查和复现问题
-->

```shell
git clone https://github.com/Aliveing/antd-pro-demo.git
yarn install
npm start
```

可以看到 `app.tsx` 中 55 行设置了 `contentWidth: 'Fluid'`，但是宽度仍被限制到 1152px

### 🏞 期望结果

<!--
描述你原本期望看到的结果
-->

`contentWidth` 配置可以正常生效

### 💻 复现代码

<!--
提供可复现的代码，仓库，或线上示例
-->

[复现代码仓库](https://github.com/Aliveing/antd-pro-demo.git) 或自行使用 [ant design pro 官方脚手架](https://pro.ant.design/zh-CN/docs/getting-started/#%E5%88%9D%E5%A7%8B%E5%8C%96)

### © 版本信息

- ProComponents 版本: [e.g. 4.0.0]
- umi 版本
- 浏览器环境
- 开发环境 [e.g. mac OS]

### 🚑 其他信息

<!--
如截图等其他信息可以贴在这里
-->

预览太大了，可自行去仓库中下载，[视频地址](https://github.com/Aliveing/antd-pro-demo/blob/main/videos/%40ant-design%3Apro-layout%407.17.1%20BUG.mp4)

## keer6

+1

## ldd27

+1

## Canight

+1

## chenshuai2144

故意的，设计要求的改动

## Aliveing

@chenshuai2144 感谢回复，那这样有几个问题想咨询一下：

- 这种锁死最大宽度在 1152px 并且开发者无法自行配置开关是出于什么设计要求考虑？
- 如何去掉这种最大宽度锁定？是只能手动覆盖 `ant-pro-grid-content-wide` 样式中的 `max-width`？
- 如果锁死在 1152px，那 `contentWidth` 配置后期会如何处理？因为目前配置 `Fluid` 已经不生效了，是会移除这个配置还是说会改为 number 自行配置最大宽度？

  ## keer6

  > @chenshuai2144 感谢回复，那这样有几个问题想咨询一下：
  >
  > - 这种锁死最大宽度在 1152px 并且开发者无法自行配置开关是出于什么设计要求考虑？
  > - 如何去掉这种最大宽度锁定？是只能手动覆盖 `ant-pro-grid-content-wide` 样式中的 `max-width`？
  > - 如果锁死在 1152px，那 `contentWidth` 配置后期会如何处理？因为目前配置 `Fluid` 已经不生效了，是会移除这个配置还是说会改为 number 自行配置最大宽度？

我现在也只能是这样先改着上线了。后续有更改再说吧。。。
.ant-pro-grid-content.ant-pro-grid-content-wide {
max-width: 100% !important;
}

## Aliveing

@keer6 @ldd27 @Canight 各位， 15 个小时以前新发布的 `@ant-design/pro-layout@7.17.2` 可以通过给 `app.tsx` 中配置 `layout: 'mix'` 或者 `layout: 'side'` 的方式来解除 1152px 的宽度限制，目前来看配置 `layout: 'top'` 依然是锁定 1152px。

具体更新可查看 `@ant-design/pro-layout@7.17.2` 和 `7.17.1` 的 [版本对比](https://github.com/ant-design/pro-components/compare/%40ant-design/pro-layout%407.17.1...%40ant-design/pro-layout%407.17.2#diff-ffe184efab0d361b91e8470087aabbb690fff2704069fe9557a7ab91e296cd00R38)

@chenshuai2144 感谢更新发版。

## merabtenei

Setting contentWidth: 'Fixed' and layout: 'mix' is not working now after update, setting contentWidth: Fixed do not work unless layout is 'top' otherwise it will be Fluid even when setting it to fixed. We are using this on our project and it's now broken. Please fix this. It was better before when setting contentWidth was independent of layout.

In : [packages/layout/src/components/GridContent/index.tsx](https://github.com/ant-design/pro-components/compare/%40ant-design/pro-layout%407.17.1...%40ant-design/pro-layout%407.17.2#diff-ffe184efab0d361b91e8470087aabbb690fff2704069fe9557a7ab91e296cd00)

```typescript
const isWide = contentWidth === "Fixed"; // The reason maybe in changing this line
const isWide = contentWidth === "Fixed" && value.layout === "top"; // updated line
```

## merabtenei

Any update on this one ?
