# ğŸ§[é—®é¢˜]åœ¨ StepsForm ä¸­ä½¿ç”¨ Modalï¼Œç¼–è¾‘åœºæ™¯ç¬¬ä¸€æ¬¡è·å–çš„ formMapRef ä¸ºç©º

æé—®å‰å…ˆçœ‹çœ‹ï¼š

https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md

### ğŸ§ é—®é¢˜æè¿°

è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ç‚¹å‡»ç¼–è¾‘å›æ˜¾æ‰“å°çš„ formMapRef ï¼Œé‡Œé¢è¡¨å•ä¸ºç©ºï¼š
![image](https://github.com/ant-design/pro-components/assets/40554571/c00300fd-7988-4ec6-aead-d0162e54df99)
æˆ‘ç¬¬äºŒæ¬¡å›æ˜¾ï¼Œè¿™æ—¶å€™ formMapRef å°±èƒ½æ­£å¸¸å›æ˜¾ï¼š
![image](https://github.com/ant-design/pro-components/assets/40554571/144541f1-1c72-47a7-9bd3-6db76c10e262)

è¯·é—®æˆ‘å¦‚ä½•ç¬¬ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®å°±èƒ½æ­£å¸¸è·å–åˆ° ormMapRefï¼Œå¹¶ä¸”èƒ½æ­£å¸¸å›æ˜¾

### ğŸ’» ç¤ºä¾‹ä»£ç 

ç‚¹å‡»æŒ‰é’®å›æ˜¾ï¼š
`editCallback={() => {
	console.log('stepFormMapRef', stepFormMapRef)
	// è¡¨å•æ•°æ®å›æ˜¾å¤„ç†,å¯†ç è§£å¯†
	record.password = decryptionAesPsd(record.password)
	record.confirmPassword = record.password
	// ç¼–è¾‘åœºæ™¯ä¸‹éœ€è¦ä½¿ç”¨formMapRefå¾ªç¯è®¾ç½®formData
	stepFormMapRef?.current?.forEach((formInstanceRef) => {
	formInstanceRef?.current?.setFieldsValue(record);
	});
	setModalVisibleTrue()
}}`
StepForm é…ç½®ï¼š
`
<StepsForm
current={current}
formMapRef={stepFormMapRef}
onFinish={handlerSubmit}
onCurrentChange={(current) => setCurrent(current)}
stepsFormRender={(dom, submitter) => {
return (
<Modal
title={formTitle}
width={800}
onCancel={() => {
// é‡ç½®è¡¨å•
stepFormMapRef?.current?.forEach((formInstanceRef) => {
formInstanceRef?.current?.resetFields();
});
resetCurrent();
setModalVisibleFalse();
}}
open={modalVisible}
footer={submitter}
maskClosable={false} >
{dom}
</Modal>
);
}}

> {/_ éå†æ¸²æŸ“ Step _/}
> {

    StepComponents.map((step, index) => {
      return (
        <StepsForm.StepForm
          title={formatMessage({ id: step.title })}
          grid={index !== 2}
          key={step.title}
        >
          {step.component}
        </StepsForm.StepForm>
      )
    })

}
</StepsForm>
`

### ğŸš‘ å…¶ä»–ä¿¡æ¯

åˆæ¬¡ formMapRef å·²ç»ç»‘å®šï¼Œä¸ºä½•è·å–ä¸åˆ° Modal é‡Œé¢çš„è¡¨å•

## lili574

å¯ä»¥ä¸º`StepsForm.StepForm`æŒ‡å®š`formRef`

## chenshuai2144

å» useEffect é‡Œé¢å»æ‹¿
