# 🧐可编辑表格中的select和Proformselect有什么区别？

`form`,`📦  Need to reproduce`

你好，我想问一下EditableProTable 中设置了valueType: 'select' ，表格里面的select和普通的proformselect有什么区别呢？
这里有一个功能是：输入文本，请求接口获取options.，根据文本内容动态获取options。
我写了防抖的函数，用在Proformselect上是可以的 但是写在column里面不行。请问是为啥呢？这样写是否有问题？是可编辑表格写的有问题吗？

```js
//防抖的函数 函数没有问题 用在其他组件上正常运行
  const onDebounceMachine = useMemo(() => {
    const fetchMachine = (value: string) => {
      setMachineOption([]);
      setSearchMachine(true);
      getMachineName({ machineName: value }).then((res) => {
        if (res.datas && res.datas.length > 0) {
          const newOptions: DefaultOptionType[] = [];
          res.datas.forEach((item: MachineOptionType) => {
            newOptions.push({ label: item.machineName, value: item.machineCode });
          });
          setMachineOption([...newOptions]);
        } else {
          setMachineOption([]);
        }
      });
      setSearchMachine(false);
    };
    return debounce(fetchMachine, 800);
  }, []);

//column里面这样写的
{
      title: '机种',
      dataIndex: 'machineName',
      key: 'machineName',
      width: '20%',
      align: 'center',
      valueType: 'select',
      hideInTable: initialData?.code == 30,
      formItemProps: {
        rules: [{ required: true, message: '请输入机种名称' }],
      },
      fieldProps: () => {
        return {
          options: machineOption,
          showSearch: true,
          placeholder: '',
          allowClear: false,
          loading: searchMachine,
          onSearch: (value) => {
            if (value.length > 3) {
              onDebounceMachine(value);
            }
          },
        };
      },
    },
//单独用在select上面就没问题 用在可编辑表格里面的select上就有问题。
<ProFormSelect
              options={machineOption}
              showSearch
              fieldProps={{
                onSearch: (value) => {
                  if (value.length > 3) {
                    onDebounceMachine(value);
                  }
                },
                loading: searchMachine,
              }}
```

## akira0912

> Hello @akira0912. Please provide a online reproduction by forking this link https://codesandbox.io/ or a minimal GitHub repository.
>
> 你好 @akira0912, 我们需要你提供一个在线的重现实例以便于我们帮你排查问题。你可以通过点击 [此处](https://codesandbox.io/) 创建一个 codesandbox 或者提供一个最小化的 GitHub 仓库。 如何写个好问题？https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md ![](https://camo.githubusercontent.com/3f51b5a32e6e5d5adabdebc5ef968150bdabc8d17a8dc1a535b8fb255d2165d0/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f616e7466696e63646e2f79396b776737445643642f726570726f647563652e676966) [ ![68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f616e7466696e63646e2f79396b776737445643642f726570726f647563652e676966](https://camo.githubusercontent.com/3f51b5a32e6e5d5adabdebc5ef968150bdabc8d17a8dc1a535b8fb255d2165d0/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f616e7466696e63646e2f79396b776737445643642f726570726f647563652e676966) ](https://camo.githubusercontent.com/3f51b5a32e6e5d5adabdebc5ef968150bdabc8d17a8dc1a535b8fb255d2165d0/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f616e7466696e63646e2f79396b776737445643642f726570726f647563652e676966) [ ](https://camo.githubusercontent.com/3f51b5a32e6e5d5adabdebc5ef968150bdabc8d17a8dc1a535b8fb255d2165d0/68747470733a2f2f67772e616c697061796f626a656374732e636f6d2f7a6f732f616e7466696e63646e2f79396b776737445643642f726570726f647563652e676966)

抱歉之前没给例子 建了一个简单的例子。其实就是在EditableProTable里使用select，在fieldProps里制定了options,在onSearch的时候修改options但是没有反应。想问问应该如何解决
https://codesandbox.io/s/yu-formitem-pei-he-forked-nqk9j7?file=/App.tsx

## akira0912

![image](https://github.com/ant-design/pro-components/assets/68734384/a79f9622-a41b-4fa3-8df0-03c7132469e0)
