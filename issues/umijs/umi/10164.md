# umi4 buildäº§ç‰©ä¸èƒ½é™æ€è®¿é—®ï¼Œç™½å±

import { defineConfig } from '@umijs/max';
import routes from './routes';

export default defineConfig({
npmClient: 'yarn',
antd: {},
model: {},
routes,
mfsu: { shared: { react: { singleton: true } } },
locale: { default: 'zh-CN', antd: true },
hash: true,
title: 'é™æ€æµ‹è¯•',

runtimePublicPath: {},
publicPath: './',
exportStatic: {},
});

runtimePublicPath: {},
publicPath: './',
exportStatic: {},
è¿™ä¸‰ä¸ªå‚æ•°æ— è®ºæ€Žä¹ˆè°ƒæ•´ä¹Ÿåšä¸åˆ°ï¼ŒbuildåŒ…ç‚¹å‡»htmlæ–‡ä»¶æ‰“å¼€çœ‹åˆ°é¡µé¢æ•ˆæžœã€‚ä¸€ç›´ç™½å±

https://github.com/QDyanbing/umifix

## fz6m

1. ä½ ç»™çš„æœ€å°å¤çŽ° `umi dev` è·‘ä¸èµ·æ¥ï¼Œè¯·ç»™ä¸€ä¸ª `umi dev` çœŸæ­£å¯ä»¥è·‘èµ·æ¥çš„ï¼Œä¸”å«æœ‰ä½ æ‰€æè¿°é—®é¢˜çš„æœ€å°å¤çŽ°ã€‚

2. æˆ‘åˆ æŽ‰äº†ä¸€äº›æ–‡ä»¶ï¼Œæž„å»ºäº†ä¹‹åŽæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ã€‚

## QDyanbing

https://github.com/QDyanbing/umifix å·²ç»è°ƒæ•´äº†

## fz6m

æ ¹æ®æœ€æ–°çš„ä»“åº“ï¼Œæˆ‘è¯•äº†ä¸‹ï¼š

```bash
  pnpm i
  pnpm build
  pnpm i -g serve
  serve ./dist
```

æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®äº§ç‰©ï¼Œå¦‚æžœä½ æ˜¯ç›´æŽ¥ç‚¹å‡» html æŸ¥çœ‹ï¼Œspa åº”ç”¨æ˜¯åšä¸åˆ°çš„ï¼Œå¿…é¡»ä¾é æœåŠ¡æä¾›ï¼Œä»–å¯èƒ½æ˜¯æœ¬åœ°çš„ä»»æ„ä¸€ç§æœåŠ¡æä¾›å·¥å…·ï¼Œä¹Ÿå¯èƒ½æ˜¯æœåŠ¡å™¨ä¸Šçš„ nginx ç­‰ã€‚

## QDyanbing

æˆ‘çš„æœ¬æ„å°±æ˜¯å¸Œæœ›ä¸å¯æœåŠ¡æ¥è¾¾åˆ°è®¿é—®htmlé¡µé¢çš„ï¼Œumi3ç‰ˆæœ¬æ˜¯å¯ä»¥çš„ï¼›åŠ äº†exportStaticé…ç½®æ˜¯èƒ½ç›´æŽ¥æ‰“å¼€htmlé¡µé¢çš„

## fz6m

å¦‚æžœç›´æŽ¥ç‚¹å¼€çš„è¯ï¼Œå½“å‰è·¯å¾„æ˜¯ file ï¼Œè·¯ç”±æ˜¯åŒ¹é…ä¸ä¸Šçš„ã€‚

## hql1070

> æˆ‘çš„æœ¬æ„å°±æ˜¯å¸Œæœ›ä¸å¯æœåŠ¡æ¥è¾¾åˆ°è®¿é—®htmlé¡µé¢çš„ï¼Œumi3ç‰ˆæœ¬æ˜¯å¯ä»¥çš„ï¼›åŠ äº†exportStaticé…ç½®æ˜¯èƒ½ç›´æŽ¥æ‰“å¼€htmlé¡µé¢çš„

ä½ å¥½ðŸ‘‹ ä½ çš„é—®é¢˜è§£å†³äº†å—ï¼Ÿ

## zhangxinyong12

ä»–çš„æ„æ€æ˜¯æ²¡æœ‰æœåŠ¡å™¨æ‰˜ç®¡é™æ€èµ„æºå§ã€‚ä½ å¯ä»¥ç”¨http-server

## Pszz

> ç†è®ºä¸Šæ˜¯å¯ä»¥çš„ï¼Œé…ç½®publicPathä¹‹åŽè·¯å¾„æ²¡é—®é¢˜ï¼Œèµ„æºä¹ŸåŠ è½½æˆåŠŸã€‚ä½†æ˜¯ç™½å±äº†ã€‚
> çŽ°åœ¨è¦åšæ‰‹æœºå†…åµŒé™æ€é¡µé¢ï¼Œæ— æ³•å¯åŠ¨æœåŠ¡ï¼Œå¸Œæœ›æ”¯æŒè¿™ä¸ªã€‚
> .umirc

`
{
  publicPath:"./"
}`

## Pszz

è§£å†³æ–¹æ¡ˆï¼š

```
history:{
  type: "hash"
}
```

https://github.com/umijs/umi/issues/7700
