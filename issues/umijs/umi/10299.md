# Umi4 用chainwebpack配置raw-loader后不生效，umi3正常

## 问题描述

在Umi4项目中，使用chainwebpack配置raw-loader后，import bpmn文件只能得到文件名，而不能得到文件内容。

## 重现步骤

1. 创建umi4项目：npx create-umi
2. 安装raw-loader：npm i raw-loader --save-dev
3. 配置chainwebpack：
   ```javascript
   chainWebpack(config) {
     console.log("Chaining Webpack");
     config.module.rule('bpmn').test(/\.bpmn$/).use('raw').loader('raw-loader');
   }
   ```
4. 代码里import process1.bpmn，然后打印：
   ```javascript
   import bpmn from "@/process1.bpmn";
   console.log("bpmn:", bpmn);
   ```

## 期望结果

import process1.bpmn后，能打印出文件内容。

## 实际结果

import process1.bpmn后，打印出文件名：/static/process1.91ae5921.bpmn

## 环境信息

- Umi Version: 4.0.44
- Node Version: v19.4.0
- Platform: MacOSX

## 解决方案

在Umi4项目中，使用webpack 5的新配置方法，将raw-loader替换为asset模块，配置如下：

```typescript
// .umirc.ts

export default {
  chainWebpack(config) {
    const REG = /\.bpmn$/;

    config.module.rule("asset").exclude.add(REG).end();

    config.module.rule("bpmn").test(REG).type("asset/source").end();
  },
};
```
