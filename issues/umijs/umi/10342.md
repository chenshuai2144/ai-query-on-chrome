# [Bug] UMI3 升级到UMI4打包报错

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

UMI3 升级到UMI4打包报错:
umi.js:9616:306366: ERROR: Transforming async generator functions to the configured target environment ("chrome80", "es2015") is not supported yet
umi.js:379454:1: ERROR: Transforming async generator functions to the configured target environment ("chrome80", "es2015") is not supported yet

<!-- A clear and concise description of what the bug is. -->

本地开发环境是正常的，但是打包时报如下错误：
![image](https://user-images.githubusercontent.com/8411877/215305062-a081c544-27ca-4c0a-879d-cefd7ef6c4ba.png)

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

**Steps to reproduce the behavior:** 1. 2.

**Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version** UMI MAX:
- **Node Version** NODE 16:
- **Platform** WINDOWS:

## fz6m

Umi 4 默认用 esbuild 压缩，不兼容非现代浏览器，你指定的 targets 太旧了，解法见：[非现代浏览器兼容](https://umijs.org/blog/legacy-browser) 。

## HuangRan

> Umi 4 默认用 esbuild 压缩，不兼容非现代浏览器，你指定的 targets 太旧了，解法见：[非现代浏览器兼容](https://umijs.org/blog/legacy-browser) 。

非常感谢，这边最后发现是在压缩JS文件的时候出的这个错误，重新指定了JS压缩工具为terser就可以了。
