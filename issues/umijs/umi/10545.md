# [Bug] umi应用使用npm link的方式调试npm包，热更新失效

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

<!-- A clear and concise description of what the bug is. -->
<!-- 清晰的描述下遇到的问题。-->

使用npm link的方式在umi应用中调试dumi组件。 dumi组件通过father dev开启 build:watch， umi应用中的node_module实时更新，但是umi应用热更新失效。

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

请参考 [最小重现Demo](https://github.com/amibug/umi-npmlink)

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

1.  组件开发

```bash
$ cd mockjs
$ npm install
$ npm run build:watch
$ npm link
```

2.  组件在umi应用中调试

```bash
$ cd umiApp
$ npm install
$ npm link mockjs
$ npm run start
```

## Context

- **Umi Version**: 4.0.52
- **Node Version**: 16.6.0
- **Platform**: macOs

## amibug

冒昧问下：有人在跟进处理吗？

## fz6m

尝试下 pnpm + package.json link 的方式：

```ts
// package.json

  "dep-name": "link:/absolute/path/to/pkg/root"
```

## amibug

> 尝试下 pnpm + package.json link 的方式：
>
> ```ts
> // package.json
>
>   "dep-name": "link:/absolute/path/to/pkg/root"
> ```

测试无效

## fz6m

配置排除下要调试的包名：

```ts
// .umirc.ts

export default {
  mfsu: {
    exclude: ["package-name"],
  },
};
```
