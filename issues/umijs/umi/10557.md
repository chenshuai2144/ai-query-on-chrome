# [Bug] 　微前端下路由和全局布局的菜单样式不匹配

  <!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

微前端路由和全局布局菜单组件匹配问题

路由配置如下：

```js
export default [
  {
    path: "/user/login",
    layout: false,
    name: "login",
  },
  {
    path: "/audit",
    name: "审核管理",
    icon: "audit",
    routes: [
      {
        path: "/audit",
        redirect: "/audit/homepage",
      },
      {
        name: "我的首页",
        path: "/audit/homepage",
        icon: "home",
        component: "./Home",
      },
      {
        name: "审核任务",
        path: "/audit/reviewtasks",
        component: "./Home",
      },
      { component: "./404" },
    ],
  },
  // 微前端断点管理
  {
    path: "/system/*",
    name: "系统管理",
    icon: "menu",
    microApp: "system",
  },

  {
    path: "/",
    redirect: "/audit",
  },
  { path: "/*", component: "./404" },
];
```

<!-- A clear and concise description of what the bug is. -->
<!-- 清晰的描述下遇到的问题。-->

![image](https://user-images.githubusercontent.com/39217534/220265213-e4483baf-58d9-4ea0-adfe-0809c106f571.png)

以上`系统管理`菜单项没有高亮

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

https://github.com/Chill7773/umi-bug

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

- clone `https://github.com/Chill7773/umi-bug`

- 执行`pnpm i`

- 启动子应用 `npm run dev:child`

- 启动主应用 `npm run dev:main`

- 进入`http://localhost:8000/#/system/account`

- 发现bug
  **Steps to reproduce the behavior:** 1. 2.

**Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**: ^4.0.52
- **Node Version**: 16
- **Platform**: macOS

  ## Chill7773

  好像是 因为 `path: '/system/*',` 导致的。更换为`path: '/system'`可以解决。但是这样微应用配置无法生效。

使用组件和子路由的方式又有一堆bug。。。

## fz6m

```ts
{
  path: '/system',
  name: '系统管理',
  icon: 'menu',
  routes: [
    {
      path: '/system/',
      microApp: 'system',
    },
    {
      path: '/system/*',
      microApp: 'system',
    },
  ],
},
```

## YuZongYangHi

> ```ts
>   {
>     path: '/system',
>     name: '系统管理',
>     icon: 'menu',
>     routes: [
>       {
>         path: '/system/',
>         microApp: 'system',
>       },
>       {
>         path: '/system/*',
>         microApp: 'system',
>       },
>     ],
>   },
> ```

解决了么？

## Chill7773

> > ```
> >   {
> >     path: '/system',
> >     name: '系统管理',
> >     icon: 'menu',
> >     routes: [
> >       {
> >         path: '/system/',
> >         microApp: 'system',
> >       },
> >       {
> >         path: '/system/*',
> >         microApp: 'system',
> >       },
> >     ],
> >   },
> > ```
>
> 解决了么？
> 解决是解决了 但是会进入子应用两次，明显看见子应用在闪烁
