# [Task] ä¼˜åŒ– max æ€§èƒ½

### é—®é¢˜

ç»åé¦ˆï¼Œ`max g` è¿è¡Œéœ€è¦ 8s ï¼ˆ#10642ï¼‰

#### ç¯å¢ƒ

antd-pro + max ï¼ˆåŒ…å« `umi-presets-pro`ï¼‰

#### åŸå› 

å’Œé…ç½®æ–‡ä»¶å…³ç³»ä¸å¤§ï¼Œä¸»è¦åœ¨äºæ¨¡å—é¢„è¯»å–çš„ç“¶é¢ˆã€‚

### ä»»åŠ¡

#### Umi

- [x] umi ä»“åº“æ€§èƒ½æ¨¡å—å¯¼å…¥ä¼˜åŒ– #10646

ä¼˜åŒ–å‰ï¼š

![screenshot_2023-03-01_14-41-33](https://user-images.githubusercontent.com/59400654/222063868-aa0ac967-3e74-469d-8488-df29d6008bbb.png)

ä¼˜åŒ–åï¼š

![screenshot_2023-03-01_14-27-34](https://user-images.githubusercontent.com/59400654/222063914-361b8ba0-ed63-48b2-9bd4-b32b0b47deaa.png)

#### openapi

éœ€è¦ lazy import prettier çš„å¯¼å…¥ï¼Œä»£ç è§ [`src/util.ts`](https://github.com/chenshuai2144/openapi2typescript/blob/5b51c674f5fc01d69db7cb39f4cd8f362c2a7395/src/util.ts#L7) ï¼š

```diff
- import * as prettier from 'prettier';
+ require('prettier') // åœ¨ä½¿ç”¨æ—¶å†å¯¼å…¥
```

- [x] [openapi](https://github.com/chenshuai2144/openapi2typescript) ä¼˜åŒ– ã€‚cc @chenshuai2144 ï¼ˆ PR è§ https://github.com/chenshuai2144/openapi2typescript/pull/98 ï¼‰
- [x] openapi å‘ç‰ˆåï¼Œ`max-plugin-openapi` ä¸ `umi-presets-pro` æå‡ç‰ˆæœ¬å‘ç‰ˆï¼Œå¦åˆ™å¯¹äºå‡çº§ç”¨æˆ·ä»–ä»¬çš„åº•å±‚ `@umijs/openapi` ç‰ˆæœ¬ä¸ä¼šå˜åŒ–ï¼Œcc @chenshuai2144

#### umi-presets-pro

- [x] umi æ–°ç‰ˆæœ¬å‘å¸ƒå > alita å‡çº§ umi ä¾èµ–ç‰ˆæœ¬ > alita å‘ç‰ˆå > umi-presets-pro å‡çº§ alita ä¾èµ–å‘æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™å‡çº§ç”¨æˆ·ä»–ä»¬çš„åº•å±‚ alita ç‰ˆæœ¬ä¸ä¼šå˜åŒ–ã€‚cc @chenshuai2144 ã€@xiaohuoni ï¼ŒPR è§ https://github.com/umijs/umi-presets-pro/pull/12

#### alita

- [x] å¾… umi å‘ç‰ˆåï¼Œ[alita](https://github.com/alitajs/alita) ä¾èµ–çš„ umi ç‰ˆæœ¬å‡çº§å³å¯ï¼Œ~~å»ºè®®ä¸è¦é”~~ï¼Œcc @xiaohuoni ï¼ˆ PR è§ https://github.com/alitajs/alita/pull/520 ï¼‰

### æ¥æº

Discussed in https://github.com/umijs/umi/discussions/10642

<div type='discussions-op-text'>

<sup>Originally posted by **doornot** March 1, 2023</sup>

## xiaohuoni

> umi æ–°ç‰ˆæœ¬å‘å¸ƒå > alita å‡çº§ umi ä¾èµ–ç‰ˆæœ¬ > alita å‘ç‰ˆå > umi-presets-pro å‡çº§ alita ä¾èµ–å‘æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™å‡çº§ç”¨æˆ·ä»–ä»¬çš„åº•å±‚ alita ç‰ˆæœ¬ä¸ä¼šå˜åŒ–ã€‚

ç”¨æˆ·ç›´æ¥é‡æ–°å®‰è£…ï¼Œåº”è¯¥å°±ä¼šè£…åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå› ä¸º umi-presets-pro é‡Œé¢æ²¡é”ç‰ˆæœ¬

> [alita](https://github.com/alitajs/alita) ä¾èµ–çš„ umi ç‰ˆæœ¬å‡çº§å³å¯ï¼Œå»ºè®®ä¸è¦é”

umi å‘ç‰ˆæœ¬ä¹‹åï¼Œéœ€è¦ç¡®è®¤å†…éƒ¨çš„ç»„ä»¶æ˜¯å¦æœ‰å½±å“ï¼Œç¡®è®¤æ²¡å½±å“ä¹‹åï¼Œæ‰ä¼šç»Ÿä¸€å‡ umiã€‚æ‰€ä»¥ä¾æ—§æ˜¯é”çš„

## fz6m

> ç”¨æˆ·ç›´æ¥é‡æ–°å®‰è£…ï¼Œåº”è¯¥å°±ä¼šè£…åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå› ä¸º umi-presets-pro é‡Œé¢æ²¡é”ç‰ˆæœ¬

ç”±äºé—´æ¥ä¾èµ–çš„å¤§ç‰ˆæœ¬å·ä»ç„¶ç¬¦åˆåŸæ¥çš„è®¾å®šï¼Œæ‰€ä»¥ pnpm è¿™ç§åŒ…ç®¡ç†å™¨æ˜¯ä¸ä¼šæå‡ä»ç¬¦åˆ semver èŒƒå›´çš„é—´æ¥ä¾èµ–ç‰ˆæœ¬çš„ï¼Œæ•…å‡çº§åº•å±‚ä¾èµ–ä¸€å®šè¦ä¸¥æ ¼æå‡é¡¶å±‚ä¾èµ–å†…çš„ç‰ˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯ changesets è¦è§£çš„é—®é¢˜ï¼ˆä¼šä¸¥æ ¼æå‡ä¸Šæ¸¸ä¾èµ–å†…çš„ç‰ˆæœ¬å·ï¼Œä¿è¯ç”¨æˆ·å‡çº§æ—¶åº•å±‚ä¾èµ–ä¹Ÿä¼šå‡çº§ï¼‰ï¼ŒåŒæ—¶åœ¨ umi é‡Œç°åœ¨ç”¨äº† `workspace:*` + `pnpm publish` ä¹Ÿå¯ä»¥å½»åº•è§£è¿™ä¸ªé—®é¢˜äº†ã€‚

æ‰€ä»¥è¿™æ¬¡çš„æ€§èƒ½æå‡ï¼Œè¿˜æ˜¯è·Ÿè¿›å®Œæ•´ä¸ªé“¾è·¯çš„ç‰ˆæœ¬æå‡ï¼Œè¿™æ ·å¥½ã€‚

> umi å‘ç‰ˆæœ¬ä¹‹åï¼Œéœ€è¦ç¡®è®¤å†…éƒ¨çš„ç»„ä»¶æ˜¯å¦æœ‰å½±å“ï¼Œç¡®è®¤æ²¡å½±å“ä¹‹åï¼Œæ‰ä¼šç»Ÿä¸€å‡ umiã€‚æ‰€ä»¥ä¾æ—§æ˜¯é”çš„

åˆç†ï¼Œæ²¡æœ‰æ„è§ã€‚

## xiaohuoni

ç­‰å¾…æœ€åä¸€æ­¥ umi-presets-pro å‘ç‰ˆ

## xiaohuoni

https://www.npmjs.com/package/umi-presets-pro/v/2.0.3 å·²å‘ç‰ˆ

## fz6m

è¾›è‹¦å„ä½äº† ğŸŒ¹
