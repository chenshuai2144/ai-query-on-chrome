# webpack配置无效

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

这里是我的webpack的插件配置

```
    api.chainWebpack((memo, { webpack, env }) => {
        memo.resolve.alias.set("fs", 'browserfs/dist/shims/fs.js')
        memo.resolve.alias.set("buffer", 'browserfs/dist/shims/buffer.js')
        memo.resolve.alias.set("path", 'browserfs/dist/shims/path.js')
        memo.resolve.alias.set("processGlobal", 'browserfs/dist/shims/process.js')
        memo.resolve.alias.set("bufferGlobal", 'browserfs/dist/shims/bufferGlobal.js')
        memo.resolve.alias.set("bfsGlobal", require.resolve('browserfs'))
        const provideplugin=webpack.ProvidePlugin
        memo.plugin("browserfs-provide-plugin").use(provideplugin,[{
            BrowserFS: 'bfsGlobal',
            process: 'processGlobal',
            Buffer: 'bufferGlobal',
        }])

    })
```

<!-- A clear and concise description of what the bug is. -->

我需要在程序中使用browserfs这个库，所以需要更改webpack中的一些配置，我按照上面的配置，但是在程序中实际是不生效的，比如上面的 fs对象在使用的时候还是报错 fs是没有定义的，BrowserFS 也提示找不到，这个报错和框架有关系吗？

<!-- 清晰的描述下遇到的问题。-->

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://github.com/web3creator/problem)，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

**Steps to reproduce the behavior:** 1. 2.

**Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**:4.0.53
- **Node Version**: v16.16.0
- **Platform**: macos m1

## fz6m

```ts
config.plugins.delete("node-polyfill-provider");
config.resolve.fallback.clear();
config.resolve.fallback.merge({
  fs: "browserfs/dist/shims/fs.js",
  buffer: "browserfs/dist/shims/buffer.js",
  path: "browserfs/dist/shims/path.js",
  processGlobal: "browserfs/dist/shims/process.js",
  bufferGlobal: "browserfs/dist/shims/bufferGlobal.js",
  bfsGlobal: require.resolve("browserfs"),
});
config.module.noParse(/browserfs\.js$/);
config.plugin("browserfs-plugin").use(webpack.ProvidePlugin, [
  {
    BrowserFS: "bfsGlobal",
    process: "processGlobal",
    Buffer: "bufferGlobal",
  },
]);
```

注意这个东西会让你的浏览器变成了一个类似 Node 的环境， `process` 和 `process.env` 不是一个东西。
