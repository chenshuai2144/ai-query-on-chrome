# 在app.ts中使用getDvaApp的问题

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

render函数中使用getDvaApp

<!-- A clear and concise description of what the bug is. -->
<!-- 清晰的描述下遇到的问题。-->

目前需求是，在render中使用接口请求，存储在dva中，接口请求成功后，调用getDvaApp有时为null，有时找得到，目前稳定浮现的场景是接口响应快时，可以获取到getDvaApp，接口响应慢（通过控制台调节网络速度），打印getDvaApp为null

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

export function render(oldRender: any) {
const app1 = getDvaApp();
console.log(app1); // null
getServerMenus().then((res) => {
if (res.code === RequestCode.Success) {
const app = getDvaApp();
console.log('app', app); // null
setTimeout(() => {
app?.\_store.dispatch({
type: 'global/saveState',
payload: {
menuData: res.data,
},
});
}, 10);
}
});
oldRender();
}
**Steps to reproduce the behavior:** 1. 2.

**Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**:
- **Node Version**:
- **Platform**:

## fz6m

dva 不维护不建议用了，换 [valtio](https://umijs.org/docs/max/valtio) 或者 [jotai](https://github.com/pmndrs/jotai) 吧。

## ghost

感谢
