# useModel 使用 useIntl报错

useModel 使用 useIntl报错

复现仓库如下：
https://github.com/QDyanbing/useIntl

<img width="1205" alt="image" src="https://user-images.githubusercontent.com/66234749/223610338-eac80932-ee91-4bd8-84ed-ce98c02a5846.png">

## QDyanbing

@sorrycc

## fz6m

useModel 的东西为了有响应式是单独在全局另一个节点维护的，所以他不在 i18n 的 context 下面，取不到 i18n 的数据，这种情况建议用全局数据 [valtio](https://umijs.org/docs/max/valtio) 管理。

## a1352723557

希望是最小化的改动，如果使用valtio的话 我该怎么最小化改造我的项目，把所有useModel里需要国际化的文案改造成支持的样子？ @fz6m

## QDyanbing

项目比较大了不太好切换数据流；影响比较大

## fz6m

i18n 的文案应该直接在组件里用 i18n 的 hooks 获取，不应该放到 useModel 里，useModel 是一个数据流，不应该存文本，如果有少量国际化文本可以自己考虑放到全局数据流里，再从全局数据里取。

另外，你可以返回一个闭包 hooks ，在这个闭包函数里用 i18n 的 hooks 获取国际化文案，再从实际组件里调用这个 hooks 就可以取到文案了。
