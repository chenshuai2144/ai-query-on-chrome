# MFSU开启mpa使用react报错

## 问题描述

使用umi4的mpa模式，在本地调试时，import react出错，页面提示TypeError: Cannot read properties of null (reading 'useEffect')。

## 重现步骤

1. yarn start后通过http://localhost:8000/docs.html访问
2. 页面报错TypeError: Cannot read properties of null (reading 'useEffect')。

## 期望行为

1. 可正常渲染页面。

## 环境信息

- Umi Version: 4.0.55
- Node Version: 14.20.0
- Platform: windows10

## stormslowly

@o-oasis 这下面的方法绕过下，在dev环境关闭mpa e.g. map: process.env.NODE_ENV==='dev': false? {}。mpa是另外一个套webpack我需要看下怎么结合。

## stormslowly

@o-oasis 更加mfsu的方式是这样配置下：

```
  mfsu: {
    include: ['react-dom/client']
  }
}
```

原理很简单，现在app的项目入口无法触达到src/.umi/mpa/docs.tsx所以里面的依赖（react-dom）没有被mfsu分析到之后我会提个PR尝试修复下。

## sy0209360

新建的项目.umirc.ts配置mpa后，docs.html就404了
