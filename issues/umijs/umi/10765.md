# [Bug] MFSU å¼€å¯ mpa ä½¿ç”¨ react æŠ¥é”™

`type(mfsu)`,`later`

## What happens?

ä½¿ç”¨umi4çš„mpaæ¨¡å¼ï¼Œåœ¨æœ¬åœ°è°ƒè¯•æ—¶ï¼Œimport reactå‡ºé”™ï¼Œé¡µé¢æç¤º
`TypeError: Cannot read properties of null (reading 'useEffect')`

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. è¯·æä¾› [æœ€å°é‡ç°](https://stackoverflow.com/help/minimal-reproducible-example)ï¼Œå¹¶ä¸Šä¼ åˆ°ä½ çš„ GitHub ä»“åº“

https://github.com/o-oasis/umi-mpa-test

## How To Reproduce

**Steps to reproduce the behavior:**

1. yarn start åé€šè¿‡ http://localhost:8000/docs.html è®¿é—®
2. é¡µé¢æŠ¥é”™ `TypeError: Cannot read properties of null (reading 'useEffect')`

**Expected behavior**

1. å¯æ­£å¸¸æ¸²æŸ“é¡µé¢

## Context

- **Umi Version**: 4.0.55
- **Node Version**: 14.20.0
- **Platform**: windows10

  ## fz6m

  @stormslowly æœ‰æ—¶é—´å¯ä»¥çœ‹ä¸‹è¿™ä¸ªé—®é¢˜ ğŸŒ¹

  ## stormslowly

  @o-oasis è¿™ä¸‹é¢çš„æ–¹æ³•ç»•è¿‡ä¸‹

åœ¨ dev ç¯å¢ƒå…³é—­ `mpa` e.g. `map: process.env.NODE_ENV==='dev': false? {}`

mpa æ˜¯å¦å¤–ä¸€ä¸ªå¥— webpack æˆ‘éœ€è¦çœ‹ä¸‹æ€ä¹ˆç»“åˆã€‚

## stormslowly

@o-oasis
æ›´åŠ  mfsu çš„æ–¹å¼æ˜¯è¿™æ ·é…ç½®ä¸‹

```
  mfsu: {
    include: ['react-dom/client']
  }
}
```

åŸç†å¾ˆç®€å•ï¼Œç°åœ¨ app çš„é¡¹ç›®å…¥å£æ— æ³•è§¦è¾¾åˆ° `src/.umi/mpa/docs.tsx` æ‰€ä»¥é‡Œé¢çš„ä¾èµ– (react-dom) æ²¡æœ‰è¢« mfsu åˆ†æåˆ°
ä¹‹åæˆ‘ä¼šæä¸ª PR å°è¯•ä¿®å¤ä¸‹ã€‚

## sy0209360

æ–°å»ºçš„é¡¹ç›® .umirc.ts é…ç½® mpaåï¼Œdocs.htmlå°±404äº†
