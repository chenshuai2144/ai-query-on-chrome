# Qiankun插件使用MicroAppWithMemoHistory组件嵌套子应用时，子应用的路由title会修改主应用的title

`Need Reproduce`

如题，我的理解MicroAppWithMemoHistory嵌套的子应用和普通组件一样，不应该主动修改主应用全局的设置。

复现步骤：
1、修改APP3 的路由添加title： https://github.com/umijs/plugins/blob/master/packages/plugin-qiankun/examples/app3/.umirc.js#L15
![image](https://user-images.githubusercontent.com/26061069/226297109-0c442e69-374c-4a32-af93-e30c4b23f85c.png)
2、在Master中添加MicroAppWithMemoHistory引用： https://github.com/umijs/plugins/blob/master/packages/plugin-qiankun/examples/master/pages/index.js
![image](https://user-images.githubusercontent.com/26061069/226297686-71f3ba9d-f230-4730-842f-b033ab76cfad.png)
3、打开运行示例程序，访问http://localhost:8000/ ， 浏览器初始无title，当加载完第二步的APP3子应用时浏览器标题改成了APP3
![image](https://user-images.githubusercontent.com/26061069/226303747-52f7099a-24a0-4d07-8591-0d1581b87c64.png)

期望指导一种 使用MicroAppWithMemoHistory组件嵌套子应用时，不更改title的方法，谢谢

## fz6m

给一个会更改的最小复现看看。

## HiSunPan

如上面问题中的复现步骤，在官方示例的基础上，稍微修改两处代码即可复现。

复现思路：给子应用的任意路由A加上一个title属性， 然后在主应用页面B上使用MicroAppWithMemoHistory加载子应用路由A。 打开浏览器访问页面B，浏览器标签显示的是子应用路由A的title

## fz6m

这是符合预期的，因为 pro layout 这个组件在你指定了 title 后，会在切到那个页面的时候自动修改当前页面的 title ，表示你正查看到了当前页面。

## HiSunPan

如果像导航应那样，页面的主体内容就是子应用的页面，确实更改title是符合预期的（路由和title同时修改）。如果子应用只想作为整个页面的一部分或者某页面需要加载多个子应用时，使用某一子应用的title，略显不太合适。

## fz6m

因为 antpro 的那个组件有这种特性，不用 layout 这个功能，或者做一个纯的子应用，不指定 title 字段就可以了。

## HiSunPan

您好，有示例吗？ 我尝试使用不带layout的纯子应用验证，没有成功。以下是我的步骤：

我使用`yarn create @umijs/umi-app` `yarn add @umijs/plugin-qiankun -D`分别创建了 qiankun01和qiankun02的两个应用。
（我理解使用上述方法没有使用layout功能，如有请指正，谢谢）

第一步：使qiankun01作为主应用，并引用qiankun02为子应用：
![image](https://user-images.githubusercontent.com/26061069/228130376-f4ca80eb-cb83-46ef-ad46-8618e62a0125.png)
![image](https://user-images.githubusercontent.com/26061069/228130189-ebca7989-74d6-4d26-b006-ce28543f0ef6.png)

第二步：配置qiankun02的首页路由title为false(删除title属性我也试了)，并配置qiankun为slave（修改package.json，添加 "name": "qiankun02"属性）
![image](https://user-images.githubusercontent.com/26061069/228130507-5133a439-7395-4714-9806-d3e2e6f23263.png)
![image](https://user-images.githubusercontent.com/26061069/228130555-dc2c1144-0998-4c7b-bf45-50ff6adb1771.png)

第三步：打开主应用qiankun01，期望浏览器显示的是"QK01"，实际是的先显示"QK01"，然后等qiankun02加载完毕后显示的为url地址http://localhost:8010
![image](https://user-images.githubusercontent.com/26061069/228130628-3c09c0ab-52f7-4e7d-9a59-50d1b19137b0.png)

说明： qiankun01的端口为8010，qiankun02的端口为8011

## fz6m

umi4 不会有这个问题，升级 umi4 吧。
