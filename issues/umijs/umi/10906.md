# 模块联邦，本地开发没问题，部署到线上就提示加eager

## What happens?

开启模块联邦，本地开发没问题，配置eager后还是报错，线上提示：umi.js:143 [import-html-entry]: error occurs while executing entry script
![image](https://user-images.githubusercontent.com/24264872/230293102-49ea6064-4693-4142-946b-f6957696006f.png)
线上是成功加载remote.js的，但还是报错
![image](https://user-images.githubusercontent.com/24264872/230293852-1388dd67-3d3e-4de6-9c60-8a6470b60aca.png)
请问是对部署文件层级有要求吗？线上是这样部署的：
![51a9602b1c954afe60b73e66973ece5](https://user-images.githubusercontent.com/24264872/230295150-ff508518-b06b-46cc-9ba9-dfd1b0e94a60.png)
![f3ab1685cadc245c25e6527292627f7](https://user-images.githubusercontent.com/24264872/230295180-9b462805-e37a-4e25-b76d-8d80f75fb63c.png)
![25aeff4ce65655b86e3fca0f21c0f91](https://user-images.githubusercontent.com/24264872/230295200-3705a733-313c-4949-afc9-5f7f56728860.png)
本地调试，只要不使用remote模块，线上就不会报错：
![image](https://user-images.githubusercontent.com/24264872/230301219-ad2e1a5f-b68e-4371-9783-40b8c36fce61.png)

## Mini Showcase Repository(REQUIRED)

https://github.com/ALL-STACK/umi-qiankun-master
https://github.com/ALL-STACK/umi-qiankun-slave1

## How To Reproduce

按照以上层级部署即可触发报错

## Context

- **Umi Version**: latest
- **Node Version**: 16.19.0
- **Platform**: window10, chrome

## fz6m

duplicate #10888

qiankun 目前不能和 mf 一起用，使用 mf 时需要关闭 `mfsu: false` ，另外 mf 属于未正式公开的功能，如有后续，在 #10888 跟进吧。

## ALL-STACK

> duplicate #10888
>
> qiankun 目前不能和 mf 一起用，使用 mf 时需要关闭 `mfsu: false` ，另外 mf 属于未正式公开的功能，如有后续，在 #10888 跟进吧。

不关闭还好，关闭后提示：[qiankun]: You need to export lifecycle functions in nebula-web-dev entry
![image](https://user-images.githubusercontent.com/24264872/230374676-02431114-ab68-4afa-a199-7d1b5b98389e.png)

## fz6m

用 mf 的时候，qiankun 是不能用的。

## ALL-STACK

> 用 mf 的时候，qiankun 是不能用的。

坐等兼容

## fz6m

看一下 [mf-host](https://github.com/umijs/umi/tree/master/examples/mf-host) 、[mf-remote](https://github.com/umijs/umi/tree/master/examples/mf-remote) 这俩例子，我试了下主应用提供组件，子应用获取父应用的 mf 组件，可以用的（最新版本）。

需要注意的是 context 不通用，即 mf 的组件需要独立，用不了外部的 context 数据。
