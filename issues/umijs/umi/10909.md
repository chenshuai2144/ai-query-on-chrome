# [Feature Request] UmiJS4 如何开启编译时检测ts合法性

## Background

使用UmiJS4发现对于ts语法错误，在编译时，不会抛出异常。都是显示编译成功，而只有到具体页面才能发现错误

## Proposal

在官方文档中没有找到类似的配置项，希望提供配置项进行控制，可以配置编译时检测ts语法

## Additional context

示例截图如下，name1变量不存在，但是编译提示成功，具体页面才会报错
![截图1](https://user-images.githubusercontent.com/29507557/230319423-626880ea-396e-4a4d-9a55-e9696d5b5eb0.png)

## fz6m

开启 [`forkTSChecker: {}`](https://umijs.org/docs/api/config#forktschecker) 选项即可默认检测所有 TS 类型错误，并打印到控制台。

## hujinbo

> 启动[`forkTSChecker: {}`](https://umijs.org/docs/api/config#forktschecker)选项即可默认检测所有TS类型错误，并打印到控制台。

开启后可进行编译时类型检查，但是启动后，前2次刷新非常慢，即编译+检查完成后，页面仍处于空白状态，约1-2分钟才刷新成功

```
info  - Umi v4.0.52
info  - Preparing...
info  - MFSU eager strategy enabled
info  - [MFSU][eager] restored cache
[HPM] Proxy created: /api/  -> http://localhost:8080
[HPM] Proxy rewrite rule created: "^/api" ~> ""
event - [MFSU][eager] start build deps
info  - [MFSU] skip buildDeps
        ╔════════════════════════════════════════════════════╗
        ║ App listening at:                                  ║
        ║  >   Local: http://localhost:8000                  ║
ready - ║  > Network: http://192.168.140.1:8000              ║
        ║                                                    ║
        ║ Now you can open browser with the above addresses↑ ║
        ╚════════════════════════════════════════════════════╝
info  - [MFSU][eager] worker init, takes 4064ms
event - [Webpack] Compiled in 18589 ms (877 modules)
Type-checking in progress...
wait  - [Webpack] Compiling...
event - [MFSU][eager] start build deps
info  - [MFSU] skip buildDeps
event - [Webpack] Compiled in 30287 ms (487 modules)
No errors found.
wait  - [Webpack] Compiling...
event - [MFSU][eager] start build deps
info  - [MFSU] skip buildDeps
event - [Webpack] Compiled in 61406 ms (487 modules)
No errors found.
```

## fz6m

尝试这么做，貌似可以解决问题：

```bash
  pnpm add -D fork-ts-checker-webpack-plugin
```

```ts
// .umirc.ts

  chainWebpack(config) {
    config.watchOptions({
      ignored: /node_modules/,
    });
    config.plugin('fork-ts').use(require('fork-ts-checker-webpack-plugin'));
  },
```
