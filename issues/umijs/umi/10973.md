# 主子应用都使用ant-design-pro创建，主应用报错。

`type(mfsu)`

按umi4.0 官方文档操作， https://umijs.org/docs/max/micro-frontend#插件注册子应用。

主应用报错
![1681472010328](https://user-images.githubusercontent.com/17017158/232033921-ad198574-d0e7-4ee9-b0f3-5038a8991fc5.png)

    "@umijs/max": "^4.0.52",
    "@qiankun": "^2.10.5",

最小代码仓库地址：https://gitee.com/ProjectsTeam/qiankunerrror.git

## fz6m

子应用带 `publicPath` 的时候要在 entry 上附带上，不然拉不到资源：

```ts
  entry: '//127.0.0.1:8104/org/',
```

## lecd

> 子应用带 `publicPath` 的时候要在 entry 上附带上，不然拉不到资源：
>
> ```ts
>   entry: '//127.0.0.1:8104/org/',
> ```

加了
![1681629595110](https://user-images.githubusercontent.com/17017158/232280072-89f5fe8d-6edd-4a9f-9611-8a6beebeab0b.jpg)
报其他错误了
![1681629679484](https://user-images.githubusercontent.com/17017158/232280190-f8cbe44a-f79b-41ba-8532-5c363942845e.jpg)

## fz6m

我现在没法调试 mfsu ，有 BUG ，把 `mfsu: false` 关了试试，我本地没遇到你这个问题。

待 #10893 解决后，我再确认下。

## lecd

> 我现在没法调试 mfsu ，有 BUG ，把 `mfsu: false` 关了试试，我本地没遇到你这个问题。
>
> 待 #10893 解决后，我再确认下。

关闭`mfsu: false`，确实正常了

## lecd

> 我现在没法调试 mfsu ，有 BUG ，把 `mfsu: false` 关了试试，我本地没遇到你这个问题。
>
> 待 #10893 解决后，我再确认下。

上线后在主应用打开子应用出现这个报错
![1681719825600](https://user-images.githubusercontent.com/17017158/232428020-27751ebb-13c8-4396-bd35-e5d9c76d140d.jpg)

单独打开子应用没报错。
![1681719987309](https://user-images.githubusercontent.com/17017158/232428526-61414f77-c29b-4559-a7f7-4d8203f7b306.jpg)
现在我需要配置什么？

## fz6m

在 #10989 跟进。

目前可以通过给子应用开启 `esbuildMinifyIIFE: true` 解决，这个先关了。
