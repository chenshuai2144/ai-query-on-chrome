# [Bug] Umi3 升级 Umi4(umi/max) 后 getLocale报错

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## [Bug] Umi3 升级 Umi4(umi/max) 后 getLocale报错

<!-- A clear and concise description of what the bug is. -->
<!-- 清晰的描述下遇到的问题。-->

umi + @umijs/preset-react 组合开发 升级到umi4后，发现getLocale()报错 `ypeError: Cannot read properties of undefined (reading 'applyPlugins')`，无法正确获取本地设置的多语言信息

参考官网升级 https://umijs.org/docs/introduce/upgrade-to-umi-4

## Mini Showcase Repository(REQUIRED)

```
import {
  setLocale, getAllLocales, getLocale, addLocale,
} from 'umi';

getLocale()
```

## How To Reproduce

**@umijs/max:** "^4.0.0".

**Node ** "v16.15.0".

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## fz6m

umi 4 里分两种，`umi` 是没有任何插件的，`max` 是有一堆内置插件的，这个场合你应该用 `@umijs/max` ，把以前的 `umi` 依赖卸载了，安装最新的 `@umijs/max` 。

然后保证 `locale: {}` 是打开的，就有 i18n 功能了。

以前的 `@umijs/preset-xxx` 可以卸载掉，现在都内置不需要了。

导入的时候从 `@umijs/max` 导入方法使用。

可以初始化一个 max (脚手架选 antpro) 项目对比着迁移。

如还有问题，需要提供一个最小复现。
