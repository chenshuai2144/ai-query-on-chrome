# [Bug] request æäº¤formData æ•°æ®æ—¶ï¼ŒContent-Type è‡ªåŠ¨æŒ‡å®šä¸ºmultipart/form-data;

å¦‚ä¸‹ä»£ç æäº¤ç™»é™†è¡¨å•ï¼Œè·å–åå°token

```
export async function login(body: API.LoginParams, options?: { [key: string]: any }) {

  const formData = new FormData();
  formData.append('username', body.username||"");
  formData.append('password', body.password||"");
  formData.append('grant_type', body.grant_type);
  formData.append('tenantId', body.tenantId);

  return request<API.LoginResult>('/auth/oauth2/token', {
    method: 'POST',
    headers: {
      Authorization: 'Basic OTVUeFNzVFBGQTN0RjEyVEJTTW1VVkswZGE6RnBId0lmdzR3WTkyZE8=',
      'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',
    },
    //requestType: 'form',
    data: formData,
    ...(options || {}),
  });
}
```

è¯·æ±‚ä¸­æŒ‡å®šContent-Type ï¼Œå¹¶ä¸ä¼šèµ·ä½œç”¨ï¼ŒContent-Typeä¼šè‡ªåŠ¨æŒ‡å®šä¸ºmultipart/form-data ç±»å‹ã€‚ç„¶è€Œåå°æ¥å£å´åªæ”¯æŒapplication/x-www-form-urlencoded;

åŒæ—¶ï¼ŒåŠ ä¸ŠrequestType: 'form', ä¸€å¥ï¼ŒåŒæ ·Content-Type æ²¡æœ‰æ”¹å˜
@umijs/max åˆ‡æ¢åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œé—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚

ä¾èµ–ç‰ˆæœ¬å·ï¼š
"@umijs/fabric": "^2.14.1",
"@umijs/lint": "^4.0.52",
"@umijs/max": "^4.0.59",

è¯·é—®è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘å¦‚ä½•æ”¹å˜Content-Type åˆ° application/x-www-form-urlencoded
ï¼ˆå·²å¾æ±‚åå°ï¼Œåå°ä¸æ–¹ä¾¿æ”¹æˆmultipart/form-data æˆ–jsonæ ¼å¼ ï¼‰

è°¢è°¢~

é‡ç°æ­¥éª¤ï¼š

## How To Reproduce

**Steps to reproduce the behavior:** 1. 2.

npm i @ant-design/pro-cli -g
pro create myapp

ğŸ‚ Use umi@4 or umi@3 ? (use arrow keys)
â¯ umi@4
é€‰æ‹©umi 4
ä¿®æ”¹ç™»é™†é€»è¾‘
export async function login(body: API.LoginParams, options?: { [key: string]: any }) {
return request<API.LoginResult>('/api/login/account', {
method: 'POST',
headers: {
'Content-Type': 'application/json',
},
data: body,
...(options || {}),
});
}
**Expected behavior** 1. 2.
Content-Type è®¾ç½®æˆ application/x-www-form-urlencoded

## fz6m

ç›®å‰ä¸å»ºè®®ä½¿ç”¨ request / use request æ—§æ–¹æ¡ˆäº†ã€‚

æ›´å»ºè®®ä½¿ç”¨ç°ä»£çš„æ•°æ®æµæ–¹æ¡ˆï¼šä½¿ç”¨ [valtio](https://umijs.org/docs/max/valtio) / [jotai](https://github.com/pmndrs/jotai) ç®¡ç†å…¨å±€æ•°æ®ã€è‡ªå·±ç»´æŠ¤ axios / fetch è¯·æ±‚åº•å±‚ + [react-query](https://umijs.org/docs/max/react-query) åšè¯·æ±‚çŠ¶æ€ç®¡ç†ã€‚
