# 1. 使用refresh刷新initialState，在layout的运行时配置中无法获取到更新的数据

              1. initialState `undefined` 是 ant pro 那边的问题，可能需要调整下那边的逻辑，找 [ant-design-pro](https://github.com/ant-design/ant-design-pro) 反馈吧。

    目前的临时解决办法 ( react 18 only ) ：

    ```ts
    import { flushSync } from 'react-dom';

    // ...

    flushSync(() => {
      setInitialState((s) => ({
        ...s,
        currentUser: userInfo,
      }));
    })
    ```

2. 第二个 base 问题在 #9296 修复。

_Originally posted by @fz6m in https://github.com/umijs/umi/issues/9295#issuecomment-1242761699_

## liuyurongart

使用refresh进行initialState刷新的问题，是否有可能是由于在获取runtimeConfig时，没有对initialState进行观察，仅仅是初始存储啦一下
![image](https://github.com/umijs/umi/assets/125435650/1780320d-8d0f-4580-92f3-deca3e1ced5f)
