# umi4 monorepo 子包less报错

`Need Reproduce`

  <!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

<!-- A clear and concise description of what the bug is. -->

基于antd pro新建一个monorepo项目，将component移到子包中，run dev时less报错，对less任何内容都不识别
import { Footer, GlobalHeaderRight } from '@lib/components';

![{ UWI1N RJHYWXSU0C46KQI](https://github.com/umijs/umi/assets/11306229/d42d15b6-f457-4c8f-98d1-f610a6c759d0)

移除 import './index.less' 能正常

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

**Steps to reproduce the behavior:** 1. 2.

**Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**:
- **Node Version**:
- **Platform**:

  ## fz6m

  使用 [`monorepoRedirect`](https://umijs.org/docs/api/config#monoreporedirect) 选项来重定向其他的 monorepo 子包，同时支持热更新和使用主应用本身的编译功能。

  ## fatesq

  > 使用 [`monorepoRedirect`](https://umijs.org/docs/api/config#monoreporedirect) 选项来重定向其他的 monorepo 子包，同时支持热更新和使用主应用本身的编译功能。

![1N)S4FQP BAZZN472@MJ{9O](https://github.com/umijs/umi/assets/11306229/8ba792a3-fa44-4a2a-869d-af4082541682)

monorepoRedirect开启关闭都是同样报错

## fz6m

如有问题，需要给一个最小复现。

## fatesq

> 如有问题，需要给一个最小复现。

很难给与一个复现
现在的情况是在src下每次启动前删除.umi文件夹

1.  mfsu: { strategy: 'normal' }, run dev 启动时候子包里 less 会直接报上面的错
2.  mfsu: { strategy: 'normal' }, run dev 启动时注释掉less，能够正常启动，启动后解除注释，报同样错误，
3.  mfsu: { strategy: 'normal'， exclude: [/@lib/]}，run dev 启动时候子包里 less 会直接报上面的错
4.  mfsu: { strategy: 'normal'， exclude: [/@lib/]}, run dev 启动时注释掉less，能够正常启动，启动后解除注释，正常运行，也能够热更新

稍后我尽可能弄个简单环境复现一下

## fz6m

如和 mfsu 有相关，可直接关闭 `mfsu: false`

## fatesq

> 如和 mfsu 有相关，可直接关闭 `mfsu: false`

`mfsu: false` 的话 和上面3，4是一样的结果
