# [Bug] 档描述去使用icon 不生效.

`Need Reproduce`

<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

按照文档描述去使用icon 不生效.
<img width="750" alt="image" src="https://github.com/umijs/umi/assets/9697295/09c65cf8-c88f-40a6-bcd2-7ea77be87d08"><!-- A clear and concise description of what the bug is. -->

<!-- 清晰的描述下遇到的问题。-->

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库
> [仓库
> ](https://github.com/LukerSpringtree/umi-icon-dynamicroute-bug)[
> ](https://github.com/LukerSpringtree/umi-icon-dynamicroute-bug)

文档中使用 import { Icon } from 'umi';,
应该更新为 import { Icon } from '@umijs/max';
使用的方法根本不生效.

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- YOUR_REPOSITORY_URL on github or stackbliz -->

## How To Reproduce

我项目里面有两个Icon 页面一个 Icon 一个DynamicIcon
顾名思义, Icon是静态路由, DynamicIcom 是动态加载路由.
<Icon icon='local:xxx' />
在静态路由失效.
**Steps to reproduce the behavior:** 1. 2.

1. 点击路由观察代码即可复现.
   **Expected behavior** 1. 2.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

[
](https://github.com/umijs/umi/issues/11624))

这Issue 评论有定位出来的原因~

## Context

- **Umi Version**:
- **Node Version**:
- **Platform**:

## LukerSpringtree

https://github.com/LukerSpringtree/umi-icon-dynamicroute-bug

复现的仓库地址

## LukerSpringtree

静态路由生效<img width="926" alt="image" src="https://github.com/umijs/umi/assets/9697295/54e3b2ed-748c-4f0b-a015-39bc1dffb68b">

[ 动态路由失效:(http://localhost:8000/dynamicIcon)

## fz6m

动态加载的方式无法使用 icons 这个约定式的方案，因为完全是动态的没法扫描到，解决方式有两个，维护完整的动态路由表：

```ts
const ROUTES_MAP = {
  "/path": React.lazy(() => import(`@/pages/DynamicIcon`)),
  // ...
};
```

或者手动的去添加你要使用的那些图标：

```ts
// .umirc.ts

  icons: {
    include: ['local:rice', ...]
  }
```

如果觉得不方便，就手动导入图标路径得到 url 使用吧，这样更方便。

## perintery

@fz6m 可以， 但是建议文档上补充好， 这些说明

## yaxiong2

```
// .umirc.ts

  icons: {
    include: ['local:rice', ...]
  }
```

@fz6m 可以在配置文件里使用require解析本地icon到include吗

## fz6m

可以在 `.umirc.ts` 内写 node 脚本读取 `src/icons` 里你想要自动加载的目录里所有文件的列表，构造一个 `local:xxx` 的列表放到 `include` 即可。

## LukerSpringtree

@fz6m
ROUTES_MAP
这个对象, 定义在什么文件里面? 才能生效

## fz6m

自己在任意的位置维护路径与 icon 的映射表，然后 patch 到动态路由表里。

## LukerSpringtree

> 自己在任意的位置维护路径与 icon 的映射表，然后 patch 到动态路由表里。

有 demo 嘛~

这个动态路由 又有其他的问题了~

因为是重构一个旧项目. 之前是动态路由. 这边bug特别多

## fz6m

需要给一个最小复现
