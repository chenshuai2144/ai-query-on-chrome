# 在tsx中引入less会提示模块找不到，但是可以运行

`Need Reproduce`

  <!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

<!-- 清晰的描述下遇到的问题。-->

## 最小可复现仓库

> 请使用 `yarn create umi` 创建，并上传到你的 GitHub 仓库

<!-- https://github.com/YOUR_REPOSITORY_URL -->

## 复现步骤，错误日志以及相关配置

<!-- 请提供复现步骤，错误日志以及相关配置 -->
<!-- 可以尝试不要锁版本，重新安装依赖试试先 -->

## 相关环境信息

- **Umi 版本**：
- **Node 版本**：
- **操作系统**：

  ## sorrycc

  请提供复现步骤。

  ## mankeheaven

![image](https://user-images.githubusercontent.com/17426397/56788077-0484a980-6831-11e9-9767-df9c0d2eb1b4.png)

## zhangji012

解决了，谢谢

## samwangdd

怎么解决的？

## grasilife

怎么解决的

## grasilife

> 解决了，谢谢

怎么解决的,我也遇到了

## brizer

> 解决了，谢谢

中国人就是喜欢这样，解决了又不放解决方案。不愿意帮助更多的人。

## Charley-Tang

@brizer @grasilife  
人家解决的图片已经给出了，  
创建一个typings.d.ts文件，在里面声明那些内容，  
实测在`组件目录`或者`项目根目录`都可以去掉这个提示

![image](https://user-images.githubusercontent.com/25997259/63575492-cddf5580-c5bc-11e9-8915-46f216745086.png)

## Charley-Tang

> 怎么解决的？

如上

## brizer

> @brizer @grasilife
> 人家解决的图片已经给出了，
> 创建一个typings.d.ts文件，在里面声明那些内容，
> 实测在`组件目录`或者`项目根目录`都可以去掉这个提示
>
> ![image](https://user-images.githubusercontent.com/25997259/63575492-cddf5580-c5bc-11e9-8915-46f216745086.png)

不好意思，没看到哈。。

## samwangdd

我把`typings.d.ts`加在组件目录下有效，但是在根目录下不生效。排查了很久，才发现`tsconfig.json`里`include`配置项里只有`["./src"]`，将它去掉就生效了！

## chenleyiduo

看不到图片

## onsummer

在根目录的 typing.d.ts 和组件目录下的 index.d.ts 或者 typing.d.ts(截图中没有，但是试过了） 写了 declare module '\*.less' 还是无效...

![image](https://user-images.githubusercontent.com/26168955/146338368-7accff0a-fa17-4767-936e-0ca51e4868d0.png)

![image](https://user-images.githubusercontent.com/26168955/146338557-db831a20-f4e7-4d01-9a8a-845a6802a457.png)

![image](https://user-images.githubusercontent.com/26168955/146338582-09f8f52c-209d-468a-b2f4-3adc11f2e882.png)

## xu-Aurora

> 在根目录的 typing.d.ts 和组件目录下的 index.d.ts 或者 typing.d.ts(截图中没有，但是试过了） 写了 declare module '\*.less' 还是无效...
>
> ![image](https://user-images.githubusercontent.com/26168955/146338368-7accff0a-fa17-4767-936e-0ca51e4868d0.png)
>
> ![image](https://user-images.githubusercontent.com/26168955/146338557-db831a20-f4e7-4d01-9a8a-845a6802a457.png)
>
> ![image](https://user-images.githubusercontent.com/26168955/146338582-09f8f52c-209d-468a-b2f4-3adc11f2e882.png)

> 在根目录的 typing.d.ts 和组件目录下的 index.d.ts 或者 typing.d.ts(截图中没有，但是试过了） 写了 declare module '\*.less' 还是无效...
>
> ![image](https://user-images.githubusercontent.com/26168955/146338368-7accff0a-fa17-4767-936e-0ca51e4868d0.png)
>
> ![image](https://user-images.githubusercontent.com/26168955/146338557-db831a20-f4e7-4d01-9a8a-845a6802a457.png)
>
> ![image](https://user-images.githubusercontent.com/26168955/146338582-09f8f52c-209d-468a-b2f4-3adc11f2e882.png)

解决了嘛？我也有这样的问题

## LolipopJ

Update：

因为之前我在 `typings.d.ts` 文件中使用了 `import type React from 'react'` 这样的引用，导致声明的所有全局类型（包括 `interface Window {}` 等）无效。去除后正常，只需要简单声明如下内容即可：

```ts
declare module "*.less" {
  const classes: Readonly<Record<string, string>>;
  export default classes;
}
```

---

> 在根目录的 typing.d.ts 和组件目录下的 index.d.ts 或者 typing.d.ts(截图中没有，但是试过了） 写了 declare module '\*.less' 还是无效...

参考[此文档](https://www.jianshu.com/p/7ddcc53df6d8)解决了：

```ts
// typings.d.ts
declare module "*.module.less" {
  const classes: Readonly<Record<string, string>>;
  export default classes;
  declare module "*.less";
}
```

```json
// tsconfig.json
{
  "include": ["typings.d.ts", "otherPath..."]
}
```
