# externals只能是string或object?

`type(bug)`

[https://webpack.js.org/configuration/externals/](https://webpack.js.org/configuration/externals/)
umi的externals不是这种语法配置?

```
externals: [
   {
      react: 'react',
   },
  (context: string, request: string, callback: any) => {
      ...
  }
  ...
]
```

只能接受string或object?

```
Validate config "externals" failed, "value" must be one of [object, string]
ValidationError: "value" must be one of [object, string]

```

看了下ts定义长这样, (() => any)应该怎么用,尝试了下启动会一致卡在0%

```
export interface IConfigFromPlugins {
  ...
  externals?: {} | string | (() => any);
 ...
}
```

## xiaohuoni

支持的，以下配置可以正常编译。

```ts
externals: [
  {
    // String
    react: "window.React",
    "react-dom": "window.ReactDOM",
    // Object
  },
  // Function
  function (context, request, callback) {
    callback();
  },
];
scripts: [
  "https://gw.alipayobjects.com/os/lib/react/16.13.1/umd/react.production.min.js",
  "https://gw.alipayobjects.com/os/lib/react-dom/16.13.1/umd/react-dom.production.min.js",
];
```

## chenxiaolei

@xiaohuoni 不对呀, 编译不过, 是我错过了什么吗

1.  yarn create @umijs/umi-app
2.  yarn install
3.  修改 .umirc.ts 中的externals

```
import { defineConfig } from 'umi';

export default defineConfig({
  nodeModulesTransform: {
    type: 'none',
  },
  routes: [
    { path: '/', component: '@/pages/index' },
  ],
  externals : [
    {
      // String
      react: 'window.React',
      'react-dom': 'window.ReactDOM',
      // Object
    },
    // Function
    function (context, request, callback) {
      callback();
    },
  ],
   scripts : [
    'https://gw.alipayobjects.com/os/lib/react/16.13.1/umd/react.production.min.js',
    'https://gw
```
