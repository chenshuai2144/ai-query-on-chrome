# [Bug] è¯·é—®å¦‚ä½•åœ¨useModel('model')æ˜¯å»åŠ è½½modelä¸­çš„useEffectè€Œä¸æ˜¯ç¨‹åºä¸€å¯åŠ¨å°±æ‰§è¡Œäº†useEffect

`Question`

<!--
æ„Ÿè°¢æ‚¨å‘æˆ‘ä»¬åé¦ˆé—®é¢˜ï¼Œä¸ºäº†é«˜æ•ˆçš„è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬æœŸæœ›ä½ èƒ½æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
-->

## What happens?

<!-- æ¸…æ™°çš„æè¿°ä¸‹é‡åˆ°çš„é—®é¢˜ã€‚-->

## æœ€å°å¯å¤ç°ä»“åº“

> è¯·ä½¿ç”¨ `yarn create @umijs/umi-app` åˆ›å»ºï¼Œå¹¶ä¸Šä¼ åˆ°ä½ çš„ GitHub ä»“åº“

<!-- ä¸ºèŠ‚çº¦å¤§å®¶çš„æ—¶é—´ï¼Œæ— å¤ç°æ­¥éª¤çš„ ISSUE ä¼šè¢«å…³é—­ï¼Œæä¾›ä¹‹åå† REOPEN -->
<!-- https://github.com/YOUR_REPOSITORY_URL -->

## å¤ç°æ­¥éª¤ï¼Œé”™è¯¯æ—¥å¿—ä»¥åŠç›¸å…³é…ç½®

<!-- è¯·æä¾›å¤ç°æ­¥éª¤ï¼Œé”™è¯¯æ—¥å¿—ä»¥åŠç›¸å…³é…ç½® -->
<!-- å¯ä»¥å°è¯•ä¸è¦é”ç‰ˆæœ¬ï¼Œé‡æ–°å®‰è£…ä¾èµ–è¯•è¯•å…ˆ -->

## ç›¸å…³ç¯å¢ƒä¿¡æ¯

- **Umi ç‰ˆæœ¬**ï¼š
- **Node ç‰ˆæœ¬**ï¼š
- **æ“ä½œç³»ç»Ÿ**ï¼š

import { useState,useEffect, useCallback } from 'react';
import { query } from '../services/basedata'

export default function useAuthModel() {
const [bdlist, setbdlist] = useState<API.BaseData[]>([]);
useEffect(()=>{
//æŸ¥è¯¢åˆ—è¡¨
query().then(res => {
setbdlist(res);
});
}, []);

return {
bdlist
};
}

æˆ‘éœ€è¦åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡ŒuseModel('model')å»åˆå§‹åŒ–è¿™ä¸ªmodelçš„æ‰€æœ‰æ•°æ®,è€Œä¸æ˜¯ç¨‹åºä¸€å¯åŠ¨å°±æŠŠæ‰€æœ‰modeléƒ½åŠ è½½å‡ºæ¥äº†

## zhang0ZGC

ç¡®å®æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ã€‚ã€‚ã€‚getInitialStateè·Ÿmodelsæ–‡ä»¶å¤¹é‡Œé¢çš„ä»£ç æ—¶åŒæ—¶æ‰§è¡Œçš„ã€‚ã€‚æˆ‘ `getInitialState` æ–¹æ³•é‡Œé¢å¯èƒ½æœ‰æ ¡éªŒæƒé™çš„æ­¥éª¤ï¼Œè®¾ç½®tokenç­‰åŠŸèƒ½ï¼Œç»“æœ `models` æ–‡ä»¶å¤¹é‡Œé¢çš„æ–¹æ³•å´æ¯”å®ƒå…ˆæ‰§è¡Œäº†ï¼Œåªèƒ½æ‹†å‡ºæ¥ä½¿ç”¨hooksçš„æ–¹å¼å¼•å…¥ ğŸ¤£

## Kaier33

æ‰€æœ‰çš„modelåœ¨å¯åŠ¨(åˆ·æ–°)æ—¶å…¨éƒ¨è¦è·‘ä¸€é. æ€»æ„Ÿè§‰ä¸å¤ªå¥½~
æˆ‘ä¸åœ¨Modelä¸­ä½¿ç”¨effect, åªå†™æ–¹æ³•, ç„¶ååœ¨ç»„ä»¶çš„effectå»è°ƒç”¨

## hooliy

æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæ‰“å¼€ç™»å½•é¡µå°±æŠŠmodelså…¨æ‰§è¡Œäº†ä¸€éï¼Œå¯¼è‡´é¡µé¢æŠ¥äº†ä¸€å †çš„403æç¤ºæ¡†ï¼Œä½“éªŒå¤ªå·®äº†

## promotion-xu

dynamicèƒ½è§£å†³è¿™ä¸ªé—®é¢˜å—
