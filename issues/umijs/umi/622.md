# umi build怎么去掉项目中的console.log

如题，开发环境下代码中会写一些console方便调试，打包的时候要一个一个删除太麻烦了

## sorrycc

https://www.google.com/search?q=babel+plugin+strip+console&oq=babel+plugin+strip+console&aqs=chrome..69i57j0l2.4827j0j7&sourceid=chrome&ie=UTF-8

## terminalqo

`npm i babel-plugin-transform-remove-console --save-dev `
config,js:
`extraBabelPlugins: ['transform-remove-console'],`

## xianjie-li

要在外面再加一层
extraBabelPlugins: [['transform-remove-console', { "exclude": [ "error", "warn"] }]],

## wtchaos

uglifyJSOptions(opts) {
opts.uglifyOptions.compress.drop_debugger = true;
opts.uglifyOptions.compress.drop_console = true;
return opts;
},

## blueju

> uglifyJSOptions(opts) {
> opts.uglifyOptions.compress.drop_debugger = true;
> opts.uglifyOptions.compress.drop_console = true;
> return opts;
> },

[umi 3 中已删除该配置项](https://umijs.org/zh-CN/docs/upgrade-to-umi-3)

## gujiwuqing

经测验。。貌似现在没用

## leehomeok

> 经测验。。貌似现在没用

> `npm i babel-plugin-transform-remove-console --save-dev `
> config,js:
> `extraBabelPlugins: ['transform-remove-console'],`

在umi3 版本貌似没用

## Amigosen

不管用了，有人研究出来请@我

## noxue

这是我 `.umirc.tx` 中的配置，chainWebpack 里面就是去掉console输出的：

```
import { defineConfig } from 'umi';

export default defineConfig({
  nodeModulesTransform: {
    type: 'none',
  },
  title: '单点登录系统',
  publicPath: '/',
  history: {
    type: 'browser',
  },

  routes: [
    { path: '/', redirect: '/user/auth' },
    { path: '/user/reg', component: '@/pages/user/reg' },
    { path: '/user/login', component: '@/pages/user/login' },
    { path: '/user/reset', component: '@/pages/user/reset' },
    { path: '/user/profile', component: '@/pages/user/profile' },
    { path: '/user/auth', component: '@/pages/user/auth' },
    { path: '/user/reset', component: '@/pages/user/reset' },
  ],
  fastRefresh: {},
  dynamicImport: {},
  chainWebpack: function (config, { webpack }) {
    console.log(process.env.NODE_ENV)
    // 线上环境就去除console输出
    process.env.NODE_ENV === 'production' && config.optimization.minimizer('terser').tap((args) => {
      args[0].terserOptions.compress.drop_console = true;
      args[0].terserOptions.compress.drop_debugger = true;
      return args;
    });
  }

});

```

再添加依赖： `yarn add terser-webpack-plugin --dev`

最后 `yarn build`

umi 3.5.34 亲测有效

@Amigosen

## hardmanhong

项目用的 esbuild 压缩，这是我的 `.umirc.ts` 配置，版本4.0.11

```js
  jsMinifier: 'esbuild',
  jsMinifierOptions: {
    drop: ['console', 'debugger'],
  },
```

terser的应该是

```js
  jsMinifier: 'terser',
  jsMinifierOptions: {
    drop_console: true,
    drop_debugger : true
  },
```
