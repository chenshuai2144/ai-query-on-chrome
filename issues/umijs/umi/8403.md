# Umi v4：禁止使用影子依赖

## 问题

1. 项目可能会使用到影子依赖。
2. 影子依赖可能会在未来导致项目报错。

## 解决方案

1. 如果使用 pnpm 并且没有开启提升依赖的配置，不需要添加此功能。
2. 基于辟shu在做的 MFSU V4 的前置步骤。
3. 支持增量编译。
4. 提示用户他们导入了未声明的文件，并给出文件路径和行号。
5. 可选：使用 @babel/code-frame 美化报错信息。
6. 处理 externals 和 alias，针对 alias 的结果做影子依赖校验。

## HaishengLiang

mark

## fz6m

完成于 https://github.com/umijs/umi/commit/3ab8cbfd852e972a4beac8431ba006f8fdab681f
