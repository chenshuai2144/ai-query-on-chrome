# import 检测，禁止使用影子依赖

`type(enhancement)`

## 问题

1、项目可能会不经意间使用到影子依赖，尤其当 npm client 不是 pnpm 的时候
2、使用影子依赖实际是埋下了潜在问题，让项目在未来随时可能报错

## 方案

1、如果 npmClient 是 pnpm 并且「没有开启提升依赖的配置」时，不加此功能，因为已默认有
2、基于 辟shu 在做的 MFSU V4 的前置步骤
3、支持增量编译
4、遇到了提示「你 import 了 XXX，但没有在 package.json 中声明他」，同时给出文件路径和行号
5、可选：用 @babel/code-frame 美化报错信息
6、处理 externals，匹配的不做影子依赖校验
7、处理 alias，针对 alias 的结果做影子依赖校验

## HaishengLiang

mark

## fz6m

在 https://github.com/umijs/umi/commit/3ab8cbfd852e972a4beac8431ba006f8fdab681f 完成
