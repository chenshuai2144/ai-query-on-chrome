# [Bug] Nested Convention Routing while Migrating v3 -> v4

<!--
⚠️ ⚠️ ⚠️ 注意：讨论和提问请到讨论区（https://github.com/umijs/umi/discussions），否则会被直接关掉。 ⚠️ ⚠️ ⚠️
-->
<!--
感谢您向我们反馈问题，为了高效的解决问题，我们期望你能提供以下信息：
-->

## What happens?

<!-- A clear and concise description of what the bug is. -->

It seams like nested layouts and wrapping is not supported anymore for conventional routing and doesn't even work while using explicit route definitions with Umi 4.

Before migrating to Umi 4 we were using nested conventional routing (https://v3.umijs.org/docs/convention-routing#nested-routing) with some custom wrappers and nested `_layout.tsx` files for certain sets of subpages. This leads now to missing data injection, wrong access control...

Anyway, we also tested it while not using conventional routing via defining the routes manually and tried using some components as 'layout' which doesn't work eighter.

## Mini Showcase Repository(REQUIRED)

> Please provide a [minimal reproduction](https://stackoverflow.com/help/minimal-reproducible-example) then upload to your GitHub. 请提供 [最小重现](https://stackoverflow.com/help/minimal-reproducible-example)，并上传到你的 GitHub 仓库

<!-- 为节约大家的时间，无复现步骤的 ISSUE 会被关闭，提供之后再 REOPEN -->
<!-- https://github.com/YOUR_REPOSITORY_URL -->

## How To Reproduce

**Steps to reproduce the behavior:** 1. 2.

1. Setup new project
2. Create multiple nested routings
3. Create layouts or wrappers for each nesting layer with reporting ( console.log, alert, ... )
4. Layouts other than the rooted global layout don't get called

**Expected behavior** 1. 2.

Similar behaviour like UmiJS 3 or an convenient alternative to use multiple and nested layouts and wrappers.

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**: umijs/max 4.0.6
- **Node Version**: v14.17.0
- **Platform**: Windows 10 / Linux Debian Buster

## fz6m

If you need nested layouts, should use `wrappers`

https://github.com/umijs/umi/blob/157af816c8b94ec7a9000a6b80152d8393c9fdcc/examples/boilerplate/.umirc.ts#L25

## muneeb-ahmad-pikessoft

@LtJulius have you solved your issue regarding nested routing?
