# umi在启动的时候，执行getInitialState的时候白屏

## What happens?

umi应用在启动的时候会调用getInitialState，这个方法会阻止页面的其他代码运行，然后这个时候就会有一个页面的白屏。

## Mini Showcase Repository(REQUIRED)

## How To Reproduce

在app.ts中如果getInitialState里面运行的接口延时非常长的时候会有一个较长时间的白屏

```typescript
/**
 * 获取项目初始值的函数
 */
export function getInitialState() {
  /** 用来模拟一个很高延时的请求 */
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve({ name: "aa", age: "100" });
    }, 30000);
  });
}
```

<!-- 请提供复现链接/步骤，错误日志以及相关配置 -->

## Context

- **Umi Version**:
- **Node Version**:
- **Platform**:

## ihavecoke

添加个 loading 过渡动画？

## sorrycc

目前是这样的，umi 3 也一样。有需求可直接提 PR 或者给方案。

## drizzlesconsin

@sorrycc umi3 在运行时配置里，是有个 `initialStateConfig` 可以用。

```tsx
export const initialStateConfig = {
  loading: <Spin />,
};
```

## drizzlesconsin

Umi4 可以这样

```ts
// config/config.ts
initialState: {
  loading: '@ant-design/pro-layout/es/PageLoading',
},
```

## a992681784

> Umi4 可以这样
>
> ```ts
> // config/config.ts
> initialState: {
>   loading: '@ant-design/pro-layout/es/PageLoading',
> },
> ```

试了下这样配置报错了 显示webpack解析路径报错？是还要配置什么吗？

## jimwong666

> Umi4 可以这样
>
> ```ts
> // config/config.ts
> initialState: {
>   loading: '@ant-design/pro-layout/es/PageLoading',
> },
> ```

很赞👍谢谢
