# [Bug] 升级antd V5后，umi报错Cannot find module 'antd/dist/theme'

报错堆栈如下：
![image](https://user-images.githubusercontent.com/11656089/203925580-c7d51263-e4b6-447b-ac9b-b170303c9d84.png)

已经尝试过清除缓存，清除node_modules，清除.umi等各种办法，均不奏效，是否还有其他配置？

## kav012375

这个报错是在tnpm install阶段产生

## kav012375

发现引用代码如下：
`if (antd.dark || antd.compact) {
      const { getThemeVariables } = require("antd/dist/theme");
      memo.theme = {
        ...getThemeVariables(antd),
        ...memo.theme
      };
    }`
是因为项目开启紧凑主题？那么升级到V5后，紧凑主题如何配置？

## fz6m

初始化一个 https://github.com/ant-design/ant-design-pro 项目研究下吧。侧边栏有切换主题。

这个地方也有，可以自己写：https://procomponents.ant.design/components/layout

## lx815

我直接按照umi4的文档新建了umi/max的项目，然后再umirc里面配置antd的主题色，也配置不成功。
umi：4.0.32
antd: 5.0.4

// umirc

antd:{
theme:{
token:{
colorPrimary: '#6743D5'
}
}
}

## Lukiya

去掉
antd: {
compact: true,
}

后恢复正常
